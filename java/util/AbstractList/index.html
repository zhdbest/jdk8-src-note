<!DOCTYPE html>
<html lang="zh-cn" class="color-toggle-hidden">

<head>
    <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="color-scheme" content="light dark" />





    <meta name="description" content="1. protected AbstractList() 2. public boolean add(E e) 3. abstract public E get(int index); 4. public E set(int index, E element) 5. public void add(int index, E element) 6. public E remove(int index) 7. public int indexOf(Object o) 8. public int lastIndexOf(Object o) 9. public void clear() 10. public boolean addAll(int index, Collection&lt;? extends E&gt; c) 11. public Iterator&lt;E&gt; iterator() 12. public ListIterator&lt;E&gt; listIterator() 13. public ListIterator&lt;E&gt; listIterator(final int index) 14.">



    <title>AbstractList | JDK8源码阅读笔记</title>

    <link rel="icon" href="/jdk8-src-note/favicon/favicon-32x32.png" type="image/x-icon">

    <script src="/jdk8-src-note/js/darkmode-ce906ea916.min.js"></script>

<link rel="preload" as="font" href="/jdk8-src-note/fonts/Metropolis.woff2" type="font/woff2" crossorigin="anonymous">
<link rel="preload" as="font" href="/jdk8-src-note/fonts/LiberationSans.woff2" type="font/woff2" crossorigin="anonymous">

<link rel="preload" href="/jdk8-src-note/main-cc3cbe901b.min.css" as="style">
<link rel="stylesheet" href="/jdk8-src-note/main-cc3cbe901b.min.css" media="all">

<link rel="preload" href="/jdk8-src-note/mobile-249b801e7d.min.css" as="style">
<link rel="stylesheet" href="/jdk8-src-note/mobile-249b801e7d.min.css" media="screen and (max-width: 45rem)">

<link rel="preload" href="/jdk8-src-note/print-f79fc3e5d7.min.css" as="style">
<link rel="stylesheet" href="/jdk8-src-note/print-f79fc3e5d7.min.css" media="print">

<link rel="preload" href="/jdk8-src-note/custom.css" as="style">
<link rel="stylesheet" href="/jdk8-src-note/custom.css" media="all">



<!-- Made with Geekdoc theme https://github.com/thegeeklab/hugo-geekdoc -->

    

</head>

<body itemscope itemtype="https://schema.org/WebPage">
    
<!-- geekdoc include: sprites/abstractClass.svg -->
<svg  id="abstractClass" class="svg-sprite" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 16 16">
  <defs>
    <rect id="abstractclass-a" width="8" height="14"/>
  </defs>
  <g fill="none" fill-rule="evenodd">
    <path fill="#9AA7B0" fill-opacity=".8" d="M3 3.1055C1.764 4.3685 1 6.0935 1 8.0005 1 9.9065 1.764 11.6315 3 12.8945L3 3.1055zM13 3.1055L13 12.8945C14.236 11.6315 15 9.9065 15 8.0005 15 6.0935 14.236 4.3675 13 3.1055"/>
    <g transform="translate(4 1)">
      <mask id="abstractclass-b" fill="#fff">
        <use xlink:href="#abstractclass-a"/>
      </mask>
      <g mask="url(#abstractclass-b)">
        <g transform="translate(-4 -1)">
          <path fill="#40B6E0" fill-opacity=".6" d="M15,8 C15,11.866 11.866,15 8,15 C4.134,15 1,11.866 1,8 C1,4.134 4.134,1 8,1 C11.866,1 15,4.134 15,8"/>
          <path fill="#231F20" fill-opacity=".7" d="M5,4.28253174 C4.53,4.74153174 4.028,4.978 3.1,5 C2.061,5.022 1,4.2794 1,3.0004 C1,1.7124 1.971,1 3.1,1 C3.94833171,1 4.54833171,1.18475342 4.9,1.55426025 L5.5162,0.836730957 C4.8293999,0.270175195 4.28826904,0.0004 3.0982,0.0004 C1.3402,0.0004 0.0002,1.3584 0.0002,3.0004 C0.0002,4.6824 1.3642,6.0004 3.0022,6.0004 C4.29284668,6.0004 5.0232,5.5934 5.6162,4.9814 C5.2054,4.51548783 5,4.28253174 5,4.28253174 Z" transform="translate(5 5)"/>
        </g>
      </g>
    </g>
  </g>
</svg>


<!-- geekdoc include: sprites/class.svg -->
<svg id="class" class="svg-sprite" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16">
  <g fill="none" fill-rule="evenodd">
    <path fill="#40B6E0" fill-opacity=".6" d="M15,8 C15,11.866 11.866,15 8,15 C4.134,15 1,11.866 1,8 C1,4.134 4.134,1 8,1 C11.866,1 15,4.134 15,8"/>
    <path fill="#231F20" fill-opacity=".7" d="M5,4.28253174 C4.53,4.74153174 4.028,4.978 3.1,5 C2.061,5.022 1,4.2794 1,3.0004 C1,1.7124 1.971,1 3.1,1 C3.94833171,1 4.54833171,1.18475342 4.9,1.55426025 L5.5162,0.836730957 C4.8293999,0.270175195 4.28826904,0.0004 3.0982,0.0004 C1.3402,0.0004 0.0002,1.3584 0.0002,3.0004 C0.0002,4.6824 1.3642,6.0004 3.0022,6.0004 C4.29284668,6.0004 5.0232,5.5934 5.6162,4.9814 C5.2054,4.51548783 5,4.28253174 5,4.28253174 Z" transform="translate(5 5)"/>
  </g>
</svg>


<!-- geekdoc include: sprites/interface.svg -->
<svg  id="interface" class="svg-sprite" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16">
  <g fill="none" fill-rule="evenodd">
    <path fill="#62B543" fill-opacity=".6" d="M15,8 C15,11.866 11.866,15 8,15 C4.134,15 1,11.866 1,8 C1,4.134 4.134,1 8,1 C11.866,1 15,4.134 15,8"/>
    <polygon fill="#231F20" fill-opacity=".7" points="8.5 10 8.5 6 9.5 5.664 9.5 5 6.5 5 6.5 5.664 7.5 6 7.5 10 6.5 10.344 6.5 11 9.5 11 9.5 10.344"/>
  </g>
</svg>


<!-- geekdoc include: sprites/package.svg -->
<svg id="package" class="svg-sprite" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16">
  <path fill="#9AA7B0" fill-opacity=".8" fill-rule="evenodd" d="M6,10.4951 C4.896,10.4951 4.001,9.6001 4,8.4981 C3.999,7.3941 4.894,6.5001 5.997,6.5001 C7.102,6.5001 7.997,7.3941 7.998,8.4981 C7.999,9.6001 7.104,10.4951 6,10.4951 Z M7.984,4.0001 L6.696,2.7111 C6.305,2.3201 5.532,2.0001 4.979,2.0001 L1.051,2.0001 C1.023,2.0001 1,2.0231 1,2.0511 L1,13.0001 L15,13.0001 L15,4.0001 L7.984,4.0001 Z"/>
</svg>


<!-- geekdoc include: sprites/geekdoc.svg -->
<svg class="svg-sprite" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><symbol viewBox="-2.29 -2.29 28.57 28.57" id="gdoc_arrow_back" xmlns="http://www.w3.org/2000/svg"><path d="M24 10.526v2.947H5.755l8.351 8.421-2.105 2.105-12-12 12-12 2.105 2.105-8.351 8.421H24z"/></symbol><symbol viewBox="-2.29 -2.29 28.57 28.57" id="gdoc_arrow_left_alt" xmlns="http://www.w3.org/2000/svg"><path d="M5.965 10.526V6.035L0 12l5.965 5.965v-4.491H24v-2.947H5.965z"/></symbol><symbol viewBox="-2.29 -2.29 28.57 28.57" id="gdoc_arrow_right_alt" xmlns="http://www.w3.org/2000/svg"><path d="M18.035 10.526V6.035L24 12l-5.965 5.965v-4.491H0v-2.947h18.035z"/></symbol><symbol viewBox="-2.29 -2.29 32.57 32.57" id="gdoc_bitbucket" xmlns="http://www.w3.org/2000/svg"><path d="M15.905 13.355c.189 1.444-1.564 2.578-2.784 1.839-1.375-.602-1.375-2.784-.034-3.403 1.151-.705 2.818.223 2.818 1.564zm1.907-.361c-.309-2.44-3.076-4.056-5.328-3.042-1.426.636-2.389 2.148-2.32 3.747.086 2.097 2.08 3.815 4.176 3.626s3.729-2.234 3.472-4.331zm4.108-9.315c-.756-.997-2.045-1.169-3.179-1.358-3.214-.516-6.513-.533-9.727.034-1.066.172-2.269.361-2.939 1.323 1.1 1.031 2.664 1.186 4.073 1.358 2.544.327 5.156.344 7.699.017 1.426-.172 3.008-.309 4.073-1.375zm.979 17.788c-.481 1.684-.206 3.953-1.994 4.932-3.076 1.701-6.806 1.89-10.191 1.289-1.787-.327-3.884-.894-4.864-2.578-.43-1.65-.705-3.334-.98-5.018l.103-.275.309-.155c5.121 3.386 12.288 3.386 17.427 0 .808.241.206 1.22.189 1.805zM26.01 4.951c-.584 3.764-1.255 7.51-1.908 11.257-.189 1.1-1.255 1.719-2.148 2.183-3.214 1.615-6.96 1.89-10.483 1.512-2.389-.258-4.829-.894-6.771-2.389-.911-.705-.911-1.908-1.083-2.922-.602-3.523-1.289-7.046-1.719-10.604.206-1.547 1.942-2.217 3.231-2.698C6.848.654 8.686.362 10.508.19c3.884-.378 7.854-.241 11.618.859 1.341.395 2.784.945 3.695 2.097.412.533.275 1.203.189 1.805z"/></symbol><symbol viewBox="-2.29 -2.29 28.57 28.57" id="gdoc_bookmark" xmlns="http://www.w3.org/2000/svg"><path d="M15.268 4.392q.868 0 1.532.638t.664 1.506v17.463l-7.659-3.268-7.608 3.268V6.536q0-.868.664-1.506t1.532-.638h10.876zm4.34 14.144V4.392q0-.868-.638-1.532t-1.506-.664H6.537q0-.868.664-1.532T8.733 0h10.876q.868 0 1.532.664t.664 1.532v17.412z"/></symbol><symbol viewBox="-2.29 -2.29 32.57 32.57" id="gdoc_brightness_auto" xmlns="http://www.w3.org/2000/svg"><path d="M16.846 18.938h2.382L15.22 7.785h-2.44L8.772 18.938h2.382l.871-2.44h3.95zm7.087-9.062L27.999 14l-4.066 4.124v5.809h-5.809L14 27.999l-4.124-4.066H4.067v-5.809L.001 14l4.066-4.124V4.067h5.809L14 .001l4.124 4.066h5.809v5.809zm-11.385 4.937L14 10.282l1.452 4.531h-2.904z"/></symbol><symbol viewBox="-2.29 -2.29 32.57 32.57" id="gdoc_brightness_dark" xmlns="http://www.w3.org/2000/svg"><path d="M14 21.435q3.079 0 5.257-2.178T21.435 14t-2.178-5.257T14 6.565q-1.51 0-3.079.697 1.917.871 3.108 2.701T15.22 14t-1.191 4.037-3.108 2.701q1.568.697 3.079.697zm9.933-11.559L27.999 14l-4.066 4.124v5.809h-5.809L14 27.999l-4.124-4.066H4.067v-5.809L.001 14l4.066-4.124V4.067h5.809L14 .001l4.124 4.066h5.809v5.809z"/></symbol><symbol viewBox="-2.29 -2.29 32.57 32.57" id="gdoc_brightness_light" xmlns="http://www.w3.org/2000/svg"><path d="M14 21.435q3.079 0 5.257-2.178T21.435 14t-2.178-5.257T14 6.565 8.743 8.743 6.565 14t2.178 5.257T14 21.435zm9.933-3.311v5.809h-5.809L14 27.999l-4.124-4.066H4.067v-5.809L.001 14l4.066-4.124V4.067h5.809L14 .001l4.124 4.066h5.809v5.809L27.999 14z"/></symbol><symbol viewBox="-2.29 -2.29 32.57 32.57" id="gdoc_cloud_off" xmlns="http://www.w3.org/2000/svg"><path d="M9.023 10.5H7q-1.914 0-3.281 1.395t-1.367 3.309 1.367 3.281T7 19.852h11.375zM3.5 4.976l1.477-1.477L24.5 23.022l-1.477 1.477-2.352-2.297H6.999q-2.898 0-4.949-2.051t-2.051-4.949q0-2.844 1.969-4.867t4.758-2.133zm19.086 5.578q2.242.164 3.828 1.832T28 16.351q0 3.008-2.461 4.758l-1.695-1.695q1.805-.984 1.805-3.063 0-1.422-1.039-2.461t-2.461-1.039h-1.75v-.602q0-2.68-1.859-4.539t-4.539-1.859q-1.531 0-2.953.711l-1.75-1.695Q11.431 3.5 14.001 3.5q2.953 0 5.496 2.078t3.09 4.977z"/></symbol><symbol viewBox="-2.29 -2.29 32.57 32.57" id="gdoc_code" xmlns="http://www.w3.org/2000/svg"><path d="M9.917 24.5a1.75 1.75 0 10-3.501.001 1.75 1.75 0 003.501-.001zm0-21a1.75 1.75 0 10-3.501.001A1.75 1.75 0 009.917 3.5zm11.666 2.333a1.75 1.75 0 10-3.501.001 1.75 1.75 0 003.501-.001zm1.75 0a3.502 3.502 0 01-1.75 3.026c-.055 6.581-4.721 8.039-7.82 9.023-2.898.911-3.846 1.349-3.846 3.117v.474a3.502 3.502 0 011.75 3.026c0 1.932-1.568 3.5-3.5 3.5s-3.5-1.568-3.5-3.5c0-1.294.711-2.424 1.75-3.026V6.526A3.502 3.502 0 014.667 3.5c0-1.932 1.568-3.5 3.5-3.5s3.5 1.568 3.5 3.5a3.502 3.502 0 01-1.75 3.026v9.06c.93-.456 1.914-.766 2.807-1.039 3.391-1.075 5.323-1.878 5.359-5.687a3.502 3.502 0 01-1.75-3.026c0-1.932 1.568-3.5 3.5-3.5s3.5 1.568 3.5 3.5z"/></symbol><symbol viewBox="-2.29 -2.29 36.57 36.57" id="gdoc_date" xmlns="http://www.w3.org/2000/svg"><path d="M27.192 28.844V11.192H4.808v17.652h22.384zm0-25.689q1.277 0 2.253.976t.976 2.253v22.459q0 1.277-.976 2.216t-2.253.939H4.808q-1.352 0-2.291-.901t-.939-2.253V6.385q0-1.277.939-2.253t2.291-.976h1.577V.001h3.23v3.155h12.769V.001h3.23v3.155h1.577zm-3.155 11.267v3.155h-3.23v-3.155h3.23zm-6.46 0v3.155h-3.155v-3.155h3.155zm-6.384 0v3.155h-3.23v-3.155h3.23z"/></symbol><symbol viewBox="-2.29 -2.29 36.57 36.57" id="gdoc_download" xmlns="http://www.w3.org/2000/svg"><path d="M2.866 28.209h26.269v3.79H2.866v-3.79zm26.268-16.925L16 24.418 2.866 11.284h7.493V.001h11.283v11.283h7.493z"/></symbol><symbol viewBox="-2.29 -2.29 36.57 36.57" id="gdoc_email" xmlns="http://www.w3.org/2000/svg"><path d="M28.845 9.615v-3.23L16 14.422 3.155 6.385v3.23L16 17.577zm0-6.46q1.277 0 2.216.977T32 6.385v19.23q0 1.277-.939 2.253t-2.216.977H3.155q-1.277 0-2.216-.977T0 25.615V6.385q0-1.277.939-2.253t2.216-.977h25.69z"/></symbol><symbol viewBox="-2.29 -2.29 32.57 32.57" id="gdoc_git" xmlns="http://www.w3.org/2000/svg"><path d="M27.472 12.753L15.247.529a1.803 1.803 0 00-2.55 0l-2.84 2.84 2.137 2.137a2.625 2.625 0 013.501 3.501l3.499 3.499a2.625 2.625 0 11-1.237 1.237l-3.499-3.499c-.083.04-.169.075-.257.106v7.3a2.626 2.626 0 11-1.75 0v-7.3a2.626 2.626 0 01-1.494-3.607L8.62 4.606l-8.09 8.09a1.805 1.805 0 000 2.551l12.225 12.224a1.803 1.803 0 002.55 0l12.168-12.168a1.805 1.805 0 000-2.551z"/></symbol><symbol viewBox="-2.29 -2.29 36.57 36.57" id="gdoc_github" xmlns="http://www.w3.org/2000/svg"><path d="M16 .394c8.833 0 15.999 7.166 15.999 15.999 0 7.062-4.583 13.062-10.937 15.187-.813.146-1.104-.354-1.104-.771 0-.521.021-2.25.021-4.396 0-1.5-.5-2.458-1.083-2.958 3.562-.396 7.312-1.75 7.312-7.896 0-1.75-.625-3.167-1.646-4.291.167-.417.708-2.042-.167-4.25-1.333-.417-4.396 1.646-4.396 1.646a15.032 15.032 0 00-8 0S8.937 6.602 7.603 7.018c-.875 2.208-.333 3.833-.167 4.25-1.021 1.125-1.646 2.542-1.646 4.291 0 6.125 3.729 7.5 7.291 7.896-.458.417-.875 1.125-1.021 2.146-.917.417-3.25 1.125-4.646-1.333-.875-1.521-2.458-1.646-2.458-1.646-1.562-.021-.104.979-.104.979 1.042.479 1.771 2.333 1.771 2.333.938 2.854 5.396 1.896 5.396 1.896 0 1.333.021 2.583.021 2.979 0 .417-.292.917-1.104.771C4.582 29.455-.001 23.455-.001 16.393-.001 7.56 7.165.394 15.998.394zM6.063 23.372c.042-.083-.021-.187-.146-.25-.125-.042-.229-.021-.271.042-.042.083.021.187.146.25.104.062.229.042.271-.042zm.646.709c.083-.062.062-.208-.042-.333-.104-.104-.25-.146-.333-.062-.083.062-.062.208.042.333.104.104.25.146.333.062zm.625.937c.104-.083.104-.25 0-.396-.083-.146-.25-.208-.354-.125-.104.062-.104.229 0 .375s.271.208.354.146zm.875.875c.083-.083.042-.271-.083-.396-.146-.146-.333-.167-.417-.062-.104.083-.062.271.083.396.146.146.333.167.417.062zm1.187.521c.042-.125-.083-.271-.271-.333-.167-.042-.354.021-.396.146s.083.271.271.312c.167.062.354 0 .396-.125zm1.313.104c0-.146-.167-.25-.354-.229-.187 0-.333.104-.333.229 0 .146.146.25.354.229.187 0 .333-.104.333-.229zm1.208-.208c-.021-.125-.187-.208-.375-.187-.187.042-.312.167-.292.312.021.125.187.208.375.167s.312-.167.292-.292z"/></symbol><symbol viewBox="-2.29 -2.29 32.57 32.57" id="gdoc_gitlab" xmlns="http://www.w3.org/2000/svg"><path d="M1.629 11.034L14 26.888.442 17.048a1.09 1.09 0 01-.39-1.203l1.578-4.811zm7.217 0h10.309l-5.154 15.854zM5.753 1.475l3.093 9.559H1.63l3.093-9.559a.548.548 0 011.031 0zm20.618 9.559l1.578 4.811c.141.437-.016.922-.39 1.203l-13.558 9.84 12.371-15.854zm0 0h-7.216l3.093-9.559a.548.548 0 011.031 0z"/></symbol><symbol viewBox="-2.29 -2.29 36.57 36.57" id="gdoc_heart" xmlns="http://www.w3.org/2000/svg"><path d="M16 29.714a1.11 1.11 0 01-.786-.321L4.072 18.643c-.143-.125-4.071-3.714-4.071-8 0-5.232 3.196-8.357 8.535-8.357 3.125 0 6.053 2.464 7.464 3.857 1.411-1.393 4.339-3.857 7.464-3.857 5.339 0 8.535 3.125 8.535 8.357 0 4.286-3.928 7.875-4.089 8.035L16.785 29.392c-.214.214-.5.321-.786.321z"/></symbol><symbol viewBox="-2.29 -2.29 32.57 32.57" id="gdoc_keyborad_arrow_down" xmlns="http://www.w3.org/2000/svg"><path d="M3.281 5.36L14 16.079 24.719 5.36 28 8.641l-14 14-14-14z"/></symbol><symbol viewBox="-2.29 -2.29 36.57 36.57" id="gdoc_keyborad_arrow_left" xmlns="http://www.w3.org/2000/svg"><path d="M25.875 28.25L22.125 32 6.126 16.001 22.125.002l3.75 3.75-12.25 12.25z"/></symbol><symbol viewBox="-2.29 -2.29 36.57 36.57" id="gdoc_keyborad_arrow_right" xmlns="http://www.w3.org/2000/svg"><path d="M6.125 28.25L18.375 16 6.125 3.75 9.875 0l15.999 15.999L9.875 31.998z"/></symbol><symbol viewBox="-2.29 -2.29 36.57 36.57" id="gdoc_link" xmlns="http://www.w3.org/2000/svg"><path d="M24.037 7.963q3.305 0 5.634 2.366T32 16t-2.329 5.671-5.634 2.366h-6.46v-3.08h6.46q2.028 0 3.493-1.465t1.465-3.493-1.465-3.493-3.493-1.465h-6.46v-3.08h6.46zM9.615 17.578v-3.155h12.77v3.155H9.615zM3.005 16q0 2.028 1.465 3.493t3.493 1.465h6.46v3.08h-6.46q-3.305 0-5.634-2.366T0 16.001t2.329-5.671 5.634-2.366h6.46v3.08h-6.46q-2.028 0-3.493 1.465t-1.465 3.493z"/></symbol><symbol viewBox="-2.29 -2.29 36.57 36.57" id="gdoc_menu" xmlns="http://www.w3.org/2000/svg"><path d="M.001 5.334h31.998v3.583H.001V5.334zm0 12.416v-3.5h31.998v3.5H.001zm0 8.916v-3.583h31.998v3.583H.001z"/></symbol><symbol viewBox="-2.29 -2.29 32.57 32.57" id="gdoc_notification" xmlns="http://www.w3.org/2000/svg"><path d="M22.615 19.384l2.894 2.894v1.413H2.49v-1.413l2.894-2.894V12.25q0-3.365 1.716-5.856t4.745-3.231v-1.01q0-.875.606-1.514T13.999 0t1.548.639.606 1.514v1.01q3.029.74 4.745 3.231t1.716 5.856v7.134zM14 27.999q-1.211 0-2.053-.808t-.841-2.019h5.788q0 1.144-.875 1.986T14 27.999z"/></symbol><symbol viewBox="-2.29 -2.29 32.57 32.57" id="gdoc_path" xmlns="http://www.w3.org/2000/svg"><path d="M28 12.62h-9.793V8.414h-2.826v11.173h2.826v-4.206H28V26.62h-9.793v-4.206H12.62v-14H9.794v4.206H.001V1.381h9.793v4.206h8.413V1.381H28V12.62z"/></symbol><symbol viewBox="-2.29 -2.29 36.57 36.57" id="gdoc_person" xmlns="http://www.w3.org/2000/svg"><path d="M16 20.023q5.052 0 10.526 2.199t5.473 5.754v4.023H0v-4.023q0-3.555 5.473-5.754t10.526-2.199zM16 16q-3.275 0-5.614-2.339T8.047 8.047t2.339-5.661T16 0t5.614 2.386 2.339 5.661-2.339 5.614T16 16z"/></symbol><symbol viewBox="-2.29 -2.29 36.57 36.57" id="gdoc_search" xmlns="http://www.w3.org/2000/svg"><path d="M11.925 20.161q3.432 0 5.834-2.402t2.402-5.834-2.402-5.834-5.834-2.402-5.834 2.402-2.402 5.834 2.402 5.834 5.834 2.402zm10.981 0L32 29.255 29.255 32l-9.094-9.094v-1.458l-.515-.515q-3.26 2.831-7.721 2.831-4.976 0-8.45-3.432T.001 11.925t3.474-8.45 8.45-3.474 8.407 3.474 3.432 8.45q0 1.802-.858 4.075t-1.973 3.646l.515.515h1.458z"/></symbol><symbol viewBox="-2.29 -2.29 32.57 32.57" id="gdoc_shield" xmlns="http://www.w3.org/2000/svg"><path d="M22.167 15.166V3.5h-8.166v20.726c.93-.492 2.424-1.349 3.883-2.497 1.95-1.531 4.284-3.919 4.284-6.562zm3.499-13.999v14c0 7.674-10.737 12.523-11.192 12.724-.146.073-.31.109-.474.109s-.328-.036-.474-.109c-.456-.201-11.192-5.049-11.192-12.724v-14C2.334.529 2.863 0 3.501 0H24.5c.638 0 1.167.529 1.167 1.167z"/></symbol><symbol viewBox="-2.29 -2.29 32.57 32.57" id="gdoc_tags" xmlns="http://www.w3.org/2000/svg"><path d="M6.606 7.549c0-1.047-.84-1.887-1.887-1.887s-1.887.84-1.887 1.887.84 1.887 1.887 1.887 1.887-.84 1.887-1.887zm15.732 8.493c0 .501-.206.988-.546 1.327l-7.239 7.254c-.354.339-.84.546-1.342.546s-.988-.206-1.327-.546L1.342 14.066C.59 13.329 0 11.899 0 10.852V4.718a1.9 1.9 0 011.887-1.887h6.134c1.047 0 2.477.59 3.229 1.342L21.792 14.7c.339.354.546.84.546 1.342zm5.661 0c0 .501-.206.988-.546 1.327l-7.239 7.254c-.354.339-.84.546-1.342.546-.767 0-1.15-.354-1.651-.87l6.93-6.93c.339-.339.546-.826.546-1.327s-.206-.988-.546-1.342L13.609 4.173c-.752-.752-2.182-1.342-3.229-1.342h3.303c1.047 0 2.477.59 3.229 1.342L27.454 14.7c.339.354.546.84.546 1.342z"/></symbol></svg>



    <div class="wrapper ">
        <input type="checkbox" class="hidden" id="menu-control" />
        
        <header class="gdoc-header">
    <div class="container flex align-center justify-between">
        
        <label for="menu-control" class="gdoc-nav__control">
            <svg class="icon gdoc_menu"><use xlink:href="#gdoc_menu"></use></svg>
            <svg class="icon gdoc_arrow_back"><use xlink:href="#gdoc_arrow_back"></use></svg>
        </label>
        
        <a class="gdoc-header__link" href="https://hongmao.run/jdk8-src-note/">
            <span class="gdoc-brand flex align-center">
                <img class="gdoc-brand__img" src="/jdk8-src-note/brand.svg" alt="">
                JDK8源码阅读笔记
            </span>
        </a>
        <span id="gdoc-dark-mode">
            <svg class="icon gdoc_brightness_dark"><use xlink:href="#gdoc_brightness_dark"></use></svg>
            <svg class="icon gdoc_brightness_light"><use xlink:href="#gdoc_brightness_light"></use></svg>
            <svg class="icon gdoc_brightness_auto"><use xlink:href="#gdoc_brightness_auto"></use></svg>
        </span>
    </div>
</header>


        <main class="container flex flex-even">
            
            <aside class="gdoc-nav">
                <nav>
    
    <div class="gdoc-search">
        <svg class="icon gdoc_search"><use xlink:href="#gdoc_search"></use></svg>
        <input type="text" id="gdoc-search-input" class="gdoc-search__input" placeholder="Search..."
            aria-label="Search" maxlength="64" />
        <div class="gdoc-search__spinner spinner hidden"></div>
        <ul id="gdoc-search-results" class="gdoc-search__list"></ul>
    </div>



    <section class="gdoc-nav--main">
        <h2>Navigation</h2>
        
            




<ul class="gdoc-nav__list">

    
    

    <li>
        
        
            
            
            
            
            
            
            
            
            

            
            <span class="flex">
                <svg class="icon package"><use xlink:href="#package"></use></svg>
                <a href="/jdk8-src-note/java/"
                    class="gdoc-nav__entry ">
                    java
                </a>
            </span>
            
        

        
            



<ul class="gdoc-nav__list">

    
    

    <li>
        
        
            
            
            
            
            
            
            
            
            

            
            <span class="flex">
                <svg class="icon package"><use xlink:href="#package"></use></svg>
                <a href="/jdk8-src-note/java/util/"
                    class="gdoc-nav__entry ">
                    util
                </a>
            </span>
            
        

        
            



<ul class="gdoc-nav__list">

    
    

    <li>
        
        
            
            
            
            
            
            
            
            
            

            
            <span class="flex">
                <svg class="icon abstractClass"><use xlink:href="#abstractClass"></use></svg>
                <a href="/jdk8-src-note/java/util/AbstractCollection/"
                    class="gdoc-nav__entry ">
                    AbstractCollection
                </a>
            </span>
            
        

        
    </li>


    
    

    <li>
        
        
            
            
            
            
            
            
            
            
            

            
            <span class="flex">
                <svg class="icon abstractClass"><use xlink:href="#abstractClass"></use></svg>
                <a href="/jdk8-src-note/java/util/AbstractList/"
                    class="gdoc-nav__entry is-active">
                    AbstractList
                </a>
            </span>
            
        

        
    </li>


    
    

    <li>
        
        
            
            
            
            
            
            
            
            
            

            
            <span class="flex">
                <svg class="icon abstractClass"><use xlink:href="#abstractClass"></use></svg>
                <a href="/jdk8-src-note/java/util/AbstractSequentialList/"
                    class="gdoc-nav__entry ">
                    AbstractSequentialList
                </a>
            </span>
            
        

        
    </li>


    
    

    <li>
        
        
            
            
            
            
            
            
            
            
            

            
            <span class="flex">
                <svg class="icon class"><use xlink:href="#class"></use></svg>
                <a href="/jdk8-src-note/java/util/ArrayList/"
                    class="gdoc-nav__entry ">
                    ArrayList
                </a>
            </span>
            
        

        
    </li>


    
    

    <li>
        
        
            
            
            
            
            
            
            
            
            

            
            <span class="flex">
                <svg class="icon interface"><use xlink:href="#interface"></use></svg>
                <a href="/jdk8-src-note/java/util/Collection/"
                    class="gdoc-nav__entry ">
                    Collection
                </a>
            </span>
            
        

        
    </li>


    
    

    <li>
        
        
            
            
            
            
            
            
            
            
            

            
            <span class="flex">
                <svg class="icon interface"><use xlink:href="#interface"></use></svg>
                <a href="/jdk8-src-note/java/util/Deque/"
                    class="gdoc-nav__entry ">
                    Deque
                </a>
            </span>
            
        

        
    </li>


    
    

    <li>
        
        
            
            
            
            
            
            
            
            
            

            
            <span class="flex">
                <svg class="icon interface"><use xlink:href="#interface"></use></svg>
                <a href="/jdk8-src-note/java/util/Iterator/"
                    class="gdoc-nav__entry ">
                    Iterator
                </a>
            </span>
            
        

        
    </li>


    
    

    <li>
        
        
            
            
            
            
            
            
            
            
            

            
            <span class="flex">
                <svg class="icon class"><use xlink:href="#class"></use></svg>
                <a href="/jdk8-src-note/java/util/LinkedList/"
                    class="gdoc-nav__entry ">
                    LinkedList
                </a>
            </span>
            
        

        
    </li>


    
    

    <li>
        
        
            
            
            
            
            
            
            
            
            

            
            <span class="flex">
                <svg class="icon interface"><use xlink:href="#interface"></use></svg>
                <a href="/jdk8-src-note/java/util/List/"
                    class="gdoc-nav__entry ">
                    List
                </a>
            </span>
            
        

        
    </li>


    
    

    <li>
        
        
            
            
            
            
            
            
            
            
            

            
            <span class="flex">
                <svg class="icon interface"><use xlink:href="#interface"></use></svg>
                <a href="/jdk8-src-note/java/util/ListIterator/"
                    class="gdoc-nav__entry ">
                    ListIterator
                </a>
            </span>
            
        

        
    </li>


    
    

    <li>
        
        
            
            
            
            
            
            
            
            
            

            
            <span class="flex">
                <svg class="icon interface"><use xlink:href="#interface"></use></svg>
                <a href="/jdk8-src-note/java/util/Queue/"
                    class="gdoc-nav__entry ">
                    Queue
                </a>
            </span>
            
        

        
    </li>


    
    

    <li>
        
        
            
            
            
            
            
            
            
            
            

            
            <span class="flex">
                <svg class="icon interface"><use xlink:href="#interface"></use></svg>
                <a href="/jdk8-src-note/java/util/RandomAccess/"
                    class="gdoc-nav__entry ">
                    RandomAccess
                </a>
            </span>
            
        

        
    </li>


    
    

    <li>
        
        
            
            
            
            
            
            
            
            
            

            
            <span class="flex">
                <svg class="icon class"><use xlink:href="#class"></use></svg>
                <a href="/jdk8-src-note/java/util/Vector/"
                    class="gdoc-nav__entry ">
                    Vector
                </a>
            </span>
            
        

        
    </li>


</ul>

        
    </li>


</ul>

        
    </li>


</ul>





        
    </section>

    <section class="gdoc-nav--more">
        
    </section>
</nav>

            </aside>
            

            <div class="gdoc-page">
                
    


    






<div class="gdoc-page__header flex flex-wrap
     justify-between 
     hidden-mobile 
    " itemprop="breadcrumb">
    
    <div>
        <svg class="icon gdoc_path hidden-mobile"><use xlink:href="#gdoc_path"></use></svg>
        <ol class="breadcrumb" itemscope itemtype="https://schema.org/BreadcrumbList">
            
            
            
            
    
    
        
        
        
        
    
    
        
        
        
        
    
    
        
        
        
        
    
    
        <li itemprop='itemListElement' itemscope itemtype='https://schema.org/ListItem'><a itemscope itemtype='https://schema.org/WebPage' itemprop='item' itemid='/jdk8-src-note/' href='/jdk8-src-note/'><span itemprop='name'>JDK8源码阅读笔记</span></a><meta itemprop='position' content='2' /></li><li> / </li><li itemprop='itemListElement' itemscope itemtype='https://schema.org/ListItem'><a itemscope itemtype='https://schema.org/WebPage' itemprop='item' itemid='/jdk8-src-note/java/' href='/jdk8-src-note/java/'><span itemprop='name'>java</span></a><meta itemprop='position' content='3' /></li><li> / </li><li itemprop='itemListElement' itemscope itemtype='https://schema.org/ListItem'><a itemscope itemtype='https://schema.org/WebPage' itemprop='item' itemid='/jdk8-src-note/java/util/' href='/jdk8-src-note/java/util/'><span itemprop='name'>util</span></a><meta itemprop='position' content='4' /></li><li> / </li><li itemprop='itemListElement' itemscope itemtype='https://schema.org/ListItem'><span itemprop='name'>AbstractList</span><meta itemprop='position' content='5' /></li>
    

    

    

    

        </ol>
    </div>
    
    
</div>


    <article class="gdoc-markdown gdoc-markdown__align--left">
        <h1>AbstractList</h1>
        <hr>



  <div class="gdoc-toc gdoc-toc__level--6"><nav id="TableOfContents">
  <ul>
    <li><a href="#1-protected-abstractlist">1. protected AbstractList()</a></li>
    <li><a href="#2-public-boolean-adde-e">2. public boolean add(E e)</a></li>
    <li><a href="#3-abstract-public-e-getint-index">3. abstract public E get(int index);</a></li>
    <li><a href="#4-public-e-setint-index-e-element">4. public E set(int index, E element)</a></li>
    <li><a href="#5-public-void-addint-index-e-element">5. public void add(int index, E element)</a></li>
    <li><a href="#6-public-e-removeint-index">6. public E remove(int index)</a></li>
    <li><a href="#7-public-int-indexofobject-o">7. public int indexOf(Object o)</a></li>
    <li><a href="#8-public-int-lastindexofobject-o">8. public int lastIndexOf(Object o)</a></li>
    <li><a href="#9-public-void-clear">9. public void clear()</a></li>
    <li><a href="#10-public-boolean-addallint-index-collection-extends-e-c">10. public boolean addAll(int index, Collection&lt;? extends E&gt; c)</a></li>
    <li><a href="#11-public-iteratorlte-iterator">11. public Iterator&lt;E&gt; iterator()</a></li>
    <li><a href="#12-public-listiteratorlte-listiterator">12. public ListIterator&lt;E&gt; listIterator()</a></li>
    <li><a href="#13-public-listiteratorlte-listiteratorfinal-int-index">13. public ListIterator&lt;E&gt; listIterator(final int index)</a></li>
    <li><a href="#14-private-class-itr-implements-iteratorlte">14. private class Itr implements Iterator&lt;E&gt;</a>
      <ul>
        <li><a href="#141-int-cursor--0">14.1 int cursor = 0;</a></li>
        <li><a href="#142-int-lastret---1">14.2 int lastRet = -1;</a></li>
        <li><a href="#143-int-expectedmodcount--modcount">14.3 int expectedModCount = modCount;</a></li>
        <li><a href="#144-public-boolean-hasnext">14.4 public boolean hasNext()</a></li>
        <li><a href="#145-public-e-next">14.5 public E next()</a></li>
        <li><a href="#146-public-void-remove">14.6 public void remove()</a></li>
        <li><a href="#147-final-void-checkforcomodification">14.7 final void checkForComodification()</a></li>
      </ul>
    </li>
    <li><a href="#15-private-class-listitr-extends-itr-implements-listiteratorlte">15. private class ListItr extends Itr implements ListIterator&lt;E&gt;</a>
      <ul>
        <li><a href="#151-listitrint-index">15.1 ListItr(int index)</a></li>
        <li><a href="#152-public-boolean-hasprevious">15.2 public boolean hasPrevious()</a></li>
        <li><a href="#153-public-e-previous">15.3 public E previous()</a></li>
        <li><a href="#154-public-int-nextindex">15.4 public int nextIndex()</a></li>
        <li><a href="#155-public-int-previousindex">15.5 public int previousIndex()</a></li>
        <li><a href="#156-public-void-sete-e">15.6 public void set(E e)</a></li>
        <li><a href="#157-public-void-adde-e">15.7 public void add(E e)</a></li>
      </ul>
    </li>
    <li><a href="#16-public-listlte-sublistint-fromindex-int-toindex">16. public List&lt;E&gt; subList(int fromIndex, int toIndex)</a></li>
    <li><a href="#17-public-boolean-equalsobject-o">17. public boolean equals(Object o)</a></li>
    <li><a href="#18-public-int-hashcode">18. public int hashCode()</a></li>
    <li><a href="#19-protected-void-removerangeint-fromindex-int-toindex">19. protected void removeRange(int fromIndex, int toIndex)</a></li>
    <li><a href="#20-protected-transient-int-modcount--0">20. protected transient int modCount = 0;</a></li>
    <li><a href="#21-private-void-rangecheckforaddint-index">21. private void rangeCheckForAdd(int index)</a></li>
    <li><a href="#22-private-string-outofboundsmsgint-index">22. private String outOfBoundsMsg(int index)</a></li>
    <li><a href="#同一文件中的其他类">同一文件中的其他类</a>
      <ul>
        <li><a href="#1-class-sublistlte-extends-abstractlistlte">1. class SubList&lt;E&gt; extends AbstractList&lt;E&gt;</a>
          <ul>
            <li><a href="#11-private-final-abstractlistlte-l">1.1 private final AbstractList&lt;E&gt; l;</a></li>
            <li><a href="#12-private-final-int-offset">1.2 private final int offset;</a></li>
            <li><a href="#13-private-int-size">1.3 private int size;</a></li>
            <li><a href="#14-sublistabstractlistlte-list-int-fromindex-int-toindex">1.4 SubList(AbstractList&lt;E&gt; list, int fromIndex, int toIndex)</a></li>
            <li><a href="#15-public-e-setint-index-e-element">1.5 public E set(int index, E element)</a></li>
            <li><a href="#16-public-e-getint-index">1.6 public E get(int index)</a></li>
            <li><a href="#17-public-int-size">1.7 public int size()</a></li>
            <li><a href="#18-public-void-addint-index-e-element">1.8 public void add(int index, E element)</a></li>
            <li><a href="#19-public-e-removeint-index">1.9 public E remove(int index)</a></li>
            <li><a href="#110-protected-void-removerangeint-fromindex-int-toindex">1.10 protected void removeRange(int fromIndex, int toIndex)</a></li>
            <li><a href="#111-public-boolean-addallcollection-extends-e-c">1.11 public boolean addAll(Collection&lt;? extends E&gt; c)</a></li>
            <li><a href="#112-public-boolean-addallint-index-collection-extends-e-c">1.12 public boolean addAll(int index, Collection&lt;? extends E&gt; c)</a></li>
            <li><a href="#113-public-iteratorlte-iterator">1.13 public Iterator&lt;E&gt; iterator()</a></li>
            <li><a href="#114-public-listiteratorlte-listiteratorfinal-int-index">1.14 public ListIterator&lt;E&gt; listIterator(final int index)</a></li>
            <li><a href="#115-public-listlte-sublistint-fromindex-int-toindex">1.15 public List&lt;E&gt; subList(int fromIndex, int toIndex)</a></li>
            <li><a href="#116-private-void-rangecheckint-index">1.16 private void rangeCheck(int index)</a></li>
            <li><a href="#117-private-void-rangecheckforaddint-index">1.17 private void rangeCheckForAdd(int index)</a></li>
            <li><a href="#118-private-string-outofboundsmsgint-index">1.18 private String outOfBoundsMsg(int index)</a></li>
            <li><a href="#119-private-void-checkforcomodification">1.19 private void checkForComodification()</a></li>
          </ul>
        </li>
        <li><a href="#2-class-randomaccesssublistlte-extends-sublistlte-implements-randomaccess">2. class RandomAccessSubList&lt;E&gt; extends SubList&lt;E&gt; implements RandomAccess</a>
          <ul>
            <li><a href="#21-randomaccesssublistabstractlistlte-list-int-fromindex-int-toindex">2.1 RandomAccessSubList(AbstractList&lt;E&gt; list, int fromIndex, int toIndex)</a></li>
            <li><a href="#22-public-listlte-sublistint-fromindex-int-toindex">2.2 public List&lt;E&gt; subList(int fromIndex, int toIndex)</a></li>
          </ul>
        </li>
      </ul></nav><hr></div>



<div style='text-align: center'>
    <img src='https://img.hongmao.run/blog/2021/07/AbstractList.png' width='50%' alt=''>
</div>


<hr>
<p>此类提供<code>List</code>接口的基本实现，以最大程度地减少实现支持“随机访问”数据存储（例如数组）所需的工作。对于顺序访问数据（例如链表），应优先使用<code>AbstractSequentialList</code>类。</p>
<p>要实现不可修改的列表，编程者仅需扩展此类并为<code>get</code>和<code>List</code>的<code>size</code>方法提供实现。</p>
<p>要实现可修改的列表，编程者必须另外重写<code>set</code>方法（否则将抛出<code>UnsupportedOperationException</code>）。如果列表是可变大小的，则程序员必须另外重写<code>add</code>和<code>remove</code>方法。</p>
<p>根据<code>Collection</code>接口规范中的建议，编程者通常应提供一个void（无参数）的构造函数。</p>
<p>与其他抽象集合的实现不同，编程者不必提供迭代器实现。迭代器和列表迭代器由此类在“随机访问”方法之上实现：</p>
<p><code>get</code>、<code>set</code>、<code>add</code>、<code>remove</code>。</p>
<p>此类中每个非抽象方法的文档都详细描述了其实现。如果正在实现的集合允许更有效的实现，则可以覆盖这些方法中的每一个。</p>
<p>该类是Java集合框架的成员。</p>
<div class="gdoc-page__anchorwrap">
    <h1 id="1-protected-abstractlist">
        1. protected AbstractList()
        <a data-clipboard-text="https://hongmao.run/jdk8-src-note/java/util/AbstractList/#1-protected-abstractlist" class="gdoc-page__anchor gdoc-page__anchor--right clip" aria-label="Anchor 1. protected AbstractList()" href="#1-protected-abstractlist">
            <svg class="icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
        </a>
    </h1>
</div><p>唯一构造函数。 （用于子类构造函数的调用，通常是隐式的。）</p>
<p>源码如下：</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2"><code class="language-java" data-lang="java"><span style="color:#a90d91">protected</span> <span style="color:#000">AbstractList</span><span style="color:#000">()</span> <span style="color:#000">{</span>
<span style="color:#000">}</span>
</code></pre></div><div class="gdoc-page__anchorwrap">
    <h1 id="2-public-boolean-adde-e">
        2. public boolean add(E e)
        <a data-clipboard-text="https://hongmao.run/jdk8-src-note/java/util/AbstractList/#2-public-boolean-adde-e" class="gdoc-page__anchor gdoc-page__anchor--right clip" aria-label="Anchor 2. public boolean add(E e)" href="#2-public-boolean-adde-e">
            <svg class="icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
        </a>
    </h1>
</div><p>将指定的元素追加到此列表的末尾（可选操作）。</p>
<p>支持此操作的列表可能会限制哪些元素可以添加到此列表。特别是，某些列表将拒绝添加空元素，而另一些列表将对可能添加的元素类型施加限制。列表类应在其文档中明确指定对可以添加哪些元素的所有限制。</p>
<p>该方法的实现调用了<code>add(int index, E element)</code>方法，<code>add(int index, E element)</code>的默认实现是抛出<code>UnsupportedOperationException</code>，所以如果不重写它，那么调用当前方法也会抛出<code>UnsupportedOperationException</code>。</p>
<p>源码如下：</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2"><code class="language-java" data-lang="java"><span style="color:#a90d91">public</span> <span style="color:#a90d91">boolean</span> <span style="color:#000">add</span><span style="color:#000">(</span><span style="color:#000">E</span> <span style="color:#000">e</span><span style="color:#000">)</span> <span style="color:#000">{</span>
    <span style="color:#000">add</span><span style="color:#000">(</span><span style="color:#000">size</span><span style="color:#000">(),</span> <span style="color:#000">e</span><span style="color:#000">);</span>
    <span style="color:#a90d91">return</span> <span style="color:#a90d91">true</span><span style="color:#000">;</span>
<span style="color:#000">}</span>
</code></pre></div><div class="gdoc-page__anchorwrap">
    <h1 id="3-abstract-public-e-getint-index">
        3. abstract public E get(int index);
        <a data-clipboard-text="https://hongmao.run/jdk8-src-note/java/util/AbstractList/#3-abstract-public-e-getint-index" class="gdoc-page__anchor gdoc-page__anchor--right clip" aria-label="Anchor 3. abstract public E get(int index);" href="#3-abstract-public-e-getint-index">
            <svg class="icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
        </a>
    </h1>
</div><p>获取列表在指定索引位置的元素。</p>
<div class="gdoc-page__anchorwrap">
    <h1 id="4-public-e-setint-index-e-element">
        4. public E set(int index, E element)
        <a data-clipboard-text="https://hongmao.run/jdk8-src-note/java/util/AbstractList/#4-public-e-setint-index-e-element" class="gdoc-page__anchor gdoc-page__anchor--right clip" aria-label="Anchor 4. public E set(int index, E element)" href="#4-public-e-setint-index-e-element">
            <svg class="icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
        </a>
    </h1>
</div><p>在指定的索引位置设置指定的元素，默认实现是抛出<code>UnsupportedOperationException</code>。</p>
<p>源码如下：</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2"><code class="language-java" data-lang="java"><span style="color:#a90d91">public</span> <span style="color:#000">E</span> <span style="color:#000">set</span><span style="color:#000">(</span><span style="color:#a90d91">int</span> <span style="color:#000">index</span><span style="color:#000">,</span> <span style="color:#000">E</span> <span style="color:#000">element</span><span style="color:#000">)</span> <span style="color:#000">{</span>
    <span style="color:#a90d91">throw</span> <span style="color:#a90d91">new</span> <span style="color:#000">UnsupportedOperationException</span><span style="color:#000">();</span>
<span style="color:#000">}</span>
</code></pre></div><div class="gdoc-page__anchorwrap">
    <h1 id="5-public-void-addint-index-e-element">
        5. public void add(int index, E element)
        <a data-clipboard-text="https://hongmao.run/jdk8-src-note/java/util/AbstractList/#5-public-void-addint-index-e-element" class="gdoc-page__anchor gdoc-page__anchor--right clip" aria-label="Anchor 5. public void add(int index, E element)" href="#5-public-void-addint-index-e-element">
            <svg class="icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
        </a>
    </h1>
</div><p>在指定的索引位置添加指定的元素，默认实现是抛出<code>UnsupportedOperationException</code>。</p>
<p>源码如下：</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2"><code class="language-java" data-lang="java"><span style="color:#a90d91">public</span> <span style="color:#a90d91">void</span> <span style="color:#000">add</span><span style="color:#000">(</span><span style="color:#a90d91">int</span> <span style="color:#000">index</span><span style="color:#000">,</span> <span style="color:#000">E</span> <span style="color:#000">element</span><span style="color:#000">)</span> <span style="color:#000">{</span>
    <span style="color:#a90d91">throw</span> <span style="color:#a90d91">new</span> <span style="color:#000">UnsupportedOperationException</span><span style="color:#000">();</span>
<span style="color:#000">}</span>
</code></pre></div><div class="gdoc-page__anchorwrap">
    <h1 id="6-public-e-removeint-index">
        6. public E remove(int index)
        <a data-clipboard-text="https://hongmao.run/jdk8-src-note/java/util/AbstractList/#6-public-e-removeint-index" class="gdoc-page__anchor gdoc-page__anchor--right clip" aria-label="Anchor 6. public E remove(int index)" href="#6-public-e-removeint-index">
            <svg class="icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
        </a>
    </h1>
</div><p>删除指定索引位置的元素，默认实现是抛出<code>UnsupportedOperationException</code>。</p>
<p>源码如下：</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2"><code class="language-java" data-lang="java"><span style="color:#a90d91">public</span> <span style="color:#000">E</span> <span style="color:#000">remove</span><span style="color:#000">(</span><span style="color:#a90d91">int</span> <span style="color:#000">index</span><span style="color:#000">)</span> <span style="color:#000">{</span>
    <span style="color:#a90d91">throw</span> <span style="color:#a90d91">new</span> <span style="color:#000">UnsupportedOperationException</span><span style="color:#000">();</span>
<span style="color:#000">}</span>
</code></pre></div><div class="gdoc-page__anchorwrap">
    <h1 id="7-public-int-indexofobject-o">
        7. public int indexOf(Object o)
        <a data-clipboard-text="https://hongmao.run/jdk8-src-note/java/util/AbstractList/#7-public-int-indexofobject-o" class="gdoc-page__anchor gdoc-page__anchor--right clip" aria-label="Anchor 7. public int indexOf(Object o)" href="#7-public-int-indexofobject-o">
            <svg class="icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
        </a>
    </h1>
</div><p>此实现首先获取一个列表迭代器（通过<code>listIterator()</code>）。然后，在列表上进行迭代，直到找到指定的元素或到达列表的末尾。</p>
<p>此方法，在通过<code>listIterator()</code>方法获取到列表迭代器后，逐个遍历元素：</p>
<p>如果参数中给定的元素为<code>null</code>则判断<code>next</code>获得的元素是否为<code>null</code>，若是，则返回<code>previousIndex</code>。</p>
<p>如果参数中给定的元素不为<code>null</code>，则通过<code>equals</code>方法判断<code>next</code>获取的元素是否和参数中给定的元素相同，若相同则返回则返回<code>previousIndex</code>。</p>
<p>如果未能找到，则返回-1。</p>
<p>源码如下：</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2"><code class="language-java" data-lang="java"><span style="color:#a90d91">public</span> <span style="color:#a90d91">int</span> <span style="color:#000">indexOf</span><span style="color:#000">(</span><span style="color:#000">Object</span> <span style="color:#000">o</span><span style="color:#000">)</span> <span style="color:#000">{</span>
    <span style="color:#177500">// 此处获取的是列表迭代器
</span><span style="color:#177500"></span>    <span style="color:#000">ListIterator</span><span style="color:#000">&lt;</span><span style="color:#000">E</span><span style="color:#000">&gt;</span> <span style="color:#000">it</span> <span style="color:#000">=</span> <span style="color:#000">listIterator</span><span style="color:#000">();</span>
    <span style="color:#a90d91">if</span> <span style="color:#000">(</span><span style="color:#000">o</span><span style="color:#000">==</span><span style="color:#a90d91">null</span><span style="color:#000">)</span> <span style="color:#000">{</span>
        <span style="color:#a90d91">while</span> <span style="color:#000">(</span><span style="color:#000">it</span><span style="color:#000">.</span><span style="color:#836c28">hasNext</span><span style="color:#000">())</span>
            <span style="color:#177500">// 此处已调用过next方法，所以一旦命中，需要返回的是previousIndex()
</span><span style="color:#177500"></span>            <span style="color:#a90d91">if</span> <span style="color:#000">(</span><span style="color:#000">it</span><span style="color:#000">.</span><span style="color:#836c28">next</span><span style="color:#000">()==</span><span style="color:#a90d91">null</span><span style="color:#000">)</span>
                <span style="color:#a90d91">return</span> <span style="color:#000">it</span><span style="color:#000">.</span><span style="color:#836c28">previousIndex</span><span style="color:#000">();</span>
    <span style="color:#000">}</span> <span style="color:#a90d91">else</span> <span style="color:#000">{</span>
        <span style="color:#a90d91">while</span> <span style="color:#000">(</span><span style="color:#000">it</span><span style="color:#000">.</span><span style="color:#836c28">hasNext</span><span style="color:#000">())</span>
            <span style="color:#a90d91">if</span> <span style="color:#000">(</span><span style="color:#000">o</span><span style="color:#000">.</span><span style="color:#836c28">equals</span><span style="color:#000">(</span><span style="color:#000">it</span><span style="color:#000">.</span><span style="color:#836c28">next</span><span style="color:#000">()))</span>
                <span style="color:#a90d91">return</span> <span style="color:#000">it</span><span style="color:#000">.</span><span style="color:#836c28">previousIndex</span><span style="color:#000">();</span>
    <span style="color:#000">}</span>
    <span style="color:#a90d91">return</span> <span style="color:#000">-</span><span style="color:#000">1</span><span style="color:#000">;</span>
<span style="color:#000">}</span>
</code></pre></div><div class="gdoc-page__anchorwrap">
    <h1 id="8-public-int-lastindexofobject-o">
        8. public int lastIndexOf(Object o)
        <a data-clipboard-text="https://hongmao.run/jdk8-src-note/java/util/AbstractList/#8-public-int-lastindexofobject-o" class="gdoc-page__anchor gdoc-page__anchor--right clip" aria-label="Anchor 8. public int lastIndexOf(Object o)" href="#8-public-int-lastindexofobject-o">
            <svg class="icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
        </a>
    </h1>
</div><p>此实现首先获取一个指向列表末尾的列表迭代器（使用<code>listIterator(size())</code>）。然后，向后迭代列表，直到找到指定的元素，或者到达列表的开头。</p>
<p>寻找元素的方法和<code>indexOf</code>方法一致，区别在于，本方法是从后往前找，也就是找的是指定的元素在列表中最后一次出现的位置，没找到则返回-1。</p>
<p>源码如下：</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2"><code class="language-java" data-lang="java"><span style="color:#a90d91">public</span> <span style="color:#a90d91">int</span> <span style="color:#000">lastIndexOf</span><span style="color:#000">(</span><span style="color:#000">Object</span> <span style="color:#000">o</span><span style="color:#000">)</span> <span style="color:#000">{</span>
    <span style="color:#177500">// 获取一个从列表末尾开始的迭代器
</span><span style="color:#177500"></span>    <span style="color:#000">ListIterator</span><span style="color:#000">&lt;</span><span style="color:#000">E</span><span style="color:#000">&gt;</span> <span style="color:#000">it</span> <span style="color:#000">=</span> <span style="color:#000">listIterator</span><span style="color:#000">(</span><span style="color:#000">size</span><span style="color:#000">());</span>
    <span style="color:#a90d91">if</span> <span style="color:#000">(</span><span style="color:#000">o</span><span style="color:#000">==</span><span style="color:#a90d91">null</span><span style="color:#000">)</span> <span style="color:#000">{</span>
        <span style="color:#a90d91">while</span> <span style="color:#000">(</span><span style="color:#000">it</span><span style="color:#000">.</span><span style="color:#836c28">hasPrevious</span><span style="color:#000">())</span>
            <span style="color:#a90d91">if</span> <span style="color:#000">(</span><span style="color:#000">it</span><span style="color:#000">.</span><span style="color:#836c28">previous</span><span style="color:#000">()==</span><span style="color:#a90d91">null</span><span style="color:#000">)</span>
                <span style="color:#a90d91">return</span> <span style="color:#000">it</span><span style="color:#000">.</span><span style="color:#836c28">nextIndex</span><span style="color:#000">();</span>
    <span style="color:#000">}</span> <span style="color:#a90d91">else</span> <span style="color:#000">{</span>
        <span style="color:#a90d91">while</span> <span style="color:#000">(</span><span style="color:#000">it</span><span style="color:#000">.</span><span style="color:#836c28">hasPrevious</span><span style="color:#000">())</span>
            <span style="color:#a90d91">if</span> <span style="color:#000">(</span><span style="color:#000">o</span><span style="color:#000">.</span><span style="color:#836c28">equals</span><span style="color:#000">(</span><span style="color:#000">it</span><span style="color:#000">.</span><span style="color:#836c28">previous</span><span style="color:#000">()))</span>
                <span style="color:#a90d91">return</span> <span style="color:#000">it</span><span style="color:#000">.</span><span style="color:#836c28">nextIndex</span><span style="color:#000">();</span>
    <span style="color:#000">}</span>
    <span style="color:#a90d91">return</span> <span style="color:#000">-</span><span style="color:#000">1</span><span style="color:#000">;</span>
<span style="color:#000">}</span>
</code></pre></div><div class="gdoc-page__anchorwrap">
    <h1 id="9-public-void-clear">
        9. public void clear()
        <a data-clipboard-text="https://hongmao.run/jdk8-src-note/java/util/AbstractList/#9-public-void-clear" class="gdoc-page__anchor gdoc-page__anchor--right clip" aria-label="Anchor 9. public void clear()" href="#9-public-void-clear">
            <svg class="icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
        </a>
    </h1>
</div><p>从此列表中删除所有元素（可选操作）。此调用返回后，该列表将为空。</p>
<p>该实现将调用<code>removeRange(0, size())</code>。</p>
<p>请注意，如果未重写<code>remove(int index)</code>或<code>removeRange(int fromIndex, int toIndex)</code>，本方法将抛出<code>UnsupportedOperationException</code>。</p>
<p>源码如下：</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2"><code class="language-java" data-lang="java"><span style="color:#a90d91">public</span> <span style="color:#a90d91">void</span> <span style="color:#000">clear</span><span style="color:#000">()</span> <span style="color:#000">{</span>
    <span style="color:#000">removeRange</span><span style="color:#000">(</span><span style="color:#000">0</span><span style="color:#000">,</span> <span style="color:#000">size</span><span style="color:#000">());</span>
<span style="color:#000">}</span>
</code></pre></div><div class="gdoc-page__anchorwrap">
    <h1 id="10-public-boolean-addallint-index-collection-extends-e-c">
        10. public boolean addAll(int index, Collection&lt;? extends E&gt; c)
        <a data-clipboard-text="https://hongmao.run/jdk8-src-note/java/util/AbstractList/#10-public-boolean-addallint-index-collection-extends-e-c" class="gdoc-page__anchor gdoc-page__anchor--right clip" aria-label="Anchor 10. public boolean addAll(int index, Collection&lt;? extends E&gt; c)" href="#10-public-boolean-addallint-index-collection-extends-e-c">
            <svg class="icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
        </a>
    </h1>
</div><p>此实现在参数中指定的集合上获得一个迭代器并对其进行迭代，使用<code>add(int, E)</code>将从迭代器获得的元素插入到此列表的适当位置，一次插入一个。</p>
<p>为了提高效率，许多实现将覆盖此方法。</p>
<p>请注意，除非重写<code>add(int, Object)</code>和<code>add(int, E)</code>，否则此实现将抛出<code>UnsupportedOperationException</code>。</p>
<p>源码如下：</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2"><code class="language-java" data-lang="java"><span style="color:#a90d91">public</span> <span style="color:#a90d91">boolean</span> <span style="color:#000">addAll</span><span style="color:#000">(</span><span style="color:#a90d91">int</span> <span style="color:#000">index</span><span style="color:#000">,</span> <span style="color:#000">Collection</span><span style="color:#000">&lt;?</span> <span style="color:#a90d91">extends</span> <span style="color:#000">E</span><span style="color:#000">&gt;</span> <span style="color:#000">c</span><span style="color:#000">)</span> <span style="color:#000">{</span>
    <span style="color:#177500">// 判断指定的索引是否符合插入位置的范围限制
</span><span style="color:#177500"></span>    <span style="color:#000">rangeCheckForAdd</span><span style="color:#000">(</span><span style="color:#000">index</span><span style="color:#000">);</span>
    <span style="color:#a90d91">boolean</span> <span style="color:#000">modified</span> <span style="color:#000">=</span> <span style="color:#a90d91">false</span><span style="color:#000">;</span>
    <span style="color:#177500">// 调用遍历指定的集合c，将迭代到的每个元素放入当前集合
</span><span style="color:#177500"></span>    <span style="color:#a90d91">for</span> <span style="color:#000">(</span><span style="color:#000">E</span> <span style="color:#000">e</span> <span style="color:#000">:</span> <span style="color:#000">c</span><span style="color:#000">)</span> <span style="color:#000">{</span>
        <span style="color:#000">add</span><span style="color:#000">(</span><span style="color:#000">index</span><span style="color:#000">++,</span> <span style="color:#000">e</span><span style="color:#000">);</span>
        <span style="color:#000">modified</span> <span style="color:#000">=</span> <span style="color:#a90d91">true</span><span style="color:#000">;</span>
    <span style="color:#000">}</span>
    <span style="color:#a90d91">return</span> <span style="color:#000">modified</span><span style="color:#000">;</span>
<span style="color:#000">}</span>
</code></pre></div><div class="gdoc-page__anchorwrap">
    <h1 id="11-public-iteratorlte-iterator">
        11. public Iterator&lt;E&gt; iterator()
        <a data-clipboard-text="https://hongmao.run/jdk8-src-note/java/util/AbstractList/#11-public-iteratorlte-iterator" class="gdoc-page__anchor gdoc-page__anchor--right clip" aria-label="Anchor 11. public Iterator&lt;E&gt; iterator()" href="#11-public-iteratorlte-iterator">
            <svg class="icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
        </a>
    </h1>
</div><p>以正确的顺序返回在此列表元素上的迭代器。</p>
<p>此实现依赖于来源列表的<code>size()</code>，<code>get(int)</code>和<code>remove(int)</code>方法来返回迭代器接口的简单实现。</p>
<p>请注意，除非重写列表的<code>remove(int)</code>方法，否则此方法返回的迭代器将在调用其<code>remove</code>方法时抛出<code>UnsupportedOperationException</code>。</p>
<p>如规范中对<code>modCount</code>字段的描述，该实现在面对并发修改时抛出运行时异常。</p>
<p>源码如下：</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2"><code class="language-java" data-lang="java"><span style="color:#a90d91">public</span> <span style="color:#000">Iterator</span><span style="color:#000">&lt;</span><span style="color:#000">E</span><span style="color:#000">&gt;</span> <span style="color:#000">iterator</span><span style="color:#000">()</span> <span style="color:#000">{</span>
    <span style="color:#177500">// 返回一个Itr实例
</span><span style="color:#177500"></span>    <span style="color:#a90d91">return</span> <span style="color:#a90d91">new</span> <span style="color:#000">Itr</span><span style="color:#000">();</span>
<span style="color:#000">}</span>
</code></pre></div><div class="gdoc-page__anchorwrap">
    <h1 id="12-public-listiteratorlte-listiterator">
        12. public ListIterator&lt;E&gt; listIterator()
        <a data-clipboard-text="https://hongmao.run/jdk8-src-note/java/util/AbstractList/#12-public-listiteratorlte-listiterator" class="gdoc-page__anchor gdoc-page__anchor--right clip" aria-label="Anchor 12. public ListIterator&lt;E&gt; listIterator()" href="#12-public-listiteratorlte-listiterator">
            <svg class="icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
        </a>
    </h1>
</div><p>本方法将调用<code>listIterator(final int index)</code>方法，只不过传入的<code>index</code>为0。</p>
<p>源码如下：</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2"><code class="language-java" data-lang="java"><span style="color:#a90d91">public</span> <span style="color:#000">ListIterator</span><span style="color:#000">&lt;</span><span style="color:#000">E</span><span style="color:#000">&gt;</span> <span style="color:#000">listIterator</span><span style="color:#000">()</span> <span style="color:#000">{</span>
    <span style="color:#a90d91">return</span> <span style="color:#000">listIterator</span><span style="color:#000">(</span><span style="color:#000">0</span><span style="color:#000">);</span>
<span style="color:#000">}</span>
</code></pre></div><div class="gdoc-page__anchorwrap">
    <h1 id="13-public-listiteratorlte-listiteratorfinal-int-index">
        13. public ListIterator&lt;E&gt; listIterator(final int index)
        <a data-clipboard-text="https://hongmao.run/jdk8-src-note/java/util/AbstractList/#13-public-listiteratorlte-listiteratorfinal-int-index" class="gdoc-page__anchor gdoc-page__anchor--right clip" aria-label="Anchor 13. public ListIterator&lt;E&gt; listIterator(final int index)" href="#13-public-listiteratorlte-listiteratorfinal-int-index">
            <svg class="icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
        </a>
    </h1>
</div><p>此实现返回<code>ListIterator</code>接口的直接实现，该接口继承了<code>iterator()</code>方法所返回的<code>Iterator</code>接口。<code>ListIterator</code>实现依赖于来源列表的<code>get(int)</code>，<code>set(int, E)</code>，<code>add(int, E)</code>和<code>remove(int)</code>方法。</p>
<p>请注意，此实现返回的列表迭代器在调用其<code>remove</code>，<code>set</code>和<code>add</code>方法时抛出<code>UnsupportedOperationException</code>，除非列表的<code>remove(int)</code>，<code>set(int, E)</code>和<code>add(int, E)</code>方法已被重写。</p>
<p>如规范中对<code>modCount</code>字段的描述，该实现在面对并发修改时抛出运行时异常。</p>
<p>源码如下：</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2"><code class="language-java" data-lang="java"><span style="color:#a90d91">public</span> <span style="color:#000">ListIterator</span><span style="color:#000">&lt;</span><span style="color:#000">E</span><span style="color:#000">&gt;</span> <span style="color:#000">listIterator</span><span style="color:#000">(</span><span style="color:#a90d91">final</span> <span style="color:#a90d91">int</span> <span style="color:#000">index</span><span style="color:#000">)</span> <span style="color:#000">{</span>
    <span style="color:#177500">// 判断index的大小是否符合范围限制
</span><span style="color:#177500"></span>    <span style="color:#000">rangeCheckForAdd</span><span style="color:#000">(</span><span style="color:#000">index</span><span style="color:#000">);</span>

    <span style="color:#177500">// 返回一个从index位置开始的ListItr实例
</span><span style="color:#177500"></span>    <span style="color:#a90d91">return</span> <span style="color:#a90d91">new</span> <span style="color:#000">ListItr</span><span style="color:#000">(</span><span style="color:#000">index</span><span style="color:#000">);</span>
<span style="color:#000">}</span>
</code></pre></div><div class="gdoc-page__anchorwrap">
    <h1 id="14-private-class-itr-implements-iteratorlte">
        14. private class Itr implements Iterator&lt;E&gt;
        <a data-clipboard-text="https://hongmao.run/jdk8-src-note/java/util/AbstractList/#14-private-class-itr-implements-iteratorlte" class="gdoc-page__anchor gdoc-page__anchor--right clip" aria-label="Anchor 14. private class Itr implements Iterator&lt;E&gt;" href="#14-private-class-itr-implements-iteratorlte">
            <svg class="icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
        </a>
    </h1>
</div><div class="gdoc-page__anchorwrap">
    <h2 id="141-int-cursor--0">
        14.1 int cursor = 0;
        <a data-clipboard-text="https://hongmao.run/jdk8-src-note/java/util/AbstractList/#141-int-cursor--0" class="gdoc-page__anchor gdoc-page__anchor--right clip" aria-label="Anchor 14.1 int cursor = 0;" href="#141-int-cursor--0">
            <svg class="icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
        </a>
    </h2>
</div><p>迭代器在遍历列表时，游标所在位置。也即后续调用<code>next</code>所返回元素的索引。</p>
<div class="gdoc-page__anchorwrap">
    <h2 id="142-int-lastret---1">
        14.2 int lastRet = -1;
        <a data-clipboard-text="https://hongmao.run/jdk8-src-note/java/util/AbstractList/#142-int-lastret---1" class="gdoc-page__anchor gdoc-page__anchor--right clip" aria-label="Anchor 14.2 int lastRet = -1;" href="#142-int-lastret---1">
            <svg class="icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
        </a>
    </h2>
</div><p>最近一次调用<code>next</code>或<code>previous</code>返回的元素的索引。如果通过调用<code>remove</code>删除了此元素，则重置为-1。</p>
<div class="gdoc-page__anchorwrap">
    <h2 id="143-int-expectedmodcount--modcount">
        14.3 int expectedModCount = modCount;
        <a data-clipboard-text="https://hongmao.run/jdk8-src-note/java/util/AbstractList/#143-int-expectedmodcount--modcount" class="gdoc-page__anchor gdoc-page__anchor--right clip" aria-label="Anchor 14.3 int expectedModCount = modCount;" href="#143-int-expectedmodcount--modcount">
            <svg class="icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
        </a>
    </h2>
</div><p>迭代器认为来源列表应该具有的<code>modCount</code>值。如果违反了此期望，则说明迭代器已检测到并发修改。</p>
<div class="gdoc-page__anchorwrap">
    <h2 id="144-public-boolean-hasnext">
        14.4 public boolean hasNext()
        <a data-clipboard-text="https://hongmao.run/jdk8-src-note/java/util/AbstractList/#144-public-boolean-hasnext" class="gdoc-page__anchor gdoc-page__anchor--right clip" aria-label="Anchor 14.4 public boolean hasNext()" href="#144-public-boolean-hasnext">
            <svg class="icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
        </a>
    </h2>
</div><p>判断是否还有其他元素，如果调用<code>next</code>还能获取到元素，则该方法应返回<code>true</code>。</p>
<p>源码如下：</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2"><code class="language-java" data-lang="java"><span style="color:#a90d91">public</span> <span style="color:#a90d91">boolean</span> <span style="color:#000">hasNext</span><span style="color:#000">()</span> <span style="color:#000">{</span>
    <span style="color:#177500">// 判断当前游标cursor是否与列表的元素数量相等
</span><span style="color:#177500"></span>    <span style="color:#a90d91">return</span> <span style="color:#000">cursor</span> <span style="color:#000">!=</span> <span style="color:#000">size</span><span style="color:#000">();</span>
<span style="color:#000">}</span>
</code></pre></div><div class="gdoc-page__anchorwrap">
    <h2 id="145-public-e-next">
        14.5 public E next()
        <a data-clipboard-text="https://hongmao.run/jdk8-src-note/java/util/AbstractList/#145-public-e-next" class="gdoc-page__anchor gdoc-page__anchor--right clip" aria-label="Anchor 14.5 public E next()" href="#145-public-e-next">
            <svg class="icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
        </a>
    </h2>
</div><p>获取下一个元素。</p>
<p>源码如下：</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2"><code class="language-java" data-lang="java"><span style="color:#a90d91">public</span> <span style="color:#000">E</span> <span style="color:#000">next</span><span style="color:#000">()</span> <span style="color:#000">{</span>
    <span style="color:#177500">// 检查是否存在并发修改
</span><span style="color:#177500"></span>    <span style="color:#000">checkForComodification</span><span style="color:#000">();</span>
    <span style="color:#a90d91">try</span> <span style="color:#000">{</span>
        <span style="color:#177500">// 将当前游标位置赋值给变量i
</span><span style="color:#177500"></span>        <span style="color:#a90d91">int</span> <span style="color:#000">i</span> <span style="color:#000">=</span> <span style="color:#000">cursor</span><span style="color:#000">;</span>
        <span style="color:#177500">// 取出当前游标位置的元素，作为next
</span><span style="color:#177500"></span>        <span style="color:#000">E</span> <span style="color:#000">next</span> <span style="color:#000">=</span> <span style="color:#000">get</span><span style="color:#000">(</span><span style="color:#000">i</span><span style="color:#000">);</span>
        <span style="color:#177500">// 设置最近返回的元素索引为i
</span><span style="color:#177500"></span>        <span style="color:#000">lastRet</span> <span style="color:#000">=</span> <span style="color:#000">i</span><span style="color:#000">;</span>
        <span style="color:#177500">// 游标后移一位，即在当前值基础上加1
</span><span style="color:#177500"></span>        <span style="color:#000">cursor</span> <span style="color:#000">=</span> <span style="color:#000">i</span> <span style="color:#000">+</span> <span style="color:#000">1</span><span style="color:#000">;</span>
        <span style="color:#177500">// 返回之前取出的游标位置的元素
</span><span style="color:#177500"></span>        <span style="color:#a90d91">return</span> <span style="color:#000">next</span><span style="color:#000">;</span>
    <span style="color:#000">}</span> <span style="color:#a90d91">catch</span> <span style="color:#000">(</span><span style="color:#000">IndexOutOfBoundsException</span> <span style="color:#000">e</span><span style="color:#000">)</span> <span style="color:#000">{</span>
        <span style="color:#177500">// 遇到数组下标越界异常，先检查是否存在并发修改，如不存在，则抛出无此元素异常
</span><span style="color:#177500"></span>        <span style="color:#000">checkForComodification</span><span style="color:#000">();</span>
        <span style="color:#a90d91">throw</span> <span style="color:#a90d91">new</span> <span style="color:#000">NoSuchElementException</span><span style="color:#000">();</span>
    <span style="color:#000">}</span>
<span style="color:#000">}</span>
</code></pre></div><div class="gdoc-page__anchorwrap">
    <h2 id="146-public-void-remove">
        14.6 public void remove()
        <a data-clipboard-text="https://hongmao.run/jdk8-src-note/java/util/AbstractList/#146-public-void-remove" class="gdoc-page__anchor gdoc-page__anchor--right clip" aria-label="Anchor 14.6 public void remove()" href="#146-public-void-remove">
            <svg class="icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
        </a>
    </h2>
</div><p>删除当前元素。</p>
<p>源码如下：</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2"><code class="language-java" data-lang="java"><span style="color:#a90d91">public</span> <span style="color:#a90d91">void</span> <span style="color:#000">remove</span><span style="color:#000">()</span> <span style="color:#000">{</span>
    <span style="color:#177500">// 如果lastRet小于0，则抛出IllegalStateException
</span><span style="color:#177500"></span>    <span style="color:#177500">// 这说明要么迭代器初始化好之后还没有调用过next或previous、要么当前元素已被删除了
</span><span style="color:#177500"></span>    <span style="color:#a90d91">if</span> <span style="color:#000">(</span><span style="color:#000">lastRet</span> <span style="color:#000">&lt;</span> <span style="color:#000">0</span><span style="color:#000">)</span>
        <span style="color:#a90d91">throw</span> <span style="color:#a90d91">new</span> <span style="color:#000">IllegalStateException</span><span style="color:#000">();</span>
    <span style="color:#000">checkForComodification</span><span style="color:#000">();</span>

    <span style="color:#a90d91">try</span> <span style="color:#000">{</span>
        <span style="color:#177500">// 调用列表的remove方法删除lastRet索引位置的元素
</span><span style="color:#177500"></span>        <span style="color:#000">AbstractList</span><span style="color:#000">.</span><span style="color:#836c28">this</span><span style="color:#000">.</span><span style="color:#836c28">remove</span><span style="color:#000">(</span><span style="color:#000">lastRet</span><span style="color:#000">);</span>
        <span style="color:#177500">// 如果lastRet小于游标，则需将游标位置前移1位
</span><span style="color:#177500"></span>        <span style="color:#a90d91">if</span> <span style="color:#000">(</span><span style="color:#000">lastRet</span> <span style="color:#000">&lt;</span> <span style="color:#000">cursor</span><span style="color:#000">)</span>
            <span style="color:#000">cursor</span><span style="color:#000">--;</span>
        <span style="color:#177500">// 将lastRet置为-1
</span><span style="color:#177500"></span>        <span style="color:#000">lastRet</span> <span style="color:#000">=</span> <span style="color:#000">-</span><span style="color:#000">1</span><span style="color:#000">;</span>
        <span style="color:#000">expectedModCount</span> <span style="color:#000">=</span> <span style="color:#000">modCount</span><span style="color:#000">;</span>
    <span style="color:#000">}</span> <span style="color:#a90d91">catch</span> <span style="color:#000">(</span><span style="color:#000">IndexOutOfBoundsException</span> <span style="color:#000">e</span><span style="color:#000">)</span> <span style="color:#000">{</span>
        <span style="color:#177500">// 捕获到IndexOutOfBoundsException则说明存在并发修改，抛出ConcurrentModificationException
</span><span style="color:#177500"></span>        <span style="color:#a90d91">throw</span> <span style="color:#a90d91">new</span> <span style="color:#000">ConcurrentModificationException</span><span style="color:#000">();</span>
    <span style="color:#000">}</span>
<span style="color:#000">}</span>
</code></pre></div><div class="gdoc-page__anchorwrap">
    <h2 id="147-final-void-checkforcomodification">
        14.7 final void checkForComodification()
        <a data-clipboard-text="https://hongmao.run/jdk8-src-note/java/util/AbstractList/#147-final-void-checkforcomodification" class="gdoc-page__anchor gdoc-page__anchor--right clip" aria-label="Anchor 14.7 final void checkForComodification()" href="#147-final-void-checkforcomodification">
            <svg class="icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
        </a>
    </h2>
</div><p>该方法旨在检查是否存在并发修改，判断方法即判断<code>expectedModCount</code>是否等于<code>modCount</code>，不等于则说明存在并发修改，则抛出<code>ConcurrentModificationException</code>。</p>
<p>源码如下：</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2"><code class="language-java" data-lang="java"><span style="color:#a90d91">final</span> <span style="color:#a90d91">void</span> <span style="color:#000">checkForComodification</span><span style="color:#000">()</span> <span style="color:#000">{</span>
    <span style="color:#a90d91">if</span> <span style="color:#000">(</span><span style="color:#000">modCount</span> <span style="color:#000">!=</span> <span style="color:#000">expectedModCount</span><span style="color:#000">)</span>
        <span style="color:#a90d91">throw</span> <span style="color:#a90d91">new</span> <span style="color:#000">ConcurrentModificationException</span><span style="color:#000">();</span>
<span style="color:#000">}</span>
</code></pre></div><div class="gdoc-page__anchorwrap">
    <h1 id="15-private-class-listitr-extends-itr-implements-listiteratorlte">
        15. private class ListItr extends Itr implements ListIterator&lt;E&gt;
        <a data-clipboard-text="https://hongmao.run/jdk8-src-note/java/util/AbstractList/#15-private-class-listitr-extends-itr-implements-listiteratorlte" class="gdoc-page__anchor gdoc-page__anchor--right clip" aria-label="Anchor 15. private class ListItr extends Itr implements ListIterator&lt;E&gt;" href="#15-private-class-listitr-extends-itr-implements-listiteratorlte">
            <svg class="icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
        </a>
    </h1>
</div><div class="gdoc-page__anchorwrap">
    <h2 id="151-listitrint-index">
        15.1 ListItr(int index)
        <a data-clipboard-text="https://hongmao.run/jdk8-src-note/java/util/AbstractList/#151-listitrint-index" class="gdoc-page__anchor gdoc-page__anchor--right clip" aria-label="Anchor 15.1 ListItr(int index)" href="#151-listitrint-index">
            <svg class="icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
        </a>
    </h2>
</div><p>构造一个列表迭代器，使用给定的参数<code>index</code>作为当前列表迭代器的游标位置。</p>
<p>源码如下：</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2"><code class="language-java" data-lang="java"><span style="color:#000">ListItr</span><span style="color:#000">(</span><span style="color:#a90d91">int</span> <span style="color:#000">index</span><span style="color:#000">)</span> <span style="color:#000">{</span>
    <span style="color:#000">cursor</span> <span style="color:#000">=</span> <span style="color:#000">index</span><span style="color:#000">;</span>
<span style="color:#000">}</span>
</code></pre></div><div class="gdoc-page__anchorwrap">
    <h2 id="152-public-boolean-hasprevious">
        15.2 public boolean hasPrevious()
        <a data-clipboard-text="https://hongmao.run/jdk8-src-note/java/util/AbstractList/#152-public-boolean-hasprevious" class="gdoc-page__anchor gdoc-page__anchor--right clip" aria-label="Anchor 15.2 public boolean hasPrevious()" href="#152-public-boolean-hasprevious">
            <svg class="icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
        </a>
    </h2>
</div><p>判断当前迭代器前面是否还有元素，判断方法是：当前的游标位置<code>cursor</code>是否为0，为0则说明前面已经没有元素了，此时返回<code>false</code>，否则返回<code>true</code>。</p>
<p>源码如下：</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2"><code class="language-java" data-lang="java"><span style="color:#a90d91">public</span> <span style="color:#a90d91">boolean</span> <span style="color:#000">hasPrevious</span><span style="color:#000">()</span> <span style="color:#000">{</span>
    <span style="color:#a90d91">return</span> <span style="color:#000">cursor</span> <span style="color:#000">!=</span> <span style="color:#000">0</span><span style="color:#000">;</span>
<span style="color:#000">}</span>
</code></pre></div><div class="gdoc-page__anchorwrap">
    <h2 id="153-public-e-previous">
        15.3 public E previous()
        <a data-clipboard-text="https://hongmao.run/jdk8-src-note/java/util/AbstractList/#153-public-e-previous" class="gdoc-page__anchor gdoc-page__anchor--right clip" aria-label="Anchor 15.3 public E previous()" href="#153-public-e-previous">
            <svg class="icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
        </a>
    </h2>
</div><p>获取上一个元素，获取方法为：</p>
<p>使用当前游标位置减1，算出上一个元素的位置，然后取出该位置的元素，同时设置<code>lastRet</code>和游标位置<code>cursor</code>为该位置，然后返回该元素。</p>
<p>源码如下：</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2"><code class="language-java" data-lang="java"><span style="color:#a90d91">public</span> <span style="color:#000">E</span> <span style="color:#000">previous</span><span style="color:#000">()</span> <span style="color:#000">{</span>
    <span style="color:#000">checkForComodification</span><span style="color:#000">();</span>
    <span style="color:#a90d91">try</span> <span style="color:#000">{</span>
        <span style="color:#177500">// 将当前游标的前一位赋值给变量i
</span><span style="color:#177500"></span>        <span style="color:#a90d91">int</span> <span style="color:#000">i</span> <span style="color:#000">=</span> <span style="color:#000">cursor</span> <span style="color:#000">-</span> <span style="color:#000">1</span><span style="color:#000">;</span>
        <span style="color:#177500">// 获取i位置的元素作为返回值
</span><span style="color:#177500"></span>        <span style="color:#000">E</span> <span style="color:#000">previous</span> <span style="color:#000">=</span> <span style="color:#000">get</span><span style="color:#000">(</span><span style="color:#000">i</span><span style="color:#000">);</span>
        <span style="color:#177500">// 将最近返回的索引位置和游标位置均置为i
</span><span style="color:#177500"></span>        <span style="color:#000">lastRet</span> <span style="color:#000">=</span> <span style="color:#000">cursor</span> <span style="color:#000">=</span> <span style="color:#000">i</span><span style="color:#000">;</span>
        <span style="color:#a90d91">return</span> <span style="color:#000">previous</span><span style="color:#000">;</span>
    <span style="color:#000">}</span> <span style="color:#a90d91">catch</span> <span style="color:#000">(</span><span style="color:#000">IndexOutOfBoundsException</span> <span style="color:#000">e</span><span style="color:#000">)</span> <span style="color:#000">{</span>
        <span style="color:#000">checkForComodification</span><span style="color:#000">();</span>
        <span style="color:#a90d91">throw</span> <span style="color:#a90d91">new</span> <span style="color:#000">NoSuchElementException</span><span style="color:#000">();</span>
    <span style="color:#000">}</span>
<span style="color:#000">}</span>
</code></pre></div><div class="gdoc-page__anchorwrap">
    <h2 id="154-public-int-nextindex">
        15.4 public int nextIndex()
        <a data-clipboard-text="https://hongmao.run/jdk8-src-note/java/util/AbstractList/#154-public-int-nextindex" class="gdoc-page__anchor gdoc-page__anchor--right clip" aria-label="Anchor 15.4 public int nextIndex()" href="#154-public-int-nextindex">
            <svg class="icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
        </a>
    </h2>
</div><p>获取下一个元素的索引，获取方法是：直接返回当前游标位置<code>cursor</code>。</p>
<p>源码如下：</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2"><code class="language-java" data-lang="java"><span style="color:#a90d91">public</span> <span style="color:#a90d91">int</span> <span style="color:#000">nextIndex</span><span style="color:#000">()</span> <span style="color:#000">{</span>
    <span style="color:#a90d91">return</span> <span style="color:#000">cursor</span><span style="color:#000">;</span>
<span style="color:#000">}</span>
</code></pre></div><div class="gdoc-page__anchorwrap">
    <h2 id="155-public-int-previousindex">
        15.5 public int previousIndex()
        <a data-clipboard-text="https://hongmao.run/jdk8-src-note/java/util/AbstractList/#155-public-int-previousindex" class="gdoc-page__anchor gdoc-page__anchor--right clip" aria-label="Anchor 15.5 public int previousIndex()" href="#155-public-int-previousindex">
            <svg class="icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
        </a>
    </h2>
</div><p>获取上一个元素的索引，获取方法是：返回当前游标位置<code>cursor</code>-1。</p>
<p>源码如下：</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2"><code class="language-java" data-lang="java"><span style="color:#a90d91">public</span> <span style="color:#a90d91">int</span> <span style="color:#000">previousIndex</span><span style="color:#000">()</span> <span style="color:#000">{</span>
    <span style="color:#a90d91">return</span> <span style="color:#000">cursor</span><span style="color:#000">-</span><span style="color:#000">1</span><span style="color:#000">;</span>
<span style="color:#000">}</span>
</code></pre></div><div class="gdoc-page__anchorwrap">
    <h2 id="156-public-void-sete-e">
        15.6 public void set(E e)
        <a data-clipboard-text="https://hongmao.run/jdk8-src-note/java/util/AbstractList/#156-public-void-sete-e" class="gdoc-page__anchor gdoc-page__anchor--right clip" aria-label="Anchor 15.6 public void set(E e)" href="#156-public-void-sete-e">
            <svg class="icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
        </a>
    </h2>
</div><p>设置当前位置（<code>lastRet</code>位置）的元素为参数中给定的元素，也即替换最后一次调用<code>next</code>或<code>previous</code>方法得到的元素。</p>
<p>首先，判断<code>lastRet</code>是否小于0，小于0说明其还未调用过<code>next</code>或<code>previous</code>或者调用过<code>remove</code>方法已将当前位置的元素删掉或使用<code>add</code>方法添加了元素，如果小于0，则抛出<code>IllegalStateException</code>。然后检查是否存在并发修改，调用<code>AbstractList</code>的<code>set</code>方法进行赋值。</p>
<p>源码如下：</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2"><code class="language-java" data-lang="java"><span style="color:#a90d91">public</span> <span style="color:#a90d91">void</span> <span style="color:#000">set</span><span style="color:#000">(</span><span style="color:#000">E</span> <span style="color:#000">e</span><span style="color:#000">)</span> <span style="color:#000">{</span>
    <span style="color:#177500">// lastRet小于0说明其还未调用过next或previous
</span><span style="color:#177500"></span>    <span style="color:#177500">// 或者调用过remove方法已将当前位置的元素删掉
</span><span style="color:#177500"></span>    <span style="color:#177500">// 或者使用add方法添加了元素
</span><span style="color:#177500"></span>    <span style="color:#a90d91">if</span> <span style="color:#000">(</span><span style="color:#000">lastRet</span> <span style="color:#000">&lt;</span> <span style="color:#000">0</span><span style="color:#000">)</span>
        <span style="color:#a90d91">throw</span> <span style="color:#a90d91">new</span> <span style="color:#000">IllegalStateException</span><span style="color:#000">();</span>
    <span style="color:#000">checkForComodification</span><span style="color:#000">();</span>

    <span style="color:#a90d91">try</span> <span style="color:#000">{</span>
        <span style="color:#177500">// 使用列表的set方法进行元素的替换
</span><span style="color:#177500"></span>        <span style="color:#000">AbstractList</span><span style="color:#000">.</span><span style="color:#836c28">this</span><span style="color:#000">.</span><span style="color:#836c28">set</span><span style="color:#000">(</span><span style="color:#000">lastRet</span><span style="color:#000">,</span> <span style="color:#000">e</span><span style="color:#000">);</span>
        <span style="color:#000">expectedModCount</span> <span style="color:#000">=</span> <span style="color:#000">modCount</span><span style="color:#000">;</span>
    <span style="color:#000">}</span> <span style="color:#a90d91">catch</span> <span style="color:#000">(</span><span style="color:#000">IndexOutOfBoundsException</span> <span style="color:#000">ex</span><span style="color:#000">)</span> <span style="color:#000">{</span>
        <span style="color:#a90d91">throw</span> <span style="color:#a90d91">new</span> <span style="color:#000">ConcurrentModificationException</span><span style="color:#000">();</span>
    <span style="color:#000">}</span>
<span style="color:#000">}</span>
</code></pre></div><div class="gdoc-page__anchorwrap">
    <h2 id="157-public-void-adde-e">
        15.7 public void add(E e)
        <a data-clipboard-text="https://hongmao.run/jdk8-src-note/java/util/AbstractList/#157-public-void-adde-e" class="gdoc-page__anchor gdoc-page__anchor--right clip" aria-label="Anchor 15.7 public void add(E e)" href="#157-public-void-adde-e">
            <svg class="icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
        </a>
    </h2>
</div><p>首先检查是否存在并发修改，然后在调用<code>AbstractList</code>的<code>add</code>方法在当前游标位置添加给定的元素。然后，将<code>lastRet</code>置为-1，同时将当前游标位置<code>cursor</code>加1。</p>
<p>源码如下：</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2"><code class="language-java" data-lang="java"><span style="color:#a90d91">public</span> <span style="color:#a90d91">void</span> <span style="color:#000">add</span><span style="color:#000">(</span><span style="color:#000">E</span> <span style="color:#000">e</span><span style="color:#000">)</span> <span style="color:#000">{</span>
    <span style="color:#000">checkForComodification</span><span style="color:#000">();</span>

    <span style="color:#a90d91">try</span> <span style="color:#000">{</span>
        <span style="color:#177500">// 将当前游标的值赋给变量i
</span><span style="color:#177500"></span>        <span style="color:#a90d91">int</span> <span style="color:#000">i</span> <span style="color:#000">=</span> <span style="color:#000">cursor</span><span style="color:#000">;</span>
        <span style="color:#177500">// 调用列表的add方法将指定的元素e插入到列表的i位置处
</span><span style="color:#177500"></span>        <span style="color:#000">AbstractList</span><span style="color:#000">.</span><span style="color:#836c28">this</span><span style="color:#000">.</span><span style="color:#836c28">add</span><span style="color:#000">(</span><span style="color:#000">i</span><span style="color:#000">,</span> <span style="color:#000">e</span><span style="color:#000">);</span>
        <span style="color:#177500">// 设定最近返回的索引位置为-1
</span><span style="color:#177500"></span>        <span style="color:#000">lastRet</span> <span style="color:#000">=</span> <span style="color:#000">-</span><span style="color:#000">1</span><span style="color:#000">;</span>
        <span style="color:#177500">// 设定当前游标位置加1
</span><span style="color:#177500"></span>        <span style="color:#000">cursor</span> <span style="color:#000">=</span> <span style="color:#000">i</span> <span style="color:#000">+</span> <span style="color:#000">1</span><span style="color:#000">;</span>
        <span style="color:#000">expectedModCount</span> <span style="color:#000">=</span> <span style="color:#000">modCount</span><span style="color:#000">;</span>
    <span style="color:#000">}</span> <span style="color:#a90d91">catch</span> <span style="color:#000">(</span><span style="color:#000">IndexOutOfBoundsException</span> <span style="color:#000">ex</span><span style="color:#000">)</span> <span style="color:#000">{</span>
        <span style="color:#a90d91">throw</span> <span style="color:#a90d91">new</span> <span style="color:#000">ConcurrentModificationException</span><span style="color:#000">();</span>
    <span style="color:#000">}</span>
<span style="color:#000">}</span>
</code></pre></div><div class="gdoc-page__anchorwrap">
    <h1 id="16-public-listlte-sublistint-fromindex-int-toindex">
        16. public List&lt;E&gt; subList(int fromIndex, int toIndex)
        <a data-clipboard-text="https://hongmao.run/jdk8-src-note/java/util/AbstractList/#16-public-listlte-sublistint-fromindex-int-toindex" class="gdoc-page__anchor gdoc-page__anchor--right clip" aria-label="Anchor 16. public List&lt;E&gt; subList(int fromIndex, int toIndex)" href="#16-public-listlte-sublistint-fromindex-int-toindex">
            <svg class="icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
        </a>
    </h1>
</div><p>此实现返回一个<code>AbstractList</code>的子类的列表。子类在私有字段中存储来源列表中子列表的偏移量、子列表的大小（可以在其生存期内更改）以及来源列表的预期<code>modCount</code>值。子类有两种变体，其中一种实现<code>RandomAccess</code>。如果此列表实现<code>RandomAccess</code>，则返回的列表将是实现<code>RandomAccess</code>的子类的实例。</p>
<p>子类的<code>set(int, E)</code>，<code>get(int)</code>，<code>add(int, E)</code>，<code>remove(int)</code>，<code>addAll(int, Collection)</code>和<code>removeRange(int, int)</code>方法都在对索引进行边界检查并调整了偏移量之后，委派给了抽象列表上的相应方法。 <code>addAll(Collection c)</code>方法仅返回<code>addAll(size, c)</code>。</p>
<p><code>listIterator(int)</code>方法在来源列表的列表迭代器上返回“包装对象”，该列表迭代器是使用来源列表上的相应方法创建的。<code>iterator</code>方法仅返回<code>listIterator()</code>，而<code>size</code>方法仅返回子类的<code>size</code>字段。</p>
<p>所有方法首先检查来源列表的实际<code>modCount</code>是否等于其期望值，如果不是，则抛出<code>ConcurrentModificationException</code>。</p>
<p>源码如下：</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2"><code class="language-java" data-lang="java"><span style="color:#a90d91">public</span> <span style="color:#000">List</span><span style="color:#000">&lt;</span><span style="color:#000">E</span><span style="color:#000">&gt;</span> <span style="color:#000">subList</span><span style="color:#000">(</span><span style="color:#a90d91">int</span> <span style="color:#000">fromIndex</span><span style="color:#000">,</span> <span style="color:#a90d91">int</span> <span style="color:#000">toIndex</span><span style="color:#000">)</span> <span style="color:#000">{</span>
    <span style="color:#177500">// 判断当前列表是否是RandomAccess的实例
</span><span style="color:#177500"></span>    <span style="color:#177500">// 若是，则返回一个RandomAccessSubList实例，否则返回SubList实例
</span><span style="color:#177500"></span>    <span style="color:#a90d91">return</span> <span style="color:#000">(</span><span style="color:#a90d91">this</span> <span style="color:#a90d91">instanceof</span> <span style="color:#000">RandomAccess</span> <span style="color:#000">?</span>
            <span style="color:#a90d91">new</span> <span style="color:#000">RandomAccessSubList</span><span style="color:#000">&lt;&gt;(</span><span style="color:#a90d91">this</span><span style="color:#000">,</span> <span style="color:#000">fromIndex</span><span style="color:#000">,</span> <span style="color:#000">toIndex</span><span style="color:#000">)</span> <span style="color:#000">:</span>
            <span style="color:#a90d91">new</span> <span style="color:#000">SubList</span><span style="color:#000">&lt;&gt;(</span><span style="color:#a90d91">this</span><span style="color:#000">,</span> <span style="color:#000">fromIndex</span><span style="color:#000">,</span> <span style="color:#000">toIndex</span><span style="color:#000">));</span>
<span style="color:#000">}</span>
</code></pre></div><div class="gdoc-page__anchorwrap">
    <h1 id="17-public-boolean-equalsobject-o">
        17. public boolean equals(Object o)
        <a data-clipboard-text="https://hongmao.run/jdk8-src-note/java/util/AbstractList/#17-public-boolean-equalsobject-o" class="gdoc-page__anchor gdoc-page__anchor--right clip" aria-label="Anchor 17. public boolean equals(Object o)" href="#17-public-boolean-equalsobject-o">
            <svg class="icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
        </a>
    </h1>
</div><p>比较指定对象与此列表是否相等。当且仅当指定对象也是一个列表，并且两个列表具有相同的大小，并且两个列表中所有对应的元素对都相等时，才返回<code>true</code>。 （如果<code>(e1==null ? e2==null : e1.equals(e2))</code>，则两个元素<code>e1</code>和<code>e2</code>是相等。）换句话说，如果两个列表包含相同顺序的相同元素，则定义为相等。</p>
<p>此实现首先检查指定的对象是否是此列表。如果是，则返回<code>true</code>，如果不是，则检查指定对象是否为列表。如果不是列表，则返回<code>false</code>，如果是列表，则遍历两个列表，比较对应的元素对。如果有任何比较返回<code>false</code>，则此方法返回<code>false</code>。如果一个迭代器在另一个迭代器之前用尽了元素，则返回<code>false</code>（因为列表的长度不相等），否则，当迭代完成时，它将返回<code>true</code>。</p>
<p>源码如下：</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2"><code class="language-java" data-lang="java"><span style="color:#a90d91">public</span> <span style="color:#a90d91">boolean</span> <span style="color:#000">equals</span><span style="color:#000">(</span><span style="color:#000">Object</span> <span style="color:#000">o</span><span style="color:#000">)</span> <span style="color:#000">{</span>
    <span style="color:#177500">// 指定对象等于当前列表则直接返回true
</span><span style="color:#177500"></span>    <span style="color:#a90d91">if</span> <span style="color:#000">(</span><span style="color:#000">o</span> <span style="color:#000">==</span> <span style="color:#a90d91">this</span><span style="color:#000">)</span>
        <span style="color:#a90d91">return</span> <span style="color:#a90d91">true</span><span style="color:#000">;</span>
    <span style="color:#177500">// 指定对象不是List接口的实例则直接返回false
</span><span style="color:#177500"></span>    <span style="color:#a90d91">if</span> <span style="color:#000">(!(</span><span style="color:#000">o</span> <span style="color:#a90d91">instanceof</span> <span style="color:#000">List</span><span style="color:#000">))</span>
        <span style="color:#a90d91">return</span> <span style="color:#a90d91">false</span><span style="color:#000">;</span>

    <span style="color:#000">ListIterator</span><span style="color:#000">&lt;</span><span style="color:#000">E</span><span style="color:#000">&gt;</span> <span style="color:#000">e1</span> <span style="color:#000">=</span> <span style="color:#000">listIterator</span><span style="color:#000">();</span>
    <span style="color:#000">ListIterator</span><span style="color:#000">&lt;?&gt;</span> <span style="color:#000">e2</span> <span style="color:#000">=</span> <span style="color:#000">((</span><span style="color:#000">List</span><span style="color:#000">&lt;?&gt;)</span> <span style="color:#000">o</span><span style="color:#000">).</span><span style="color:#836c28">listIterator</span><span style="color:#000">();</span>
    <span style="color:#177500">// 同时遍历两个列表
</span><span style="color:#177500"></span>    <span style="color:#a90d91">while</span> <span style="color:#000">(</span><span style="color:#000">e1</span><span style="color:#000">.</span><span style="color:#836c28">hasNext</span><span style="color:#000">()</span> <span style="color:#000">&amp;&amp;</span> <span style="color:#000">e2</span><span style="color:#000">.</span><span style="color:#836c28">hasNext</span><span style="color:#000">())</span> <span style="color:#000">{</span>
        <span style="color:#000">E</span> <span style="color:#000">o1</span> <span style="color:#000">=</span> <span style="color:#000">e1</span><span style="color:#000">.</span><span style="color:#836c28">next</span><span style="color:#000">();</span>
        <span style="color:#000">Object</span> <span style="color:#000">o2</span> <span style="color:#000">=</span> <span style="color:#000">e2</span><span style="color:#000">.</span><span style="color:#836c28">next</span><span style="color:#000">();</span>
        <span style="color:#177500">// 如果发现存在一个元素不匹配，则返回false
</span><span style="color:#177500"></span>        <span style="color:#a90d91">if</span> <span style="color:#000">(!(</span><span style="color:#000">o1</span><span style="color:#000">==</span><span style="color:#a90d91">null</span> <span style="color:#000">?</span> <span style="color:#000">o2</span><span style="color:#000">==</span><span style="color:#a90d91">null</span> <span style="color:#000">:</span> <span style="color:#000">o1</span><span style="color:#000">.</span><span style="color:#836c28">equals</span><span style="color:#000">(</span><span style="color:#000">o2</span><span style="color:#000">)))</span>
            <span style="color:#a90d91">return</span> <span style="color:#a90d91">false</span><span style="color:#000">;</span>
    <span style="color:#000">}</span>
    <span style="color:#177500">// 如果上面结束遍历，但仍有一个集合还有未迭代到的元素，则返回false
</span><span style="color:#177500"></span>    <span style="color:#a90d91">return</span> <span style="color:#000">!(</span><span style="color:#000">e1</span><span style="color:#000">.</span><span style="color:#836c28">hasNext</span><span style="color:#000">()</span> <span style="color:#000">||</span> <span style="color:#000">e2</span><span style="color:#000">.</span><span style="color:#836c28">hasNext</span><span style="color:#000">());</span>
<span style="color:#000">}</span>
</code></pre></div><div class="gdoc-page__anchorwrap">
    <h1 id="18-public-int-hashcode">
        18. public int hashCode()
        <a data-clipboard-text="https://hongmao.run/jdk8-src-note/java/util/AbstractList/#18-public-int-hashcode" class="gdoc-page__anchor gdoc-page__anchor--right clip" aria-label="Anchor 18. public int hashCode()" href="#18-public-int-hashcode">
            <svg class="icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
        </a>
    </h1>
</div><p>返回该列表的hash值。</p>
<p>此实现完全使用<code>List</code>中<code>hashCode</code>方法的文档中定义列表哈希函数的代码。</p>
<p>源码如下：</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2"><code class="language-java" data-lang="java"><span style="color:#a90d91">public</span> <span style="color:#a90d91">int</span> <span style="color:#000">hashCode</span><span style="color:#000">()</span> <span style="color:#000">{</span>
    <span style="color:#a90d91">int</span> <span style="color:#000">hashCode</span> <span style="color:#000">=</span> <span style="color:#000">1</span><span style="color:#000">;</span>
    <span style="color:#a90d91">for</span> <span style="color:#000">(</span><span style="color:#000">E</span> <span style="color:#000">e</span> <span style="color:#000">:</span> <span style="color:#a90d91">this</span><span style="color:#000">)</span>
        <span style="color:#000">hashCode</span> <span style="color:#000">=</span> <span style="color:#000">31</span><span style="color:#000">*</span><span style="color:#000">hashCode</span> <span style="color:#000">+</span> <span style="color:#000">(</span><span style="color:#000">e</span><span style="color:#000">==</span><span style="color:#a90d91">null</span> <span style="color:#000">?</span> <span style="color:#000">0</span> <span style="color:#000">:</span> <span style="color:#000">e</span><span style="color:#000">.</span><span style="color:#836c28">hashCode</span><span style="color:#000">());</span>
    <span style="color:#a90d91">return</span> <span style="color:#000">hashCode</span><span style="color:#000">;</span>
<span style="color:#000">}</span>
</code></pre></div><div class="gdoc-page__anchorwrap">
    <h1 id="19-protected-void-removerangeint-fromindex-int-toindex">
        19. protected void removeRange(int fromIndex, int toIndex)
        <a data-clipboard-text="https://hongmao.run/jdk8-src-note/java/util/AbstractList/#19-protected-void-removerangeint-fromindex-int-toindex" class="gdoc-page__anchor gdoc-page__anchor--right clip" aria-label="Anchor 19. protected void removeRange(int fromIndex, int toIndex)" href="#19-protected-void-removerangeint-fromindex-int-toindex">
            <svg class="icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
        </a>
    </h1>
</div><p>从此列表中删除所有索引在<code>fromIndex</code>和<code>toIndex</code>（不含）之间的所有元素。将所有后续元素向左移动（减少其索引）。此调用通过删除<code>toIndex-fromIndex</code>元素来缩短列表。 （如果<code>toIndex == fromIndex</code>，则此操作无效。）</p>
<p>此列表及其子列表上的<code>clear</code>操作调用此方法。重写此方法以利用列表实现的内部功能可以大大地改善此列表及其子列表上的<code>clear</code>操作的性能。</p>
<p>此实现获取位于<code>fromIndex</code>之前位置的列表迭代器，并反复调用<code>ListIterator.next</code>，然后依次调用<code>ListIterator.remove</code>，直到删除了整个范围的元素。 注意：如果<code>ListIterator.remove</code>需要线性时间，则此实现需要平方时间。</p>
<p>源码如下：</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2"><code class="language-java" data-lang="java"><span style="color:#a90d91">protected</span> <span style="color:#a90d91">void</span> <span style="color:#000">removeRange</span><span style="color:#000">(</span><span style="color:#a90d91">int</span> <span style="color:#000">fromIndex</span><span style="color:#000">,</span> <span style="color:#a90d91">int</span> <span style="color:#000">toIndex</span><span style="color:#000">)</span> <span style="color:#000">{</span>
    <span style="color:#177500">// 获取从fromIndex位置的列表迭代器
</span><span style="color:#177500"></span>    <span style="color:#000">ListIterator</span><span style="color:#000">&lt;</span><span style="color:#000">E</span><span style="color:#000">&gt;</span> <span style="color:#000">it</span> <span style="color:#000">=</span> <span style="color:#000">listIterator</span><span style="color:#000">(</span><span style="color:#000">fromIndex</span><span style="color:#000">);</span>
    <span style="color:#177500">// 使用toIndex - fromIndex计算出要删除元素的个数，然后遍历，逐个删除元素
</span><span style="color:#177500"></span>    <span style="color:#a90d91">for</span> <span style="color:#000">(</span><span style="color:#a90d91">int</span> <span style="color:#000">i</span><span style="color:#000">=</span><span style="color:#000">0</span><span style="color:#000">,</span> <span style="color:#000">n</span><span style="color:#000">=</span><span style="color:#000">toIndex</span><span style="color:#000">-</span><span style="color:#000">fromIndex</span><span style="color:#000">;</span> <span style="color:#000">i</span><span style="color:#000">&lt;</span><span style="color:#000">n</span><span style="color:#000">;</span> <span style="color:#000">i</span><span style="color:#000">++)</span> <span style="color:#000">{</span>
        <span style="color:#000">it</span><span style="color:#000">.</span><span style="color:#836c28">next</span><span style="color:#000">();</span>
        <span style="color:#000">it</span><span style="color:#000">.</span><span style="color:#836c28">remove</span><span style="color:#000">();</span>
    <span style="color:#000">}</span>
<span style="color:#000">}</span>
</code></pre></div><div class="gdoc-page__anchorwrap">
    <h1 id="20-protected-transient-int-modcount--0">
        20. protected transient int modCount = 0;
        <a data-clipboard-text="https://hongmao.run/jdk8-src-note/java/util/AbstractList/#20-protected-transient-int-modcount--0" class="gdoc-page__anchor gdoc-page__anchor--right clip" aria-label="Anchor 20. protected transient int modCount = 0;" href="#20-protected-transient-int-modcount--0">
            <svg class="icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
        </a>
    </h1>
</div><p>此列表已被结构上修改的次数。结构上修改是指更改列表大小或以其他方式干扰列表的方式，即正在进行的迭代可能会产生错误的结果。</p>
<p>此字段被<code>iterator</code>和<code>listIterator</code>方法返回的迭代器和列表迭代器的实现所使用。如果此字段的值意外更改，则迭代器（或列表迭代器）将抛出<code>ConcurrentModificationException</code>以响应<code>next</code>，<code>remove</code>，<code>previous</code>，<code>set</code>或<code>add</code>操作。面对迭代期间的并发修改，提供了“快速失败”机制，而不是不确定的行为。</p>
<p>子类对此字段的使用是可选的。如果子类希望提供“快速失败”的迭代器（和列表迭代器），则只需在其<code>add</code>和<code>remove</code>方法（以及它覆盖的所有其他会对列表进行结构修改的方法）。一次调用<code>add</code>或<code>remove</code>应只对此字段加1，否则迭代器（和列表迭代器）将误抛出<code>ConcurrentModificationExceptions</code>。如果实现不希望提供“快速失败”的迭代器，则可以忽略此字段。</p>
<div class="gdoc-page__anchorwrap">
    <h1 id="21-private-void-rangecheckforaddint-index">
        21. private void rangeCheckForAdd(int index)
        <a data-clipboard-text="https://hongmao.run/jdk8-src-note/java/util/AbstractList/#21-private-void-rangecheckforaddint-index" class="gdoc-page__anchor gdoc-page__anchor--right clip" aria-label="Anchor 21. private void rangeCheckForAdd(int index)" href="#21-private-void-rangecheckforaddint-index">
            <svg class="icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
        </a>
    </h1>
</div><p>添加元素到列表之前对要添加元素的位置进行校验，校验方式为：参数中指定的<code>index</code>是否小于0或者大于<code>size()</code>，若是则抛出<code>IndexOutOfBoundsException</code>。</p>
<p>源码如下：</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2"><code class="language-java" data-lang="java"><span style="color:#a90d91">private</span> <span style="color:#a90d91">void</span> <span style="color:#000">rangeCheckForAdd</span><span style="color:#000">(</span><span style="color:#a90d91">int</span> <span style="color:#000">index</span><span style="color:#000">)</span> <span style="color:#000">{</span>
    <span style="color:#a90d91">if</span> <span style="color:#000">(</span><span style="color:#000">index</span> <span style="color:#000">&lt;</span> <span style="color:#000">0</span> <span style="color:#000">||</span> <span style="color:#000">index</span> <span style="color:#000">&gt;</span> <span style="color:#000">size</span><span style="color:#000">())</span>
        <span style="color:#a90d91">throw</span> <span style="color:#a90d91">new</span> <span style="color:#000">IndexOutOfBoundsException</span><span style="color:#000">(</span><span style="color:#000">outOfBoundsMsg</span><span style="color:#000">(</span><span style="color:#000">index</span><span style="color:#000">));</span>
<span style="color:#000">}</span>
</code></pre></div><div class="gdoc-page__anchorwrap">
    <h1 id="22-private-string-outofboundsmsgint-index">
        22. private String outOfBoundsMsg(int index)
        <a data-clipboard-text="https://hongmao.run/jdk8-src-note/java/util/AbstractList/#22-private-string-outofboundsmsgint-index" class="gdoc-page__anchor gdoc-page__anchor--right clip" aria-label="Anchor 22. private String outOfBoundsMsg(int index)" href="#22-private-string-outofboundsmsgint-index">
            <svg class="icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
        </a>
    </h1>
</div><p>获取一个数组越界的提示信息。</p>
<p>源码如下：</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2"><code class="language-java" data-lang="java"><span style="color:#a90d91">private</span> <span style="color:#000">String</span> <span style="color:#000">outOfBoundsMsg</span><span style="color:#000">(</span><span style="color:#a90d91">int</span> <span style="color:#000">index</span><span style="color:#000">)</span> <span style="color:#000">{</span>
    <span style="color:#a90d91">return</span> <span style="color:#c41a16">&#34;Index: &#34;</span><span style="color:#000">+</span><span style="color:#000">index</span><span style="color:#000">+</span><span style="color:#c41a16">&#34;, Size: &#34;</span><span style="color:#000">+</span><span style="color:#000">size</span><span style="color:#000">();</span>
<span style="color:#000">}</span>
</code></pre></div><div class="gdoc-page__anchorwrap">
    <h1 id="同一文件中的其他类">
        同一文件中的其他类
        <a data-clipboard-text="https://hongmao.run/jdk8-src-note/java/util/AbstractList/#同一文件中的其他类" class="gdoc-page__anchor gdoc-page__anchor--right clip" aria-label="Anchor 同一文件中的其他类" href="#%e5%90%8c%e4%b8%80%e6%96%87%e4%bb%b6%e4%b8%ad%e7%9a%84%e5%85%b6%e4%bb%96%e7%b1%bb">
            <svg class="icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
        </a>
    </h1>
</div><div class="gdoc-page__anchorwrap">
    <h2 id="1-class-sublistlte-extends-abstractlistlte">
        1. class SubList&lt;E&gt; extends AbstractList&lt;E&gt;
        <a data-clipboard-text="https://hongmao.run/jdk8-src-note/java/util/AbstractList/#1-class-sublistlte-extends-abstractlistlte" class="gdoc-page__anchor gdoc-page__anchor--right clip" aria-label="Anchor 1. class SubList&lt;E&gt; extends AbstractList&lt;E&gt;" href="#1-class-sublistlte-extends-abstractlistlte">
            <svg class="icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
        </a>
    </h2>
</div><p><code>AbstractList</code>可以截取自身的一截，以<code>SubList</code>的形式返回，<code>SubList</code>也支持增删改查，它持有它的父列表，并提供增删查改操作，所以增删改也会影响到其父列表。</p>
<p>它更像是其父列表的代理人，对该子列表的任何增删改，它都是通过其父列表的增删改来实现的。</p>
<div class="gdoc-page__anchorwrap">
    <h3 id="11-private-final-abstractlistlte-l">
        1.1 private final AbstractList&lt;E&gt; l;
        <a data-clipboard-text="https://hongmao.run/jdk8-src-note/java/util/AbstractList/#11-private-final-abstractlistlte-l" class="gdoc-page__anchor gdoc-page__anchor--right clip" aria-label="Anchor 1.1 private final AbstractList&lt;E&gt; l;" href="#11-private-final-abstractlistlte-l">
            <svg class="icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
        </a>
    </h3>
</div><p>当前<code>SubList</code>实例的父列表（也即当前实例基于的那个列表）。</p>
<div class="gdoc-page__anchorwrap">
    <h3 id="12-private-final-int-offset">
        1.2 private final int offset;
        <a data-clipboard-text="https://hongmao.run/jdk8-src-note/java/util/AbstractList/#12-private-final-int-offset" class="gdoc-page__anchor gdoc-page__anchor--right clip" aria-label="Anchor 1.2 private final int offset;" href="#12-private-final-int-offset">
            <svg class="icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
        </a>
    </h3>
</div><p>基于父列表的索引偏移量，用于定位当前列表的位置。</p>
<div class="gdoc-page__anchorwrap">
    <h3 id="13-private-int-size">
        1.3 private int size;
        <a data-clipboard-text="https://hongmao.run/jdk8-src-note/java/util/AbstractList/#13-private-int-size" class="gdoc-page__anchor gdoc-page__anchor--right clip" aria-label="Anchor 1.3 private int size;" href="#13-private-int-size">
            <svg class="icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
        </a>
    </h3>
</div><p>当前列表的大小。</p>
<div class="gdoc-page__anchorwrap">
    <h3 id="14-sublistabstractlistlte-list-int-fromindex-int-toindex">
        1.4 SubList(AbstractList&lt;E&gt; list, int fromIndex, int toIndex)
        <a data-clipboard-text="https://hongmao.run/jdk8-src-note/java/util/AbstractList/#14-sublistabstractlistlte-list-int-fromindex-int-toindex" class="gdoc-page__anchor gdoc-page__anchor--right clip" aria-label="Anchor 1.4 SubList(AbstractList&lt;E&gt; list, int fromIndex, int toIndex)" href="#14-sublistabstractlistlte-list-int-fromindex-int-toindex">
            <svg class="icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
        </a>
    </h3>
</div><p>构造方法，构造一个<code>SubList</code>实例。</p>
<p>源码如下：</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2"><code class="language-java" data-lang="java"><span style="color:#000">SubList</span><span style="color:#000">(</span><span style="color:#000">AbstractList</span><span style="color:#000">&lt;</span><span style="color:#000">E</span><span style="color:#000">&gt;</span> <span style="color:#000">list</span><span style="color:#000">,</span> <span style="color:#a90d91">int</span> <span style="color:#000">fromIndex</span><span style="color:#000">,</span> <span style="color:#a90d91">int</span> <span style="color:#000">toIndex</span><span style="color:#000">)</span> <span style="color:#000">{</span>
    <span style="color:#177500">// 先进行校验
</span><span style="color:#177500"></span>    <span style="color:#a90d91">if</span> <span style="color:#000">(</span><span style="color:#000">fromIndex</span> <span style="color:#000">&lt;</span> <span style="color:#000">0</span><span style="color:#000">)</span>
        <span style="color:#a90d91">throw</span> <span style="color:#a90d91">new</span> <span style="color:#000">IndexOutOfBoundsException</span><span style="color:#000">(</span><span style="color:#c41a16">&#34;fromIndex = &#34;</span> <span style="color:#000">+</span> <span style="color:#000">fromIndex</span><span style="color:#000">);</span>
    <span style="color:#a90d91">if</span> <span style="color:#000">(</span><span style="color:#000">toIndex</span> <span style="color:#000">&gt;</span> <span style="color:#000">list</span><span style="color:#000">.</span><span style="color:#836c28">size</span><span style="color:#000">())</span>
        <span style="color:#a90d91">throw</span> <span style="color:#a90d91">new</span> <span style="color:#000">IndexOutOfBoundsException</span><span style="color:#000">(</span><span style="color:#c41a16">&#34;toIndex = &#34;</span> <span style="color:#000">+</span> <span style="color:#000">toIndex</span><span style="color:#000">);</span>
    <span style="color:#a90d91">if</span> <span style="color:#000">(</span><span style="color:#000">fromIndex</span> <span style="color:#000">&gt;</span> <span style="color:#000">toIndex</span><span style="color:#000">)</span>
        <span style="color:#a90d91">throw</span> <span style="color:#a90d91">new</span> <span style="color:#000">IllegalArgumentException</span><span style="color:#000">(</span><span style="color:#c41a16">&#34;fromIndex(&#34;</span> <span style="color:#000">+</span> <span style="color:#000">fromIndex</span> <span style="color:#000">+</span>
                                           <span style="color:#c41a16">&#34;) &gt; toIndex(&#34;</span> <span style="color:#000">+</span> <span style="color:#000">toIndex</span> <span style="color:#000">+</span> <span style="color:#c41a16">&#34;)&#34;</span><span style="color:#000">);</span>
    <span style="color:#177500">// 再执行各个属性的初始化
</span><span style="color:#177500"></span>    <span style="color:#000">l</span> <span style="color:#000">=</span> <span style="color:#000">list</span><span style="color:#000">;</span>
    <span style="color:#000">offset</span> <span style="color:#000">=</span> <span style="color:#000">fromIndex</span><span style="color:#000">;</span>
    <span style="color:#000">size</span> <span style="color:#000">=</span> <span style="color:#000">toIndex</span> <span style="color:#000">-</span> <span style="color:#000">fromIndex</span><span style="color:#000">;</span>
    <span style="color:#a90d91">this</span><span style="color:#000">.</span><span style="color:#836c28">modCount</span> <span style="color:#000">=</span> <span style="color:#000">l</span><span style="color:#000">.</span><span style="color:#836c28">modCount</span><span style="color:#000">;</span>
<span style="color:#000">}</span>
</code></pre></div><div class="gdoc-page__anchorwrap">
    <h3 id="15-public-e-setint-index-e-element">
        1.5 public E set(int index, E element)
        <a data-clipboard-text="https://hongmao.run/jdk8-src-note/java/util/AbstractList/#15-public-e-setint-index-e-element" class="gdoc-page__anchor gdoc-page__anchor--right clip" aria-label="Anchor 1.5 public E set(int index, E element)" href="#15-public-e-setint-index-e-element">
            <svg class="icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
        </a>
    </h3>
</div><p>替换指定索引位置的元素。</p>
<p>源码如下：</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2"><code class="language-java" data-lang="java"><span style="color:#a90d91">public</span> <span style="color:#000">E</span> <span style="color:#000">set</span><span style="color:#000">(</span><span style="color:#a90d91">int</span> <span style="color:#000">index</span><span style="color:#000">,</span> <span style="color:#000">E</span> <span style="color:#000">element</span><span style="color:#000">)</span> <span style="color:#000">{</span>
    <span style="color:#177500">// 指定索引的合法性检查
</span><span style="color:#177500"></span>    <span style="color:#000">rangeCheck</span><span style="color:#000">(</span><span style="color:#000">index</span><span style="color:#000">);</span>
    <span style="color:#177500">// 检查是否存在并发修改
</span><span style="color:#177500"></span>    <span style="color:#000">checkForComodification</span><span style="color:#000">();</span>
    <span style="color:#177500">// 调用负列表的set方法进行元素的替换，父列表对应的索引位置为：当前指定的索引 + 偏移量
</span><span style="color:#177500"></span>    <span style="color:#a90d91">return</span> <span style="color:#000">l</span><span style="color:#000">.</span><span style="color:#836c28">set</span><span style="color:#000">(</span><span style="color:#000">index</span><span style="color:#000">+</span><span style="color:#000">offset</span><span style="color:#000">,</span> <span style="color:#000">element</span><span style="color:#000">);</span>
<span style="color:#000">}</span>
</code></pre></div><div class="gdoc-page__anchorwrap">
    <h3 id="16-public-e-getint-index">
        1.6 public E get(int index)
        <a data-clipboard-text="https://hongmao.run/jdk8-src-note/java/util/AbstractList/#16-public-e-getint-index" class="gdoc-page__anchor gdoc-page__anchor--right clip" aria-label="Anchor 1.6 public E get(int index)" href="#16-public-e-getint-index">
            <svg class="icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
        </a>
    </h3>
</div><p>获取指定索引位置的元素。</p>
<p>源码如下：</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2"><code class="language-java" data-lang="java"><span style="color:#a90d91">public</span> <span style="color:#000">E</span> <span style="color:#000">get</span><span style="color:#000">(</span><span style="color:#a90d91">int</span> <span style="color:#000">index</span><span style="color:#000">)</span> <span style="color:#000">{</span>
    <span style="color:#177500">// 与set方法相同的套路，索引范围检查、并发检查、通过父列表获取指定位置的元素
</span><span style="color:#177500"></span>    <span style="color:#000">rangeCheck</span><span style="color:#000">(</span><span style="color:#000">index</span><span style="color:#000">);</span>
    <span style="color:#000">checkForComodification</span><span style="color:#000">();</span>
    <span style="color:#a90d91">return</span> <span style="color:#000">l</span><span style="color:#000">.</span><span style="color:#836c28">get</span><span style="color:#000">(</span><span style="color:#000">index</span><span style="color:#000">+</span><span style="color:#000">offset</span><span style="color:#000">);</span>
<span style="color:#000">}</span>
</code></pre></div><div class="gdoc-page__anchorwrap">
    <h3 id="17-public-int-size">
        1.7 public int size()
        <a data-clipboard-text="https://hongmao.run/jdk8-src-note/java/util/AbstractList/#17-public-int-size" class="gdoc-page__anchor gdoc-page__anchor--right clip" aria-label="Anchor 1.7 public int size()" href="#17-public-int-size">
            <svg class="icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
        </a>
    </h3>
</div><p>获取当前列表的大小。</p>
<p>源码如下：</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2"><code class="language-java" data-lang="java"><span style="color:#a90d91">public</span> <span style="color:#a90d91">int</span> <span style="color:#000">size</span><span style="color:#000">()</span> <span style="color:#000">{</span>
    <span style="color:#177500">// 先调用checkForComodification进行并发修改检查，再返回size
</span><span style="color:#177500"></span>    <span style="color:#000">checkForComodification</span><span style="color:#000">();</span>
    <span style="color:#a90d91">return</span> <span style="color:#000">size</span><span style="color:#000">;</span>
<span style="color:#000">}</span>
</code></pre></div><div class="gdoc-page__anchorwrap">
    <h3 id="18-public-void-addint-index-e-element">
        1.8 public void add(int index, E element)
        <a data-clipboard-text="https://hongmao.run/jdk8-src-note/java/util/AbstractList/#18-public-void-addint-index-e-element" class="gdoc-page__anchor gdoc-page__anchor--right clip" aria-label="Anchor 1.8 public void add(int index, E element)" href="#18-public-void-addint-index-e-element">
            <svg class="icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
        </a>
    </h3>
</div><p>在指定的索引位置插入指定元素。</p>
<p>源码如下：</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2"><code class="language-java" data-lang="java"><span style="color:#a90d91">public</span> <span style="color:#a90d91">void</span> <span style="color:#000">add</span><span style="color:#000">(</span><span style="color:#a90d91">int</span> <span style="color:#000">index</span><span style="color:#000">,</span> <span style="color:#000">E</span> <span style="color:#000">element</span><span style="color:#000">)</span> <span style="color:#000">{</span>
    <span style="color:#000">rangeCheckForAdd</span><span style="color:#000">(</span><span style="color:#000">index</span><span style="color:#000">);</span>
    <span style="color:#000">checkForComodification</span><span style="color:#000">();</span>
    <span style="color:#177500">// 使用父列表的add方法添加元素
</span><span style="color:#177500"></span>    <span style="color:#000">l</span><span style="color:#000">.</span><span style="color:#836c28">add</span><span style="color:#000">(</span><span style="color:#000">index</span><span style="color:#000">+</span><span style="color:#000">offset</span><span style="color:#000">,</span> <span style="color:#000">element</span><span style="color:#000">);</span>
    <span style="color:#177500">// 同步修改次数
</span><span style="color:#177500"></span>    <span style="color:#a90d91">this</span><span style="color:#000">.</span><span style="color:#836c28">modCount</span> <span style="color:#000">=</span> <span style="color:#000">l</span><span style="color:#000">.</span><span style="color:#836c28">modCount</span><span style="color:#000">;</span>
    <span style="color:#000">size</span><span style="color:#000">++;</span>
<span style="color:#000">}</span>
</code></pre></div><div class="gdoc-page__anchorwrap">
    <h3 id="19-public-e-removeint-index">
        1.9 public E remove(int index)
        <a data-clipboard-text="https://hongmao.run/jdk8-src-note/java/util/AbstractList/#19-public-e-removeint-index" class="gdoc-page__anchor gdoc-page__anchor--right clip" aria-label="Anchor 1.9 public E remove(int index)" href="#19-public-e-removeint-index">
            <svg class="icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
        </a>
    </h3>
</div><p>删除指定索引位置的元素。</p>
<p>源码如下：</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2"><code class="language-java" data-lang="java"><span style="color:#a90d91">public</span> <span style="color:#000">E</span> <span style="color:#000">remove</span><span style="color:#000">(</span><span style="color:#a90d91">int</span> <span style="color:#000">index</span><span style="color:#000">)</span> <span style="color:#000">{</span>
    <span style="color:#000">rangeCheck</span><span style="color:#000">(</span><span style="color:#000">index</span><span style="color:#000">);</span>
    <span style="color:#000">checkForComodification</span><span style="color:#000">();</span>
    <span style="color:#177500">// 使用父列表的remove方法删除指定元素
</span><span style="color:#177500"></span>    <span style="color:#000">E</span> <span style="color:#000">result</span> <span style="color:#000">=</span> <span style="color:#000">l</span><span style="color:#000">.</span><span style="color:#836c28">remove</span><span style="color:#000">(</span><span style="color:#000">index</span><span style="color:#000">+</span><span style="color:#000">offset</span><span style="color:#000">);</span>
    <span style="color:#a90d91">this</span><span style="color:#000">.</span><span style="color:#836c28">modCount</span> <span style="color:#000">=</span> <span style="color:#000">l</span><span style="color:#000">.</span><span style="color:#836c28">modCount</span><span style="color:#000">;</span>
    <span style="color:#000">size</span><span style="color:#000">--;</span>
    <span style="color:#a90d91">return</span> <span style="color:#000">result</span><span style="color:#000">;</span>
<span style="color:#000">}</span>
</code></pre></div><div class="gdoc-page__anchorwrap">
    <h3 id="110-protected-void-removerangeint-fromindex-int-toindex">
        1.10 protected void removeRange(int fromIndex, int toIndex)
        <a data-clipboard-text="https://hongmao.run/jdk8-src-note/java/util/AbstractList/#110-protected-void-removerangeint-fromindex-int-toindex" class="gdoc-page__anchor gdoc-page__anchor--right clip" aria-label="Anchor 1.10 protected void removeRange(int fromIndex, int toIndex)" href="#110-protected-void-removerangeint-fromindex-int-toindex">
            <svg class="icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
        </a>
    </h3>
</div><p>删除指定索引范围内的元素。</p>
<p>源码如下：</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2"><code class="language-java" data-lang="java"><span style="color:#a90d91">protected</span> <span style="color:#a90d91">void</span> <span style="color:#000">removeRange</span><span style="color:#000">(</span><span style="color:#a90d91">int</span> <span style="color:#000">fromIndex</span><span style="color:#000">,</span> <span style="color:#a90d91">int</span> <span style="color:#000">toIndex</span><span style="color:#000">)</span> <span style="color:#000">{</span>
    <span style="color:#000">checkForComodification</span><span style="color:#000">();</span>
    <span style="color:#177500">// 使用父列表的removeRange方法删除元素
</span><span style="color:#177500"></span>    <span style="color:#000">l</span><span style="color:#000">.</span><span style="color:#836c28">removeRange</span><span style="color:#000">(</span><span style="color:#000">fromIndex</span><span style="color:#000">+</span><span style="color:#000">offset</span><span style="color:#000">,</span> <span style="color:#000">toIndex</span><span style="color:#000">+</span><span style="color:#000">offset</span><span style="color:#000">);</span>
    <span style="color:#a90d91">this</span><span style="color:#000">.</span><span style="color:#836c28">modCount</span> <span style="color:#000">=</span> <span style="color:#000">l</span><span style="color:#000">.</span><span style="color:#836c28">modCount</span><span style="color:#000">;</span>
    <span style="color:#000">size</span> <span style="color:#000">-=</span> <span style="color:#000">(</span><span style="color:#000">toIndex</span><span style="color:#000">-</span><span style="color:#000">fromIndex</span><span style="color:#000">);</span>
<span style="color:#000">}</span>
</code></pre></div><div class="gdoc-page__anchorwrap">
    <h3 id="111-public-boolean-addallcollection-extends-e-c">
        1.11 public boolean addAll(Collection&lt;? extends E&gt; c)
        <a data-clipboard-text="https://hongmao.run/jdk8-src-note/java/util/AbstractList/#111-public-boolean-addallcollection-extends-e-c" class="gdoc-page__anchor gdoc-page__anchor--right clip" aria-label="Anchor 1.11 public boolean addAll(Collection&lt;? extends E&gt; c)" href="#111-public-boolean-addallcollection-extends-e-c">
            <svg class="icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
        </a>
    </h3>
</div><p>将指定集合内的元素添加到当前列表的末尾。</p>
<p>源码如下：</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2"><code class="language-java" data-lang="java"><span style="color:#a90d91">public</span> <span style="color:#a90d91">boolean</span> <span style="color:#000">addAll</span><span style="color:#000">(</span><span style="color:#000">Collection</span><span style="color:#000">&lt;?</span> <span style="color:#a90d91">extends</span> <span style="color:#000">E</span><span style="color:#000">&gt;</span> <span style="color:#000">c</span><span style="color:#000">)</span> <span style="color:#000">{</span>
    <span style="color:#177500">// 当前列表的末尾并非一定是父列表的末尾，所以此处调用自己的addAll方法将元素插入到本列表末尾（即索引位置为size处）
</span><span style="color:#177500"></span>    <span style="color:#a90d91">return</span> <span style="color:#000">addAll</span><span style="color:#000">(</span><span style="color:#000">size</span><span style="color:#000">,</span> <span style="color:#000">c</span><span style="color:#000">);</span>
<span style="color:#000">}</span>
</code></pre></div><div class="gdoc-page__anchorwrap">
    <h3 id="112-public-boolean-addallint-index-collection-extends-e-c">
        1.12 public boolean addAll(int index, Collection&lt;? extends E&gt; c)
        <a data-clipboard-text="https://hongmao.run/jdk8-src-note/java/util/AbstractList/#112-public-boolean-addallint-index-collection-extends-e-c" class="gdoc-page__anchor gdoc-page__anchor--right clip" aria-label="Anchor 1.12 public boolean addAll(int index, Collection&lt;? extends E&gt; c)" href="#112-public-boolean-addallint-index-collection-extends-e-c">
            <svg class="icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
        </a>
    </h3>
</div><p>将指定集合内的元素添加到当前列表的指定位置。</p>
<p>源码如下：</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2"><code class="language-java" data-lang="java"><span style="color:#a90d91">public</span> <span style="color:#a90d91">boolean</span> <span style="color:#000">addAll</span><span style="color:#000">(</span><span style="color:#a90d91">int</span> <span style="color:#000">index</span><span style="color:#000">,</span> <span style="color:#000">Collection</span><span style="color:#000">&lt;?</span> <span style="color:#a90d91">extends</span> <span style="color:#000">E</span><span style="color:#000">&gt;</span> <span style="color:#000">c</span><span style="color:#000">)</span> <span style="color:#000">{</span>
    <span style="color:#177500">// 对指定的索引位置index的合法性做检查
</span><span style="color:#177500"></span>    <span style="color:#000">rangeCheckForAdd</span><span style="color:#000">(</span><span style="color:#000">index</span><span style="color:#000">);</span>
    <span style="color:#177500">// 指定集合的大小为0，则直接返回false
</span><span style="color:#177500"></span>    <span style="color:#a90d91">int</span> <span style="color:#000">cSize</span> <span style="color:#000">=</span> <span style="color:#000">c</span><span style="color:#000">.</span><span style="color:#836c28">size</span><span style="color:#000">();</span>
    <span style="color:#a90d91">if</span> <span style="color:#000">(</span><span style="color:#000">cSize</span><span style="color:#000">==</span><span style="color:#000">0</span><span style="color:#000">)</span>
        <span style="color:#a90d91">return</span> <span style="color:#a90d91">false</span><span style="color:#000">;</span>

    <span style="color:#177500">// 并发修改检查
</span><span style="color:#177500"></span>    <span style="color:#000">checkForComodification</span><span style="color:#000">();</span>
    <span style="color:#177500">// 调用父类的addAll方法添加指定集合的元素
</span><span style="color:#177500"></span>    <span style="color:#000">l</span><span style="color:#000">.</span><span style="color:#836c28">addAll</span><span style="color:#000">(</span><span style="color:#000">offset</span><span style="color:#000">+</span><span style="color:#000">index</span><span style="color:#000">,</span> <span style="color:#000">c</span><span style="color:#000">);</span>
    <span style="color:#a90d91">this</span><span style="color:#000">.</span><span style="color:#836c28">modCount</span> <span style="color:#000">=</span> <span style="color:#000">l</span><span style="color:#000">.</span><span style="color:#836c28">modCount</span><span style="color:#000">;</span>
    <span style="color:#000">size</span> <span style="color:#000">+=</span> <span style="color:#000">cSize</span><span style="color:#000">;</span>
    <span style="color:#a90d91">return</span> <span style="color:#a90d91">true</span><span style="color:#000">;</span>
<span style="color:#000">}</span>
</code></pre></div><div class="gdoc-page__anchorwrap">
    <h3 id="113-public-iteratorlte-iterator">
        1.13 public Iterator&lt;E&gt; iterator()
        <a data-clipboard-text="https://hongmao.run/jdk8-src-note/java/util/AbstractList/#113-public-iteratorlte-iterator" class="gdoc-page__anchor gdoc-page__anchor--right clip" aria-label="Anchor 1.13 public Iterator&lt;E&gt; iterator()" href="#113-public-iteratorlte-iterator">
            <svg class="icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
        </a>
    </h3>
</div><p>获取一个迭代器，调用父列表的<code>listIterator</code>。</p>
<p>源码如下：</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2"><code class="language-java" data-lang="java"><span style="color:#a90d91">public</span> <span style="color:#000">Iterator</span><span style="color:#000">&lt;</span><span style="color:#000">E</span><span style="color:#000">&gt;</span> <span style="color:#000">iterator</span><span style="color:#000">()</span> <span style="color:#000">{</span>
    <span style="color:#177500">// 调用父列表的listIterator()方法
</span><span style="color:#177500"></span>    <span style="color:#a90d91">return</span> <span style="color:#000">listIterator</span><span style="color:#000">();</span>
<span style="color:#000">}</span>
</code></pre></div><div class="gdoc-page__anchorwrap">
    <h3 id="114-public-listiteratorlte-listiteratorfinal-int-index">
        1.14 public ListIterator&lt;E&gt; listIterator(final int index)
        <a data-clipboard-text="https://hongmao.run/jdk8-src-note/java/util/AbstractList/#114-public-listiteratorlte-listiteratorfinal-int-index" class="gdoc-page__anchor gdoc-page__anchor--right clip" aria-label="Anchor 1.14 public ListIterator&lt;E&gt; listIterator(final int index)" href="#114-public-listiteratorlte-listiteratorfinal-int-index">
            <svg class="icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
        </a>
    </h3>
</div><p>获取一个从指定索引位置开始的列表迭代器。</p>
<p>源码如下：</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2"><code class="language-java" data-lang="java"><span style="color:#a90d91">public</span> <span style="color:#000">ListIterator</span><span style="color:#000">&lt;</span><span style="color:#000">E</span><span style="color:#000">&gt;</span> <span style="color:#000">listIterator</span><span style="color:#000">(</span><span style="color:#a90d91">final</span> <span style="color:#a90d91">int</span> <span style="color:#000">index</span><span style="color:#000">)</span> <span style="color:#000">{</span>
    <span style="color:#177500">// 进行并发修改检查
</span><span style="color:#177500"></span>    <span style="color:#000">checkForComodification</span><span style="color:#000">();</span>
    <span style="color:#177500">// 指定索引的合法性检查
</span><span style="color:#177500"></span>    <span style="color:#000">rangeCheckForAdd</span><span style="color:#000">(</span><span style="color:#000">index</span><span style="color:#000">);</span>

    <span style="color:#177500">// 返回一个实现ListIterator的匿名内部类，首先其持有的也是父类的列表迭代器
</span><span style="color:#177500"></span>    <span style="color:#177500">// 只是进行操作的时候会加上偏移量
</span><span style="color:#177500"></span>    <span style="color:#a90d91">return</span> <span style="color:#a90d91">new</span> <span style="color:#000">ListIterator</span><span style="color:#000">&lt;</span><span style="color:#000">E</span><span style="color:#000">&gt;()</span> <span style="color:#000">{</span>
        <span style="color:#a90d91">private</span> <span style="color:#a90d91">final</span> <span style="color:#000">ListIterator</span><span style="color:#000">&lt;</span><span style="color:#000">E</span><span style="color:#000">&gt;</span> <span style="color:#000">i</span> <span style="color:#000">=</span> <span style="color:#000">l</span><span style="color:#000">.</span><span style="color:#836c28">listIterator</span><span style="color:#000">(</span><span style="color:#000">index</span><span style="color:#000">+</span><span style="color:#000">offset</span><span style="color:#000">);</span>

        <span style="color:#a90d91">public</span> <span style="color:#a90d91">boolean</span> <span style="color:#000">hasNext</span><span style="color:#000">()</span> <span style="color:#000">{</span>
            <span style="color:#a90d91">return</span> <span style="color:#000">nextIndex</span><span style="color:#000">()</span> <span style="color:#000">&lt;</span> <span style="color:#000">size</span><span style="color:#000">;</span>
        <span style="color:#000">}</span>

        <span style="color:#a90d91">public</span> <span style="color:#000">E</span> <span style="color:#000">next</span><span style="color:#000">()</span> <span style="color:#000">{</span>
            <span style="color:#a90d91">if</span> <span style="color:#000">(</span><span style="color:#000">hasNext</span><span style="color:#000">())</span>
                <span style="color:#a90d91">return</span> <span style="color:#000">i</span><span style="color:#000">.</span><span style="color:#836c28">next</span><span style="color:#000">();</span>
            <span style="color:#a90d91">else</span>
                <span style="color:#a90d91">throw</span> <span style="color:#a90d91">new</span> <span style="color:#000">NoSuchElementException</span><span style="color:#000">();</span>
        <span style="color:#000">}</span>

        <span style="color:#a90d91">public</span> <span style="color:#a90d91">boolean</span> <span style="color:#000">hasPrevious</span><span style="color:#000">()</span> <span style="color:#000">{</span>
            <span style="color:#a90d91">return</span> <span style="color:#000">previousIndex</span><span style="color:#000">()</span> <span style="color:#000">&gt;=</span> <span style="color:#000">0</span><span style="color:#000">;</span>
        <span style="color:#000">}</span>

        <span style="color:#a90d91">public</span> <span style="color:#000">E</span> <span style="color:#000">previous</span><span style="color:#000">()</span> <span style="color:#000">{</span>
            <span style="color:#a90d91">if</span> <span style="color:#000">(</span><span style="color:#000">hasPrevious</span><span style="color:#000">())</span>
                <span style="color:#a90d91">return</span> <span style="color:#000">i</span><span style="color:#000">.</span><span style="color:#836c28">previous</span><span style="color:#000">();</span>
            <span style="color:#a90d91">else</span>
                <span style="color:#a90d91">throw</span> <span style="color:#a90d91">new</span> <span style="color:#000">NoSuchElementException</span><span style="color:#000">();</span>
        <span style="color:#000">}</span>

        <span style="color:#a90d91">public</span> <span style="color:#a90d91">int</span> <span style="color:#000">nextIndex</span><span style="color:#000">()</span> <span style="color:#000">{</span>
            <span style="color:#a90d91">return</span> <span style="color:#000">i</span><span style="color:#000">.</span><span style="color:#836c28">nextIndex</span><span style="color:#000">()</span> <span style="color:#000">-</span> <span style="color:#000">offset</span><span style="color:#000">;</span>
        <span style="color:#000">}</span>

        <span style="color:#a90d91">public</span> <span style="color:#a90d91">int</span> <span style="color:#000">previousIndex</span><span style="color:#000">()</span> <span style="color:#000">{</span>
            <span style="color:#a90d91">return</span> <span style="color:#000">i</span><span style="color:#000">.</span><span style="color:#836c28">previousIndex</span><span style="color:#000">()</span> <span style="color:#000">-</span> <span style="color:#000">offset</span><span style="color:#000">;</span>
        <span style="color:#000">}</span>

        <span style="color:#a90d91">public</span> <span style="color:#a90d91">void</span> <span style="color:#000">remove</span><span style="color:#000">()</span> <span style="color:#000">{</span>
            <span style="color:#000">i</span><span style="color:#000">.</span><span style="color:#836c28">remove</span><span style="color:#000">();</span>
            <span style="color:#000">SubList</span><span style="color:#000">.</span><span style="color:#836c28">this</span><span style="color:#000">.</span><span style="color:#836c28">modCount</span> <span style="color:#000">=</span> <span style="color:#000">l</span><span style="color:#000">.</span><span style="color:#836c28">modCount</span><span style="color:#000">;</span>
            <span style="color:#000">size</span><span style="color:#000">--;</span>
        <span style="color:#000">}</span>

        <span style="color:#a90d91">public</span> <span style="color:#a90d91">void</span> <span style="color:#000">set</span><span style="color:#000">(</span><span style="color:#000">E</span> <span style="color:#000">e</span><span style="color:#000">)</span> <span style="color:#000">{</span>
            <span style="color:#000">i</span><span style="color:#000">.</span><span style="color:#836c28">set</span><span style="color:#000">(</span><span style="color:#000">e</span><span style="color:#000">);</span>
        <span style="color:#000">}</span>

        <span style="color:#a90d91">public</span> <span style="color:#a90d91">void</span> <span style="color:#000">add</span><span style="color:#000">(</span><span style="color:#000">E</span> <span style="color:#000">e</span><span style="color:#000">)</span> <span style="color:#000">{</span>
            <span style="color:#000">i</span><span style="color:#000">.</span><span style="color:#836c28">add</span><span style="color:#000">(</span><span style="color:#000">e</span><span style="color:#000">);</span>
            <span style="color:#000">SubList</span><span style="color:#000">.</span><span style="color:#836c28">this</span><span style="color:#000">.</span><span style="color:#836c28">modCount</span> <span style="color:#000">=</span> <span style="color:#000">l</span><span style="color:#000">.</span><span style="color:#836c28">modCount</span><span style="color:#000">;</span>
            <span style="color:#000">size</span><span style="color:#000">++;</span>
        <span style="color:#000">}</span>
    <span style="color:#000">};</span>
<span style="color:#000">}</span>
</code></pre></div><div class="gdoc-page__anchorwrap">
    <h3 id="115-public-listlte-sublistint-fromindex-int-toindex">
        1.15 public List&lt;E&gt; subList(int fromIndex, int toIndex)
        <a data-clipboard-text="https://hongmao.run/jdk8-src-note/java/util/AbstractList/#115-public-listlte-sublistint-fromindex-int-toindex" class="gdoc-page__anchor gdoc-page__anchor--right clip" aria-label="Anchor 1.15 public List&lt;E&gt; subList(int fromIndex, int toIndex)" href="#115-public-listlte-sublistint-fromindex-int-toindex">
            <svg class="icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
        </a>
    </h3>
</div><p>返回一个当前类的实例，新实例基于当前子列表。</p>
<p>源码如下：</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2"><code class="language-java" data-lang="java"><span style="color:#a90d91">public</span> <span style="color:#000">List</span><span style="color:#000">&lt;</span><span style="color:#000">E</span><span style="color:#000">&gt;</span> <span style="color:#000">subList</span><span style="color:#000">(</span><span style="color:#a90d91">int</span> <span style="color:#000">fromIndex</span><span style="color:#000">,</span> <span style="color:#a90d91">int</span> <span style="color:#000">toIndex</span><span style="color:#000">)</span> <span style="color:#000">{</span>
    <span style="color:#a90d91">return</span> <span style="color:#a90d91">new</span> <span style="color:#000">SubList</span><span style="color:#000">&lt;&gt;(</span><span style="color:#a90d91">this</span><span style="color:#000">,</span> <span style="color:#000">fromIndex</span><span style="color:#000">,</span> <span style="color:#000">toIndex</span><span style="color:#000">);</span>
<span style="color:#000">}</span>
</code></pre></div><div class="gdoc-page__anchorwrap">
    <h3 id="116-private-void-rangecheckint-index">
        1.16 private void rangeCheck(int index)
        <a data-clipboard-text="https://hongmao.run/jdk8-src-note/java/util/AbstractList/#116-private-void-rangecheckint-index" class="gdoc-page__anchor gdoc-page__anchor--right clip" aria-label="Anchor 1.16 private void rangeCheck(int index)" href="#116-private-void-rangecheckint-index">
            <svg class="icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
        </a>
    </h3>
</div><p>范围检查，检查指定的索引是否会造成数组下标越界。</p>
<p>源码如下：</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2"><code class="language-java" data-lang="java"><span style="color:#a90d91">private</span> <span style="color:#a90d91">void</span> <span style="color:#000">rangeCheck</span><span style="color:#000">(</span><span style="color:#a90d91">int</span> <span style="color:#000">index</span><span style="color:#000">)</span> <span style="color:#000">{</span>
    <span style="color:#a90d91">if</span> <span style="color:#000">(</span><span style="color:#000">index</span> <span style="color:#000">&lt;</span> <span style="color:#000">0</span> <span style="color:#000">||</span> <span style="color:#000">index</span> <span style="color:#000">&gt;=</span> <span style="color:#000">size</span><span style="color:#000">)</span>
        <span style="color:#a90d91">throw</span> <span style="color:#a90d91">new</span> <span style="color:#000">IndexOutOfBoundsException</span><span style="color:#000">(</span><span style="color:#000">outOfBoundsMsg</span><span style="color:#000">(</span><span style="color:#000">index</span><span style="color:#000">));</span>
<span style="color:#000">}</span>
</code></pre></div><div class="gdoc-page__anchorwrap">
    <h3 id="117-private-void-rangecheckforaddint-index">
        1.17 private void rangeCheckForAdd(int index)
        <a data-clipboard-text="https://hongmao.run/jdk8-src-note/java/util/AbstractList/#117-private-void-rangecheckforaddint-index" class="gdoc-page__anchor gdoc-page__anchor--right clip" aria-label="Anchor 1.17 private void rangeCheckForAdd(int index)" href="#117-private-void-rangecheckforaddint-index">
            <svg class="icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
        </a>
    </h3>
</div><p>新插入元素前对元素插入位置的校验，与<code>rangeCheck</code>类似，不同的是：<code>rangeCheck</code>校验的是<code>index</code>是否小于0或大于等于<code>size</code>，而<code>rangeCheckForAdd</code>校验的是<code>index</code>是否小于0或大于<code>size</code>，因为新增的时候可以在<code>index</code>为<code>size</code>的位置插入元素（也即在列表的末尾插入元素）。</p>
<p>源码如下：</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2"><code class="language-java" data-lang="java"><span style="color:#a90d91">private</span> <span style="color:#a90d91">void</span> <span style="color:#000">rangeCheckForAdd</span><span style="color:#000">(</span><span style="color:#a90d91">int</span> <span style="color:#000">index</span><span style="color:#000">)</span> <span style="color:#000">{</span>
    <span style="color:#a90d91">if</span> <span style="color:#000">(</span><span style="color:#000">index</span> <span style="color:#000">&lt;</span> <span style="color:#000">0</span> <span style="color:#000">||</span> <span style="color:#000">index</span> <span style="color:#000">&gt;</span> <span style="color:#000">size</span><span style="color:#000">)</span>
        <span style="color:#a90d91">throw</span> <span style="color:#a90d91">new</span> <span style="color:#000">IndexOutOfBoundsException</span><span style="color:#000">(</span><span style="color:#000">outOfBoundsMsg</span><span style="color:#000">(</span><span style="color:#000">index</span><span style="color:#000">));</span>
<span style="color:#000">}</span>
</code></pre></div><div class="gdoc-page__anchorwrap">
    <h3 id="118-private-string-outofboundsmsgint-index">
        1.18 private String outOfBoundsMsg(int index)
        <a data-clipboard-text="https://hongmao.run/jdk8-src-note/java/util/AbstractList/#118-private-string-outofboundsmsgint-index" class="gdoc-page__anchor gdoc-page__anchor--right clip" aria-label="Anchor 1.18 private String outOfBoundsMsg(int index)" href="#118-private-string-outofboundsmsgint-index">
            <svg class="icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
        </a>
    </h3>
</div><p>整理索引越界时的提示信息，<code>&quot;Index: &quot;+index+&quot;, Size: &quot;+size</code>。</p>
<p>源码如下：</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2"><code class="language-java" data-lang="java"><span style="color:#a90d91">private</span> <span style="color:#000">String</span> <span style="color:#000">outOfBoundsMsg</span><span style="color:#000">(</span><span style="color:#a90d91">int</span> <span style="color:#000">index</span><span style="color:#000">)</span> <span style="color:#000">{</span>
    <span style="color:#a90d91">return</span> <span style="color:#c41a16">&#34;Index: &#34;</span><span style="color:#000">+</span><span style="color:#000">index</span><span style="color:#000">+</span><span style="color:#c41a16">&#34;, Size: &#34;</span><span style="color:#000">+</span><span style="color:#000">size</span><span style="color:#000">;</span>
<span style="color:#000">}</span>
</code></pre></div><div class="gdoc-page__anchorwrap">
    <h3 id="119-private-void-checkforcomodification">
        1.19 private void checkForComodification()
        <a data-clipboard-text="https://hongmao.run/jdk8-src-note/java/util/AbstractList/#119-private-void-checkforcomodification" class="gdoc-page__anchor gdoc-page__anchor--right clip" aria-label="Anchor 1.19 private void checkForComodification()" href="#119-private-void-checkforcomodification">
            <svg class="icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
        </a>
    </h3>
</div><p>判断是否存在并发修改，判断依据是，当前列表的更新量<code>modCount</code>和其父列表的更新量<code>modCount</code>是否一致，不一致则抛出<code>ConcurrentModificationException</code>。</p>
<p>源码如下：</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2"><code class="language-java" data-lang="java"><span style="color:#a90d91">private</span> <span style="color:#a90d91">void</span> <span style="color:#000">checkForComodification</span><span style="color:#000">()</span> <span style="color:#000">{</span>
    <span style="color:#a90d91">if</span> <span style="color:#000">(</span><span style="color:#a90d91">this</span><span style="color:#000">.</span><span style="color:#836c28">modCount</span> <span style="color:#000">!=</span> <span style="color:#000">l</span><span style="color:#000">.</span><span style="color:#836c28">modCount</span><span style="color:#000">)</span>
        <span style="color:#a90d91">throw</span> <span style="color:#a90d91">new</span> <span style="color:#000">ConcurrentModificationException</span><span style="color:#000">();</span>
<span style="color:#000">}</span>
</code></pre></div><div class="gdoc-page__anchorwrap">
    <h2 id="2-class-randomaccesssublistlte-extends-sublistlte-implements-randomaccess">
        2. class RandomAccessSubList&lt;E&gt; extends SubList&lt;E&gt; implements RandomAccess
        <a data-clipboard-text="https://hongmao.run/jdk8-src-note/java/util/AbstractList/#2-class-randomaccesssublistlte-extends-sublistlte-implements-randomaccess" class="gdoc-page__anchor gdoc-page__anchor--right clip" aria-label="Anchor 2. class RandomAccessSubList&lt;E&gt; extends SubList&lt;E&gt; implements RandomAccess" href="#2-class-randomaccesssublistlte-extends-sublistlte-implements-randomaccess">
            <svg class="icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
        </a>
    </h2>
</div><p>该类是一个随机访问的子列表。</p>
<div class="gdoc-page__anchorwrap">
    <h3 id="21-randomaccesssublistabstractlistlte-list-int-fromindex-int-toindex">
        2.1 RandomAccessSubList(AbstractList&lt;E&gt; list, int fromIndex, int toIndex)
        <a data-clipboard-text="https://hongmao.run/jdk8-src-note/java/util/AbstractList/#21-randomaccesssublistabstractlistlte-list-int-fromindex-int-toindex" class="gdoc-page__anchor gdoc-page__anchor--right clip" aria-label="Anchor 2.1 RandomAccessSubList(AbstractList&lt;E&gt; list, int fromIndex, int toIndex)" href="#21-randomaccesssublistabstractlistlte-list-int-fromindex-int-toindex">
            <svg class="icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
        </a>
    </h3>
</div><p>构造方法，调用父类<code>SubList</code>的构造方法。</p>
<p>源码如下：</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2"><code class="language-java" data-lang="java"><span style="color:#000">RandomAccessSubList</span><span style="color:#000">(</span><span style="color:#000">AbstractList</span><span style="color:#000">&lt;</span><span style="color:#000">E</span><span style="color:#000">&gt;</span> <span style="color:#000">list</span><span style="color:#000">,</span> <span style="color:#a90d91">int</span> <span style="color:#000">fromIndex</span><span style="color:#000">,</span> <span style="color:#a90d91">int</span> <span style="color:#000">toIndex</span><span style="color:#000">)</span> <span style="color:#000">{</span>
    <span style="color:#a90d91">super</span><span style="color:#000">(</span><span style="color:#000">list</span><span style="color:#000">,</span> <span style="color:#000">fromIndex</span><span style="color:#000">,</span> <span style="color:#000">toIndex</span><span style="color:#000">);</span>
<span style="color:#000">}</span>
</code></pre></div><div class="gdoc-page__anchorwrap">
    <h3 id="22-public-listlte-sublistint-fromindex-int-toindex">
        2.2 public List&lt;E&gt; subList(int fromIndex, int toIndex)
        <a data-clipboard-text="https://hongmao.run/jdk8-src-note/java/util/AbstractList/#22-public-listlte-sublistint-fromindex-int-toindex" class="gdoc-page__anchor gdoc-page__anchor--right clip" aria-label="Anchor 2.2 public List&lt;E&gt; subList(int fromIndex, int toIndex)" href="#22-public-listlte-sublistint-fromindex-int-toindex">
            <svg class="icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
        </a>
    </h3>
</div><p>返回一个基于当前列表的新<code>RandomAccessSubList</code>实例。</p>
<p>源码如下：</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2"><code class="language-java" data-lang="java"><span style="color:#a90d91">public</span> <span style="color:#000">List</span><span style="color:#000">&lt;</span><span style="color:#000">E</span><span style="color:#000">&gt;</span> <span style="color:#000">subList</span><span style="color:#000">(</span><span style="color:#a90d91">int</span> <span style="color:#000">fromIndex</span><span style="color:#000">,</span> <span style="color:#a90d91">int</span> <span style="color:#000">toIndex</span><span style="color:#000">)</span> <span style="color:#000">{</span>
    <span style="color:#a90d91">return</span> <span style="color:#a90d91">new</span> <span style="color:#000">RandomAccessSubList</span><span style="color:#000">&lt;&gt;(</span><span style="color:#a90d91">this</span><span style="color:#000">,</span> <span style="color:#000">fromIndex</span><span style="color:#000">,</span> <span style="color:#000">toIndex</span><span style="color:#000">);</span>
<span style="color:#000">}</span>
</code></pre></div>

    </article>

                








    
    

    
        
        

        
        
            
            
            

            

            

            
        

        
        
            
    
    

    
        
        

        
        
            
            
            

            

            

            
        

        
        
            
    
    

    
        
        

        
        
            
            
            

            

            

            
        

        
        
    
        
        

        
        
            
            
            

            

            
                
                
            

            
        

        
        
    
        
        

        
        
            
            
            

            
                
                
            

            

            
        

        
        
    
        
        

        
        
            
            
            

            

            

            
        

        
        
    
        
        

        
        
            
            
            

            

            

            
        

        
        
    
        
        

        
        
            
            
            

            

            

            
        

        
        
    
        
        

        
        
            
            
            

            

            

            
        

        
        
    
        
        

        
        
            
            
            

            

            

            
        

        
        
    
        
        

        
        
            
            
            

            

            

            
        

        
        
    
        
        

        
        
            
            
            

            

            

            
        

        
        
    
        
        

        
        
            
            
            

            

            

            
        

        
        
    
        
        

        
        
            
            
            

            

            

            
        

        
        
    
        
        

        
        
            
            
            

            

            

            
        

        
        
    

        
    

        
    





<div class="gdoc-page__footer flex flex-wrap justify-between">
    
    
        <span class="gdoc-page__nav">
            
                <a class="gdoc-page__nav--prev flex align-center" href="/jdk8-src-note/java/util/AbstractCollection/" title="AbstractCollection"> AbstractCollection</a>
            
        </span>
        <span class="gdoc-page__nav">
            
                <a class="gdoc-page__nav--next flex align-center" href="/jdk8-src-note/java/util/AbstractSequentialList/" title="AbstractSequentialList">AbstractSequentialList </a>
            
        </span>
    
</div>

            </div>
        </main>

        <footer class="gdoc-footer">
    <div class="container flex flex-wrap">
        <span class="gdoc-footer__item">
            Built with <a href="https://gohugo.io/" class="gdoc-footer__link">Hugo</a> and
            <svg class="icon gdoc_heart"><use xlink:href="#gdoc_heart"></use></svg>
        </span>
        
        
    </div>
</footer>

    </div>

    




<script defer src="/jdk8-src-note/js/zh-cn.search.min.66b6c7df3c6f2d0291b704e6db2fe9e9a92262e2fc4e3539b6304773a4fed5a6.js"></script>



<script defer src="/jdk8-src-note/js/clipboard-27784b7376.min.js"></script>
<script defer src="/jdk8-src-note/js/clipboard-loader-f0b5fbd5f6.min.js"></script>


</body>
</html>
