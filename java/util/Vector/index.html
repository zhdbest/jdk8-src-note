<!DOCTYPE html>
<html lang="zh-cn" class="color-toggle-hidden">

<head>
    <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="color-scheme" content="light dark" />





    <meta name="description" content="1. protected Object[] elementData; 2. protected int elementCount; 3. protected int capacityIncrement; 4. private static final long serialVersionUID = -2767605614048989439L; 5. public Vector(int initialCapacity, int capacityIncrement) 6. public Vector(int initialCapacity) 7. public Vector() 8. public Vector(Collection&lt;? extends E&gt; c) 9. public synchronized void copyInto(Object[] anArray) 10. public synchronized void trimToSize() 11. public synchronized void ensureCapacity(int minCapacity) 12. private void ensureCapacityHelper(int minCapacity) 13. private static final int MAX_ARRAY_SIZE = Integer.">



    <title>Vector | JDK8源码阅读笔记</title>

    <link rel="icon" href="/jdk8-src-note/favicon/favicon-32x32.png" type="image/x-icon">

    <script src="/jdk8-src-note/js/darkmode-ce906ea916.min.js"></script>

<link rel="preload" as="font" href="/jdk8-src-note/fonts/Metropolis.woff2" type="font/woff2" crossorigin="anonymous">
<link rel="preload" as="font" href="/jdk8-src-note/fonts/LiberationSans.woff2" type="font/woff2" crossorigin="anonymous">

<link rel="preload" href="/jdk8-src-note/main-cc3cbe901b.min.css" as="style">
<link rel="stylesheet" href="/jdk8-src-note/main-cc3cbe901b.min.css" media="all">

<link rel="preload" href="/jdk8-src-note/mobile-249b801e7d.min.css" as="style">
<link rel="stylesheet" href="/jdk8-src-note/mobile-249b801e7d.min.css" media="screen and (max-width: 45rem)">

<link rel="preload" href="/jdk8-src-note/print-f79fc3e5d7.min.css" as="style">
<link rel="stylesheet" href="/jdk8-src-note/print-f79fc3e5d7.min.css" media="print">

<link rel="preload" href="/jdk8-src-note/custom.css" as="style">
<link rel="stylesheet" href="/jdk8-src-note/custom.css" media="all">



<!-- Made with Geekdoc theme https://github.com/thegeeklab/hugo-geekdoc -->

    

</head>

<body itemscope itemtype="https://schema.org/WebPage">
    
<!-- geekdoc include: sprites/abstractClass.svg -->
<svg  id="abstractClass" class="svg-sprite" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 16 16">
  <defs>
    <rect id="abstractclass-a" width="8" height="14"/>
  </defs>
  <g fill="none" fill-rule="evenodd">
    <path fill="#9AA7B0" fill-opacity=".8" d="M3 3.1055C1.764 4.3685 1 6.0935 1 8.0005 1 9.9065 1.764 11.6315 3 12.8945L3 3.1055zM13 3.1055L13 12.8945C14.236 11.6315 15 9.9065 15 8.0005 15 6.0935 14.236 4.3675 13 3.1055"/>
    <g transform="translate(4 1)">
      <mask id="abstractclass-b" fill="#fff">
        <use xlink:href="#abstractclass-a"/>
      </mask>
      <g mask="url(#abstractclass-b)">
        <g transform="translate(-4 -1)">
          <path fill="#40B6E0" fill-opacity=".6" d="M15,8 C15,11.866 11.866,15 8,15 C4.134,15 1,11.866 1,8 C1,4.134 4.134,1 8,1 C11.866,1 15,4.134 15,8"/>
          <path fill="#231F20" fill-opacity=".7" d="M5,4.28253174 C4.53,4.74153174 4.028,4.978 3.1,5 C2.061,5.022 1,4.2794 1,3.0004 C1,1.7124 1.971,1 3.1,1 C3.94833171,1 4.54833171,1.18475342 4.9,1.55426025 L5.5162,0.836730957 C4.8293999,0.270175195 4.28826904,0.0004 3.0982,0.0004 C1.3402,0.0004 0.0002,1.3584 0.0002,3.0004 C0.0002,4.6824 1.3642,6.0004 3.0022,6.0004 C4.29284668,6.0004 5.0232,5.5934 5.6162,4.9814 C5.2054,4.51548783 5,4.28253174 5,4.28253174 Z" transform="translate(5 5)"/>
        </g>
      </g>
    </g>
  </g>
</svg>


<!-- geekdoc include: sprites/class.svg -->
<svg id="class" class="svg-sprite" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16">
  <g fill="none" fill-rule="evenodd">
    <path fill="#40B6E0" fill-opacity=".6" d="M15,8 C15,11.866 11.866,15 8,15 C4.134,15 1,11.866 1,8 C1,4.134 4.134,1 8,1 C11.866,1 15,4.134 15,8"/>
    <path fill="#231F20" fill-opacity=".7" d="M5,4.28253174 C4.53,4.74153174 4.028,4.978 3.1,5 C2.061,5.022 1,4.2794 1,3.0004 C1,1.7124 1.971,1 3.1,1 C3.94833171,1 4.54833171,1.18475342 4.9,1.55426025 L5.5162,0.836730957 C4.8293999,0.270175195 4.28826904,0.0004 3.0982,0.0004 C1.3402,0.0004 0.0002,1.3584 0.0002,3.0004 C0.0002,4.6824 1.3642,6.0004 3.0022,6.0004 C4.29284668,6.0004 5.0232,5.5934 5.6162,4.9814 C5.2054,4.51548783 5,4.28253174 5,4.28253174 Z" transform="translate(5 5)"/>
  </g>
</svg>


<!-- geekdoc include: sprites/interface.svg -->
<svg  id="interface" class="svg-sprite" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16">
  <g fill="none" fill-rule="evenodd">
    <path fill="#62B543" fill-opacity=".6" d="M15,8 C15,11.866 11.866,15 8,15 C4.134,15 1,11.866 1,8 C1,4.134 4.134,1 8,1 C11.866,1 15,4.134 15,8"/>
    <polygon fill="#231F20" fill-opacity=".7" points="8.5 10 8.5 6 9.5 5.664 9.5 5 6.5 5 6.5 5.664 7.5 6 7.5 10 6.5 10.344 6.5 11 9.5 11 9.5 10.344"/>
  </g>
</svg>


<!-- geekdoc include: sprites/package.svg -->
<svg id="package" class="svg-sprite" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16">
  <path fill="#9AA7B0" fill-opacity=".8" fill-rule="evenodd" d="M6,10.4951 C4.896,10.4951 4.001,9.6001 4,8.4981 C3.999,7.3941 4.894,6.5001 5.997,6.5001 C7.102,6.5001 7.997,7.3941 7.998,8.4981 C7.999,9.6001 7.104,10.4951 6,10.4951 Z M7.984,4.0001 L6.696,2.7111 C6.305,2.3201 5.532,2.0001 4.979,2.0001 L1.051,2.0001 C1.023,2.0001 1,2.0231 1,2.0511 L1,13.0001 L15,13.0001 L15,4.0001 L7.984,4.0001 Z"/>
</svg>


<!-- geekdoc include: sprites/geekdoc.svg -->
<svg class="svg-sprite" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><symbol viewBox="-2.29 -2.29 28.57 28.57" id="gdoc_arrow_back" xmlns="http://www.w3.org/2000/svg"><path d="M24 10.526v2.947H5.755l8.351 8.421-2.105 2.105-12-12 12-12 2.105 2.105-8.351 8.421H24z"/></symbol><symbol viewBox="-2.29 -2.29 28.57 28.57" id="gdoc_arrow_left_alt" xmlns="http://www.w3.org/2000/svg"><path d="M5.965 10.526V6.035L0 12l5.965 5.965v-4.491H24v-2.947H5.965z"/></symbol><symbol viewBox="-2.29 -2.29 28.57 28.57" id="gdoc_arrow_right_alt" xmlns="http://www.w3.org/2000/svg"><path d="M18.035 10.526V6.035L24 12l-5.965 5.965v-4.491H0v-2.947h18.035z"/></symbol><symbol viewBox="-2.29 -2.29 32.57 32.57" id="gdoc_bitbucket" xmlns="http://www.w3.org/2000/svg"><path d="M15.905 13.355c.189 1.444-1.564 2.578-2.784 1.839-1.375-.602-1.375-2.784-.034-3.403 1.151-.705 2.818.223 2.818 1.564zm1.907-.361c-.309-2.44-3.076-4.056-5.328-3.042-1.426.636-2.389 2.148-2.32 3.747.086 2.097 2.08 3.815 4.176 3.626s3.729-2.234 3.472-4.331zm4.108-9.315c-.756-.997-2.045-1.169-3.179-1.358-3.214-.516-6.513-.533-9.727.034-1.066.172-2.269.361-2.939 1.323 1.1 1.031 2.664 1.186 4.073 1.358 2.544.327 5.156.344 7.699.017 1.426-.172 3.008-.309 4.073-1.375zm.979 17.788c-.481 1.684-.206 3.953-1.994 4.932-3.076 1.701-6.806 1.89-10.191 1.289-1.787-.327-3.884-.894-4.864-2.578-.43-1.65-.705-3.334-.98-5.018l.103-.275.309-.155c5.121 3.386 12.288 3.386 17.427 0 .808.241.206 1.22.189 1.805zM26.01 4.951c-.584 3.764-1.255 7.51-1.908 11.257-.189 1.1-1.255 1.719-2.148 2.183-3.214 1.615-6.96 1.89-10.483 1.512-2.389-.258-4.829-.894-6.771-2.389-.911-.705-.911-1.908-1.083-2.922-.602-3.523-1.289-7.046-1.719-10.604.206-1.547 1.942-2.217 3.231-2.698C6.848.654 8.686.362 10.508.19c3.884-.378 7.854-.241 11.618.859 1.341.395 2.784.945 3.695 2.097.412.533.275 1.203.189 1.805z"/></symbol><symbol viewBox="-2.29 -2.29 28.57 28.57" id="gdoc_bookmark" xmlns="http://www.w3.org/2000/svg"><path d="M15.268 4.392q.868 0 1.532.638t.664 1.506v17.463l-7.659-3.268-7.608 3.268V6.536q0-.868.664-1.506t1.532-.638h10.876zm4.34 14.144V4.392q0-.868-.638-1.532t-1.506-.664H6.537q0-.868.664-1.532T8.733 0h10.876q.868 0 1.532.664t.664 1.532v17.412z"/></symbol><symbol viewBox="-2.29 -2.29 32.57 32.57" id="gdoc_brightness_auto" xmlns="http://www.w3.org/2000/svg"><path d="M16.846 18.938h2.382L15.22 7.785h-2.44L8.772 18.938h2.382l.871-2.44h3.95zm7.087-9.062L27.999 14l-4.066 4.124v5.809h-5.809L14 27.999l-4.124-4.066H4.067v-5.809L.001 14l4.066-4.124V4.067h5.809L14 .001l4.124 4.066h5.809v5.809zm-11.385 4.937L14 10.282l1.452 4.531h-2.904z"/></symbol><symbol viewBox="-2.29 -2.29 32.57 32.57" id="gdoc_brightness_dark" xmlns="http://www.w3.org/2000/svg"><path d="M14 21.435q3.079 0 5.257-2.178T21.435 14t-2.178-5.257T14 6.565q-1.51 0-3.079.697 1.917.871 3.108 2.701T15.22 14t-1.191 4.037-3.108 2.701q1.568.697 3.079.697zm9.933-11.559L27.999 14l-4.066 4.124v5.809h-5.809L14 27.999l-4.124-4.066H4.067v-5.809L.001 14l4.066-4.124V4.067h5.809L14 .001l4.124 4.066h5.809v5.809z"/></symbol><symbol viewBox="-2.29 -2.29 32.57 32.57" id="gdoc_brightness_light" xmlns="http://www.w3.org/2000/svg"><path d="M14 21.435q3.079 0 5.257-2.178T21.435 14t-2.178-5.257T14 6.565 8.743 8.743 6.565 14t2.178 5.257T14 21.435zm9.933-3.311v5.809h-5.809L14 27.999l-4.124-4.066H4.067v-5.809L.001 14l4.066-4.124V4.067h5.809L14 .001l4.124 4.066h5.809v5.809L27.999 14z"/></symbol><symbol viewBox="-2.29 -2.29 32.57 32.57" id="gdoc_cloud_off" xmlns="http://www.w3.org/2000/svg"><path d="M9.023 10.5H7q-1.914 0-3.281 1.395t-1.367 3.309 1.367 3.281T7 19.852h11.375zM3.5 4.976l1.477-1.477L24.5 23.022l-1.477 1.477-2.352-2.297H6.999q-2.898 0-4.949-2.051t-2.051-4.949q0-2.844 1.969-4.867t4.758-2.133zm19.086 5.578q2.242.164 3.828 1.832T28 16.351q0 3.008-2.461 4.758l-1.695-1.695q1.805-.984 1.805-3.063 0-1.422-1.039-2.461t-2.461-1.039h-1.75v-.602q0-2.68-1.859-4.539t-4.539-1.859q-1.531 0-2.953.711l-1.75-1.695Q11.431 3.5 14.001 3.5q2.953 0 5.496 2.078t3.09 4.977z"/></symbol><symbol viewBox="-2.29 -2.29 32.57 32.57" id="gdoc_code" xmlns="http://www.w3.org/2000/svg"><path d="M9.917 24.5a1.75 1.75 0 10-3.501.001 1.75 1.75 0 003.501-.001zm0-21a1.75 1.75 0 10-3.501.001A1.75 1.75 0 009.917 3.5zm11.666 2.333a1.75 1.75 0 10-3.501.001 1.75 1.75 0 003.501-.001zm1.75 0a3.502 3.502 0 01-1.75 3.026c-.055 6.581-4.721 8.039-7.82 9.023-2.898.911-3.846 1.349-3.846 3.117v.474a3.502 3.502 0 011.75 3.026c0 1.932-1.568 3.5-3.5 3.5s-3.5-1.568-3.5-3.5c0-1.294.711-2.424 1.75-3.026V6.526A3.502 3.502 0 014.667 3.5c0-1.932 1.568-3.5 3.5-3.5s3.5 1.568 3.5 3.5a3.502 3.502 0 01-1.75 3.026v9.06c.93-.456 1.914-.766 2.807-1.039 3.391-1.075 5.323-1.878 5.359-5.687a3.502 3.502 0 01-1.75-3.026c0-1.932 1.568-3.5 3.5-3.5s3.5 1.568 3.5 3.5z"/></symbol><symbol viewBox="-2.29 -2.29 36.57 36.57" id="gdoc_date" xmlns="http://www.w3.org/2000/svg"><path d="M27.192 28.844V11.192H4.808v17.652h22.384zm0-25.689q1.277 0 2.253.976t.976 2.253v22.459q0 1.277-.976 2.216t-2.253.939H4.808q-1.352 0-2.291-.901t-.939-2.253V6.385q0-1.277.939-2.253t2.291-.976h1.577V.001h3.23v3.155h12.769V.001h3.23v3.155h1.577zm-3.155 11.267v3.155h-3.23v-3.155h3.23zm-6.46 0v3.155h-3.155v-3.155h3.155zm-6.384 0v3.155h-3.23v-3.155h3.23z"/></symbol><symbol viewBox="-2.29 -2.29 36.57 36.57" id="gdoc_download" xmlns="http://www.w3.org/2000/svg"><path d="M2.866 28.209h26.269v3.79H2.866v-3.79zm26.268-16.925L16 24.418 2.866 11.284h7.493V.001h11.283v11.283h7.493z"/></symbol><symbol viewBox="-2.29 -2.29 36.57 36.57" id="gdoc_email" xmlns="http://www.w3.org/2000/svg"><path d="M28.845 9.615v-3.23L16 14.422 3.155 6.385v3.23L16 17.577zm0-6.46q1.277 0 2.216.977T32 6.385v19.23q0 1.277-.939 2.253t-2.216.977H3.155q-1.277 0-2.216-.977T0 25.615V6.385q0-1.277.939-2.253t2.216-.977h25.69z"/></symbol><symbol viewBox="-2.29 -2.29 32.57 32.57" id="gdoc_git" xmlns="http://www.w3.org/2000/svg"><path d="M27.472 12.753L15.247.529a1.803 1.803 0 00-2.55 0l-2.84 2.84 2.137 2.137a2.625 2.625 0 013.501 3.501l3.499 3.499a2.625 2.625 0 11-1.237 1.237l-3.499-3.499c-.083.04-.169.075-.257.106v7.3a2.626 2.626 0 11-1.75 0v-7.3a2.626 2.626 0 01-1.494-3.607L8.62 4.606l-8.09 8.09a1.805 1.805 0 000 2.551l12.225 12.224a1.803 1.803 0 002.55 0l12.168-12.168a1.805 1.805 0 000-2.551z"/></symbol><symbol viewBox="-2.29 -2.29 36.57 36.57" id="gdoc_github" xmlns="http://www.w3.org/2000/svg"><path d="M16 .394c8.833 0 15.999 7.166 15.999 15.999 0 7.062-4.583 13.062-10.937 15.187-.813.146-1.104-.354-1.104-.771 0-.521.021-2.25.021-4.396 0-1.5-.5-2.458-1.083-2.958 3.562-.396 7.312-1.75 7.312-7.896 0-1.75-.625-3.167-1.646-4.291.167-.417.708-2.042-.167-4.25-1.333-.417-4.396 1.646-4.396 1.646a15.032 15.032 0 00-8 0S8.937 6.602 7.603 7.018c-.875 2.208-.333 3.833-.167 4.25-1.021 1.125-1.646 2.542-1.646 4.291 0 6.125 3.729 7.5 7.291 7.896-.458.417-.875 1.125-1.021 2.146-.917.417-3.25 1.125-4.646-1.333-.875-1.521-2.458-1.646-2.458-1.646-1.562-.021-.104.979-.104.979 1.042.479 1.771 2.333 1.771 2.333.938 2.854 5.396 1.896 5.396 1.896 0 1.333.021 2.583.021 2.979 0 .417-.292.917-1.104.771C4.582 29.455-.001 23.455-.001 16.393-.001 7.56 7.165.394 15.998.394zM6.063 23.372c.042-.083-.021-.187-.146-.25-.125-.042-.229-.021-.271.042-.042.083.021.187.146.25.104.062.229.042.271-.042zm.646.709c.083-.062.062-.208-.042-.333-.104-.104-.25-.146-.333-.062-.083.062-.062.208.042.333.104.104.25.146.333.062zm.625.937c.104-.083.104-.25 0-.396-.083-.146-.25-.208-.354-.125-.104.062-.104.229 0 .375s.271.208.354.146zm.875.875c.083-.083.042-.271-.083-.396-.146-.146-.333-.167-.417-.062-.104.083-.062.271.083.396.146.146.333.167.417.062zm1.187.521c.042-.125-.083-.271-.271-.333-.167-.042-.354.021-.396.146s.083.271.271.312c.167.062.354 0 .396-.125zm1.313.104c0-.146-.167-.25-.354-.229-.187 0-.333.104-.333.229 0 .146.146.25.354.229.187 0 .333-.104.333-.229zm1.208-.208c-.021-.125-.187-.208-.375-.187-.187.042-.312.167-.292.312.021.125.187.208.375.167s.312-.167.292-.292z"/></symbol><symbol viewBox="-2.29 -2.29 32.57 32.57" id="gdoc_gitlab" xmlns="http://www.w3.org/2000/svg"><path d="M1.629 11.034L14 26.888.442 17.048a1.09 1.09 0 01-.39-1.203l1.578-4.811zm7.217 0h10.309l-5.154 15.854zM5.753 1.475l3.093 9.559H1.63l3.093-9.559a.548.548 0 011.031 0zm20.618 9.559l1.578 4.811c.141.437-.016.922-.39 1.203l-13.558 9.84 12.371-15.854zm0 0h-7.216l3.093-9.559a.548.548 0 011.031 0z"/></symbol><symbol viewBox="-2.29 -2.29 36.57 36.57" id="gdoc_heart" xmlns="http://www.w3.org/2000/svg"><path d="M16 29.714a1.11 1.11 0 01-.786-.321L4.072 18.643c-.143-.125-4.071-3.714-4.071-8 0-5.232 3.196-8.357 8.535-8.357 3.125 0 6.053 2.464 7.464 3.857 1.411-1.393 4.339-3.857 7.464-3.857 5.339 0 8.535 3.125 8.535 8.357 0 4.286-3.928 7.875-4.089 8.035L16.785 29.392c-.214.214-.5.321-.786.321z"/></symbol><symbol viewBox="-2.29 -2.29 32.57 32.57" id="gdoc_keyborad_arrow_down" xmlns="http://www.w3.org/2000/svg"><path d="M3.281 5.36L14 16.079 24.719 5.36 28 8.641l-14 14-14-14z"/></symbol><symbol viewBox="-2.29 -2.29 36.57 36.57" id="gdoc_keyborad_arrow_left" xmlns="http://www.w3.org/2000/svg"><path d="M25.875 28.25L22.125 32 6.126 16.001 22.125.002l3.75 3.75-12.25 12.25z"/></symbol><symbol viewBox="-2.29 -2.29 36.57 36.57" id="gdoc_keyborad_arrow_right" xmlns="http://www.w3.org/2000/svg"><path d="M6.125 28.25L18.375 16 6.125 3.75 9.875 0l15.999 15.999L9.875 31.998z"/></symbol><symbol viewBox="-2.29 -2.29 36.57 36.57" id="gdoc_link" xmlns="http://www.w3.org/2000/svg"><path d="M24.037 7.963q3.305 0 5.634 2.366T32 16t-2.329 5.671-5.634 2.366h-6.46v-3.08h6.46q2.028 0 3.493-1.465t1.465-3.493-1.465-3.493-3.493-1.465h-6.46v-3.08h6.46zM9.615 17.578v-3.155h12.77v3.155H9.615zM3.005 16q0 2.028 1.465 3.493t3.493 1.465h6.46v3.08h-6.46q-3.305 0-5.634-2.366T0 16.001t2.329-5.671 5.634-2.366h6.46v3.08h-6.46q-2.028 0-3.493 1.465t-1.465 3.493z"/></symbol><symbol viewBox="-2.29 -2.29 36.57 36.57" id="gdoc_menu" xmlns="http://www.w3.org/2000/svg"><path d="M.001 5.334h31.998v3.583H.001V5.334zm0 12.416v-3.5h31.998v3.5H.001zm0 8.916v-3.583h31.998v3.583H.001z"/></symbol><symbol viewBox="-2.29 -2.29 32.57 32.57" id="gdoc_notification" xmlns="http://www.w3.org/2000/svg"><path d="M22.615 19.384l2.894 2.894v1.413H2.49v-1.413l2.894-2.894V12.25q0-3.365 1.716-5.856t4.745-3.231v-1.01q0-.875.606-1.514T13.999 0t1.548.639.606 1.514v1.01q3.029.74 4.745 3.231t1.716 5.856v7.134zM14 27.999q-1.211 0-2.053-.808t-.841-2.019h5.788q0 1.144-.875 1.986T14 27.999z"/></symbol><symbol viewBox="-2.29 -2.29 32.57 32.57" id="gdoc_path" xmlns="http://www.w3.org/2000/svg"><path d="M28 12.62h-9.793V8.414h-2.826v11.173h2.826v-4.206H28V26.62h-9.793v-4.206H12.62v-14H9.794v4.206H.001V1.381h9.793v4.206h8.413V1.381H28V12.62z"/></symbol><symbol viewBox="-2.29 -2.29 36.57 36.57" id="gdoc_person" xmlns="http://www.w3.org/2000/svg"><path d="M16 20.023q5.052 0 10.526 2.199t5.473 5.754v4.023H0v-4.023q0-3.555 5.473-5.754t10.526-2.199zM16 16q-3.275 0-5.614-2.339T8.047 8.047t2.339-5.661T16 0t5.614 2.386 2.339 5.661-2.339 5.614T16 16z"/></symbol><symbol viewBox="-2.29 -2.29 36.57 36.57" id="gdoc_search" xmlns="http://www.w3.org/2000/svg"><path d="M11.925 20.161q3.432 0 5.834-2.402t2.402-5.834-2.402-5.834-5.834-2.402-5.834 2.402-2.402 5.834 2.402 5.834 5.834 2.402zm10.981 0L32 29.255 29.255 32l-9.094-9.094v-1.458l-.515-.515q-3.26 2.831-7.721 2.831-4.976 0-8.45-3.432T.001 11.925t3.474-8.45 8.45-3.474 8.407 3.474 3.432 8.45q0 1.802-.858 4.075t-1.973 3.646l.515.515h1.458z"/></symbol><symbol viewBox="-2.29 -2.29 32.57 32.57" id="gdoc_shield" xmlns="http://www.w3.org/2000/svg"><path d="M22.167 15.166V3.5h-8.166v20.726c.93-.492 2.424-1.349 3.883-2.497 1.95-1.531 4.284-3.919 4.284-6.562zm3.499-13.999v14c0 7.674-10.737 12.523-11.192 12.724-.146.073-.31.109-.474.109s-.328-.036-.474-.109c-.456-.201-11.192-5.049-11.192-12.724v-14C2.334.529 2.863 0 3.501 0H24.5c.638 0 1.167.529 1.167 1.167z"/></symbol><symbol viewBox="-2.29 -2.29 32.57 32.57" id="gdoc_tags" xmlns="http://www.w3.org/2000/svg"><path d="M6.606 7.549c0-1.047-.84-1.887-1.887-1.887s-1.887.84-1.887 1.887.84 1.887 1.887 1.887 1.887-.84 1.887-1.887zm15.732 8.493c0 .501-.206.988-.546 1.327l-7.239 7.254c-.354.339-.84.546-1.342.546s-.988-.206-1.327-.546L1.342 14.066C.59 13.329 0 11.899 0 10.852V4.718a1.9 1.9 0 011.887-1.887h6.134c1.047 0 2.477.59 3.229 1.342L21.792 14.7c.339.354.546.84.546 1.342zm5.661 0c0 .501-.206.988-.546 1.327l-7.239 7.254c-.354.339-.84.546-1.342.546-.767 0-1.15-.354-1.651-.87l6.93-6.93c.339-.339.546-.826.546-1.327s-.206-.988-.546-1.342L13.609 4.173c-.752-.752-2.182-1.342-3.229-1.342h3.303c1.047 0 2.477.59 3.229 1.342L27.454 14.7c.339.354.546.84.546 1.342z"/></symbol></svg>



    <div class="wrapper ">
        <input type="checkbox" class="hidden" id="menu-control" />
        
        <header class="gdoc-header">
    <div class="container flex align-center justify-between">
        
        <label for="menu-control" class="gdoc-nav__control">
            <svg class="icon gdoc_menu"><use xlink:href="#gdoc_menu"></use></svg>
            <svg class="icon gdoc_arrow_back"><use xlink:href="#gdoc_arrow_back"></use></svg>
        </label>
        
        <a class="gdoc-header__link" href="https://hongmao.run/jdk8-src-note/">
            <span class="gdoc-brand flex align-center">
                <img class="gdoc-brand__img" src="/jdk8-src-note/brand.svg" alt="">
                JDK8源码阅读笔记
            </span>
        </a>
        <span id="gdoc-dark-mode">
            <svg class="icon gdoc_brightness_dark"><use xlink:href="#gdoc_brightness_dark"></use></svg>
            <svg class="icon gdoc_brightness_light"><use xlink:href="#gdoc_brightness_light"></use></svg>
            <svg class="icon gdoc_brightness_auto"><use xlink:href="#gdoc_brightness_auto"></use></svg>
        </span>
    </div>
</header>


        <main class="container flex flex-even">
            
            <aside class="gdoc-nav">
                <nav>
    
    <div class="gdoc-search">
        <svg class="icon gdoc_search"><use xlink:href="#gdoc_search"></use></svg>
        <input type="text" id="gdoc-search-input" class="gdoc-search__input" placeholder="Search..."
            aria-label="Search" maxlength="64" />
        <div class="gdoc-search__spinner spinner hidden"></div>
        <ul id="gdoc-search-results" class="gdoc-search__list"></ul>
    </div>



    <section class="gdoc-nav--main">
        <h2>Navigation</h2>
        
            




<ul class="gdoc-nav__list">

    
    

    <li>
        
        
            
            
            
            
            
            
            
            
            

            
            <span class="flex">
                <svg class="icon package"><use xlink:href="#package"></use></svg>
                <a href="/jdk8-src-note/java/"
                    class="gdoc-nav__entry ">
                    java
                </a>
            </span>
            
        

        
            



<ul class="gdoc-nav__list">

    
    

    <li>
        
        
            
            
            
            
            
            
            
            
            

            
            <span class="flex">
                <svg class="icon package"><use xlink:href="#package"></use></svg>
                <a href="/jdk8-src-note/java/util/"
                    class="gdoc-nav__entry ">
                    util
                </a>
            </span>
            
        

        
            



<ul class="gdoc-nav__list">

    
    

    <li>
        
        
            
            
            
            
            
            
            
            
            

            
            <span class="flex">
                <svg class="icon abstractClass"><use xlink:href="#abstractClass"></use></svg>
                <a href="/jdk8-src-note/java/util/AbstractCollection/"
                    class="gdoc-nav__entry ">
                    AbstractCollection
                </a>
            </span>
            
        

        
    </li>


    
    

    <li>
        
        
            
            
            
            
            
            
            
            
            

            
            <span class="flex">
                <svg class="icon abstractClass"><use xlink:href="#abstractClass"></use></svg>
                <a href="/jdk8-src-note/java/util/AbstractList/"
                    class="gdoc-nav__entry ">
                    AbstractList
                </a>
            </span>
            
        

        
    </li>


    
    

    <li>
        
        
            
            
            
            
            
            
            
            
            

            
            <span class="flex">
                <svg class="icon abstractClass"><use xlink:href="#abstractClass"></use></svg>
                <a href="/jdk8-src-note/java/util/AbstractSequentialList/"
                    class="gdoc-nav__entry ">
                    AbstractSequentialList
                </a>
            </span>
            
        

        
    </li>


    
    

    <li>
        
        
            
            
            
            
            
            
            
            
            

            
            <span class="flex">
                <svg class="icon class"><use xlink:href="#class"></use></svg>
                <a href="/jdk8-src-note/java/util/ArrayList/"
                    class="gdoc-nav__entry ">
                    ArrayList
                </a>
            </span>
            
        

        
    </li>


    
    

    <li>
        
        
            
            
            
            
            
            
            
            
            

            
            <span class="flex">
                <svg class="icon interface"><use xlink:href="#interface"></use></svg>
                <a href="/jdk8-src-note/java/util/Collection/"
                    class="gdoc-nav__entry ">
                    Collection
                </a>
            </span>
            
        

        
    </li>


    
    

    <li>
        
        
            
            
            
            
            
            
            
            
            

            
            <span class="flex">
                <svg class="icon interface"><use xlink:href="#interface"></use></svg>
                <a href="/jdk8-src-note/java/util/Deque/"
                    class="gdoc-nav__entry ">
                    Deque
                </a>
            </span>
            
        

        
    </li>


    
    

    <li>
        
        
            
            
            
            
            
            
            
            
            

            
            <span class="flex">
                <svg class="icon interface"><use xlink:href="#interface"></use></svg>
                <a href="/jdk8-src-note/java/util/Iterator/"
                    class="gdoc-nav__entry ">
                    Iterator
                </a>
            </span>
            
        

        
    </li>


    
    

    <li>
        
        
            
            
            
            
            
            
            
            
            

            
            <span class="flex">
                <svg class="icon class"><use xlink:href="#class"></use></svg>
                <a href="/jdk8-src-note/java/util/LinkedList/"
                    class="gdoc-nav__entry ">
                    LinkedList
                </a>
            </span>
            
        

        
    </li>


    
    

    <li>
        
        
            
            
            
            
            
            
            
            
            

            
            <span class="flex">
                <svg class="icon interface"><use xlink:href="#interface"></use></svg>
                <a href="/jdk8-src-note/java/util/List/"
                    class="gdoc-nav__entry ">
                    List
                </a>
            </span>
            
        

        
    </li>


    
    

    <li>
        
        
            
            
            
            
            
            
            
            
            

            
            <span class="flex">
                <svg class="icon interface"><use xlink:href="#interface"></use></svg>
                <a href="/jdk8-src-note/java/util/ListIterator/"
                    class="gdoc-nav__entry ">
                    ListIterator
                </a>
            </span>
            
        

        
    </li>


    
    

    <li>
        
        
            
            
            
            
            
            
            
            
            

            
            <span class="flex">
                <svg class="icon interface"><use xlink:href="#interface"></use></svg>
                <a href="/jdk8-src-note/java/util/Map/"
                    class="gdoc-nav__entry ">
                    Map
                </a>
            </span>
            
        

        
    </li>


    
    

    <li>
        
        
            
            
            
            
            
            
            
            
            

            
            <span class="flex">
                <svg class="icon interface"><use xlink:href="#interface"></use></svg>
                <a href="/jdk8-src-note/java/util/Queue/"
                    class="gdoc-nav__entry ">
                    Queue
                </a>
            </span>
            
        

        
    </li>


    
    

    <li>
        
        
            
            
            
            
            
            
            
            
            

            
            <span class="flex">
                <svg class="icon interface"><use xlink:href="#interface"></use></svg>
                <a href="/jdk8-src-note/java/util/RandomAccess/"
                    class="gdoc-nav__entry ">
                    RandomAccess
                </a>
            </span>
            
        

        
    </li>


    
    

    <li>
        
        
            
            
            
            
            
            
            
            
            

            
            <span class="flex">
                <svg class="icon class"><use xlink:href="#class"></use></svg>
                <a href="/jdk8-src-note/java/util/Vector/"
                    class="gdoc-nav__entry is-active">
                    Vector
                </a>
            </span>
            
        

        
    </li>


</ul>

        
    </li>


</ul>

        
    </li>


</ul>





        
    </section>

    <section class="gdoc-nav--more">
        
    </section>
</nav>

            </aside>
            

            <div class="gdoc-page">
                
    


    






<div class="gdoc-page__header flex flex-wrap
     justify-between 
     hidden-mobile 
    " itemprop="breadcrumb">
    
    <div>
        <svg class="icon gdoc_path hidden-mobile"><use xlink:href="#gdoc_path"></use></svg>
        <ol class="breadcrumb" itemscope itemtype="https://schema.org/BreadcrumbList">
            
            
            
            
    
    
        
        
        
        
    
    
        
        
        
        
    
    
        
        
        
        
    
    
        <li itemprop='itemListElement' itemscope itemtype='https://schema.org/ListItem'><a itemscope itemtype='https://schema.org/WebPage' itemprop='item' itemid='/jdk8-src-note/' href='/jdk8-src-note/'><span itemprop='name'>JDK8源码阅读笔记</span></a><meta itemprop='position' content='2' /></li><li> / </li><li itemprop='itemListElement' itemscope itemtype='https://schema.org/ListItem'><a itemscope itemtype='https://schema.org/WebPage' itemprop='item' itemid='/jdk8-src-note/java/' href='/jdk8-src-note/java/'><span itemprop='name'>java</span></a><meta itemprop='position' content='3' /></li><li> / </li><li itemprop='itemListElement' itemscope itemtype='https://schema.org/ListItem'><a itemscope itemtype='https://schema.org/WebPage' itemprop='item' itemid='/jdk8-src-note/java/util/' href='/jdk8-src-note/java/util/'><span itemprop='name'>util</span></a><meta itemprop='position' content='4' /></li><li> / </li><li itemprop='itemListElement' itemscope itemtype='https://schema.org/ListItem'><span itemprop='name'>Vector</span><meta itemprop='position' content='5' /></li>
    

    

    

    

        </ol>
    </div>
    
    
</div>


    <article class="gdoc-markdown gdoc-markdown__align--left">
        <h1>Vector</h1>
        <hr>



  <div class="gdoc-toc gdoc-toc__level--6"><nav id="TableOfContents">
  <ul>
    <li><a href="#1-protected-object-elementdata">1. protected Object[] elementData;</a></li>
    <li><a href="#2-protected-int-elementcount">2. protected int elementCount;</a></li>
    <li><a href="#3-protected-int-capacityincrement">3. protected int capacityIncrement;</a></li>
    <li><a href="#4-private-static-final-long-serialversionuid---2767605614048989439l">4. private static final long serialVersionUID = -2767605614048989439L;</a></li>
    <li><a href="#5-public-vectorint-initialcapacity-int-capacityincrement">5. public Vector(int initialCapacity, int capacityIncrement)</a></li>
    <li><a href="#6-public-vectorint-initialcapacity">6. public Vector(int initialCapacity)</a></li>
    <li><a href="#7-public-vector">7. public Vector()</a></li>
    <li><a href="#8-public-vectorcollection-extends-e-c">8. public Vector(Collection&lt;? extends E&gt; c)</a></li>
    <li><a href="#9-public-synchronized-void-copyintoobject-anarray">9. public synchronized void copyInto(Object[] anArray)</a></li>
    <li><a href="#10-public-synchronized-void-trimtosize">10. public synchronized void trimToSize()</a></li>
    <li><a href="#11-public-synchronized-void-ensurecapacityint-mincapacity">11. public synchronized void ensureCapacity(int minCapacity)</a></li>
    <li><a href="#12-private-void-ensurecapacityhelperint-mincapacity">12. private void ensureCapacityHelper(int minCapacity)</a></li>
    <li><a href="#13-private-static-final-int-max_array_size--integermax_value---8">13. private static final int MAX_ARRAY_SIZE = Integer.MAX_VALUE - 8;</a></li>
    <li><a href="#14-private-void-growint-mincapacity">14. private void grow(int minCapacity)</a></li>
    <li><a href="#15-private-static-int-hugecapacityint-mincapacity">15. private static int hugeCapacity(int minCapacity)</a></li>
    <li><a href="#16-public-synchronized-void-setsizeint-newsize">16. public synchronized void setSize(int newSize)</a></li>
    <li><a href="#17-public-synchronized-int-capacity">17. public synchronized int capacity()</a></li>
    <li><a href="#18-public-synchronized-int-size">18. public synchronized int size()</a></li>
    <li><a href="#19-public-synchronized-boolean-isempty">19. public synchronized boolean isEmpty()</a></li>
    <li><a href="#20-public-enumerationlte-elements">20. public Enumeration&lt;E&gt; elements()</a></li>
    <li><a href="#21-public-boolean-containsobject-o">21. public boolean contains(Object o)</a></li>
    <li><a href="#22-public-int-indexofobject-o">22. public int indexOf(Object o)</a></li>
    <li><a href="#23-public-synchronized-int-indexofobject-o-int-index">23. public synchronized int indexOf(Object o, int index)</a></li>
    <li><a href="#24-public-synchronized-int-lastindexofobject-o">24. public synchronized int lastIndexOf(Object o)</a></li>
    <li><a href="#25-public-synchronized-int-lastindexofobject-o-int-index">25. public synchronized int lastIndexOf(Object o, int index)</a></li>
    <li><a href="#26-public-synchronized-e-elementatint-index">26. public synchronized E elementAt(int index)</a></li>
    <li><a href="#27-public-synchronized-e-firstelement">27. public synchronized E firstElement()</a></li>
    <li><a href="#28-public-synchronized-e-lastelement">28. public synchronized E lastElement()</a></li>
    <li><a href="#29-public-synchronized-void-setelementate-obj-int-index">29. public synchronized void setElementAt(E obj, int index)</a></li>
    <li><a href="#30-public-synchronized-void-removeelementatint-index">30. public synchronized void removeElementAt(int index)</a></li>
    <li><a href="#31-public-synchronized-void-insertelementate-obj-int-index">31. public synchronized void insertElementAt(E obj, int index)</a></li>
    <li><a href="#32-public-synchronized-void-addelemente-obj">32. public synchronized void addElement(E obj)</a></li>
    <li><a href="#33-public-synchronized-boolean-removeelementobject-obj">33. public synchronized boolean removeElement(Object obj)</a></li>
    <li><a href="#34-public-synchronized-void-removeallelements">34. public synchronized void removeAllElements()</a></li>
    <li><a href="#35-public-synchronized-object-clone">35. public synchronized Object clone()</a></li>
    <li><a href="#36-public-synchronized-object-toarray">36. public synchronized Object[] toArray()</a></li>
    <li><a href="#37-public-synchronized-ltt-t-toarrayt-a">37. public synchronized &lt;T&gt; T[] toArray(T[] a)</a></li>
    <li><a href="#38-e-elementdataint-index">38. E elementData(int index)</a></li>
    <li><a href="#39-public-synchronized-e-getint-index">39. public synchronized E get(int index)</a></li>
    <li><a href="#40-public-synchronized-e-setint-index-e-element">40. public synchronized E set(int index, E element)</a></li>
    <li><a href="#41-public-synchronized-boolean-adde-e">41. public synchronized boolean add(E e)</a></li>
    <li><a href="#42-public-boolean-removeobject-o">42. public boolean remove(Object o)</a></li>
    <li><a href="#43-public-void-addint-index-e-element">43. public void add(int index, E element)</a></li>
    <li><a href="#44-public-synchronized-e-removeint-index">44. public synchronized E remove(int index)</a></li>
    <li><a href="#45-public-void-clear">45. public void clear()</a></li>
    <li><a href="#46-public-synchronized-boolean-containsallcollection-c">46. public synchronized boolean containsAll(Collection&lt;?&gt; c)</a></li>
    <li><a href="#47-public-synchronized-boolean-addallcollection-extends-e-c">47. public synchronized boolean addAll(Collection&lt;? extends E&gt; c)</a></li>
    <li><a href="#48-public-synchronized-boolean-removeallcollection-c">48. public synchronized boolean removeAll(Collection&lt;?&gt; c)</a></li>
    <li><a href="#49-public-synchronized-boolean-retainallcollection-c">49. public synchronized boolean retainAll(Collection&lt;?&gt; c)</a></li>
    <li><a href="#50-public-synchronized-boolean-addallint-index-collection-extends-e-c">50. public synchronized boolean addAll(int index, Collection&lt;? extends E&gt; c)</a></li>
    <li><a href="#51-public-synchronized-boolean-equalsobject-o">51. public synchronized boolean equals(Object o)</a></li>
    <li><a href="#52-public-synchronized-int-hashcode">52. public synchronized int hashCode()</a></li>
    <li><a href="#53-public-synchronized-string-tostring">53. public synchronized String toString()</a></li>
    <li><a href="#54-public-synchronized-listlte-sublistint-fromindex-int-toindex">54. public synchronized List&lt;E&gt; subList(int fromIndex, int toIndex)</a></li>
    <li><a href="#55-protected-synchronized-void-removerangeint-fromindex-int-toindex">55. protected synchronized void removeRange(int fromIndex, int toIndex)</a></li>
    <li><a href="#56-private-void-readobjectobjectinputstream-in--throws-ioexception-classnotfoundexception">56. private void readObject(ObjectInputStream in)  throws IOException, ClassNotFoundException</a></li>
    <li><a href="#57-private-void-writeobjectjavaioobjectoutputstream-s-throws-javaioioexception">57. private void writeObject(java.io.ObjectOutputStream s) throws java.io.IOException</a></li>
    <li><a href="#58-public-synchronized-listiteratorlte-listiteratorint-index">58. public synchronized ListIterator&lt;E&gt; listIterator(int index)</a></li>
    <li><a href="#59-public-synchronized-listiteratorlte-listiterator">59. public synchronized ListIterator&lt;E&gt; listIterator()</a></li>
    <li><a href="#60-public-synchronized-iteratorlte-iterator">60. public synchronized Iterator&lt;E&gt; iterator()</a></li>
    <li><a href="#61-private-class-itr-implements-iteratorlte">61. private class Itr implements Iterator&lt;E&gt;</a>
      <ul>
        <li><a href="#611-int-cursor">61.1 int cursor;</a></li>
        <li><a href="#612-int-lastret---1">61.2 int lastRet = -1;</a></li>
        <li><a href="#613-int-expectedmodcount--modcount">61.3 int expectedModCount = modCount;</a></li>
        <li><a href="#614-public-boolean-hasnext">61.4 public boolean hasNext()</a></li>
        <li><a href="#615-public-e-next">61.5 public E next()</a></li>
        <li><a href="#616-public-void-remove">61.6 public void remove()</a></li>
        <li><a href="#617-public-void-foreachremainingconsumer-super-e-action">61.7 public void forEachRemaining(Consumer&lt;? super E&gt; action)</a></li>
        <li><a href="#618-final-void-checkforcomodification">61.8 final void checkForComodification()</a></li>
      </ul>
    </li>
    <li><a href="#62-final-class-listitr-extends-itr-implements-listiteratorlte">62. final class ListItr extends Itr implements ListIterator&lt;E&gt;</a>
      <ul>
        <li><a href="#621-listitrint-index">62.1 ListItr(int index)</a></li>
        <li><a href="#622-public-boolean-hasprevious">62.2 public boolean hasPrevious()</a></li>
        <li><a href="#623-public-int-nextindex">62.3 public int nextIndex()</a></li>
        <li><a href="#624-public-int-previousindex">62.4 public int previousIndex()</a></li>
        <li><a href="#625-public-e-previous">62.5 public E previous()</a></li>
        <li><a href="#626-public-void-sete-e">62.6 public void set(E e)</a></li>
        <li><a href="#627-public-void-adde-e">62.7 public void add(E e)</a></li>
      </ul>
    </li>
    <li><a href="#63-public-synchronized-void-foreachconsumer-super-e-action">63. public synchronized void forEach(Consumer&lt;? super E&gt; action)</a></li>
    <li><a href="#64-public-synchronized-boolean-removeifpredicate-super-e-filter">64. public synchronized boolean removeIf(Predicate&lt;? super E&gt; filter)</a></li>
    <li><a href="#65-public-synchronized-void-replaceallunaryoperatorlte-operator">65. public synchronized void replaceAll(UnaryOperator&lt;E&gt; operator)</a></li>
    <li><a href="#66-public-synchronized-void-sortcomparator-super-e-c">66. public synchronized void sort(Comparator&lt;? super E&gt; c)</a></li>
    <li><a href="#67-public-spliteratorlte-spliterator">67. public Spliterator&lt;E&gt; spliterator()</a></li>
    <li><a href="#68-static-final-class-vectorspliteratorlte-implements-spliteratorlte">68. static final class VectorSpliterator&lt;E&gt; implements Spliterator&lt;E&gt;</a>
      <ul>
        <li><a href="#681-private-final-vectorlte-list">68.1 private final Vector&lt;E&gt; list;</a></li>
        <li><a href="#682-private-object-array">68.2 private Object[] array;</a></li>
        <li><a href="#683-private-int-index">68.3 private int index;</a></li>
        <li><a href="#684-private-int-fence">68.4 private int fence;</a></li>
        <li><a href="#685-private-int-expectedmodcount">68.5 private int expectedModCount;</a></li>
        <li><a href="#686-vectorspliteratorvectorlte-list-object-array-int-origin-int-fence-int-expectedmodcount">68.6 VectorSpliterator(Vector&lt;E&gt; list, Object[] array, int origin, int fence, int expectedModCount)</a></li>
        <li><a href="#687-private-int-getfence">68.7 private int getFence()</a></li>
        <li><a href="#688-public-spliteratorlte-trysplit">68.8 public Spliterator&lt;E&gt; trySplit()</a></li>
        <li><a href="#689-public-boolean-tryadvanceconsumer-super-e-action">68.9 public boolean tryAdvance(Consumer&lt;? super E&gt; action)</a></li>
        <li><a href="#6810-public-void-foreachremainingconsumer-super-e-action">68.10 public void forEachRemaining(Consumer&lt;? super E&gt; action)</a></li>
        <li><a href="#6811-public-long-estimatesize">68.11 public long estimateSize()</a></li>
        <li><a href="#6812-public-int-characteristics">68.12 public int characteristics()</a></li>
      </ul></nav><hr></div>



<div style='text-align: center'>
    <img src='https://img.hongmao.run/blog/2021/09/Vector.png' width='70%' alt=''>
</div>


<hr>
<p><code>Vector</code>类实现了一个可增长的对象数组。像数组一样，它包含可以使用整数索引访问的组件。但是，<code>Vector</code>的大小可以根据需要增加或缩小，以在<code>Vector</code>创建后能够添加和删除项目。</p>
<p>每个vector都尝试通过维护一个<code>capacity</code>和一个<code>capacityIncrement</code>来优化存储管理。<code>capacity</code>始终至少与vector大小一样大，通常它会更大，因为随着组件添加到vector中，vector的存储以块的形式增加<code>capacityIncrement</code>的大小。一个应用程序可以在插入大量组件之前增加一个vector的容量，这将减少增量重新分配的次数。</p>
<p>此类的<code>iterator</code>和<code>listIterator</code>方法返回的迭代器是“快速失败”的：如果在创建迭代器后的任何时间对vector进行结构上的修改，除了通过迭代器自己的<code>remove</code>或<code>add</code>方法之外，迭代器将抛出一个<code>ConcurrentModificationException</code>。因此，面对并发修改，迭代器快速而干净地失败，而不是在未来不确定的时间冒任意、不确定行为的风险。<code>elements</code>方法返回的<code>Enumeration</code>不是快速失败的。</p>
<p>请注意，无法保证迭代器的快速失败行为，因为一般而言，在存在非同步地并发修改的情况下不可能做出任何严格保证。快速失败的迭代器会尽最大努力抛出<code>ConcurrentModificationException</code>。因此，编写一个依赖于这个异常来保证其正确性的程序是错误的：迭代器的快速失败行为应该只用于检测错误。</p>
<p>从 Java 2 平台 v1.2 开始，该类经过改造实现了<code>List</code>接口，使其成为“Java 集合框架”的成员。与新的集合实现不同，<code>Vector</code>是同步的。如果不需要线程安全的实现，建议使用<code>ArrayList</code>代替<code>Vector</code>。</p>
<hr>
<div class="gdoc-page__anchorwrap">
    <h1 id="1-protected-object-elementdata">
        1. protected Object[] elementData;
        <a data-clipboard-text="https://hongmao.run/jdk8-src-note/java/util/Vector/#1-protected-object-elementdata" class="gdoc-page__anchor gdoc-page__anchor--right clip" aria-label="Anchor 1. protected Object[] elementData;" href="#1-protected-object-elementdata">
            <svg class="icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
        </a>
    </h1>
</div><p>存储vector组件的数组缓冲区。vector的容量是这个数组缓冲区的长度，并且至少足够包含vector的所有元素。</p>
<p><code>Vector</code>中最后一个元素之后的任何数组元素都为空。</p>
<hr>
<div class="gdoc-page__anchorwrap">
    <h1 id="2-protected-int-elementcount">
        2. protected int elementCount;
        <a data-clipboard-text="https://hongmao.run/jdk8-src-note/java/util/Vector/#2-protected-int-elementcount" class="gdoc-page__anchor gdoc-page__anchor--right clip" aria-label="Anchor 2. protected int elementCount;" href="#2-protected-int-elementcount">
            <svg class="icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
        </a>
    </h1>
</div><p>此<code>Vector</code>对象中的有效组件数。组件<code>elementData[0]</code>到<code>elementData[elementCount-1]</code>是实际的条目。</p>
<hr>
<div class="gdoc-page__anchorwrap">
    <h1 id="3-protected-int-capacityincrement">
        3. protected int capacityIncrement;
        <a data-clipboard-text="https://hongmao.run/jdk8-src-note/java/util/Vector/#3-protected-int-capacityincrement" class="gdoc-page__anchor gdoc-page__anchor--right clip" aria-label="Anchor 3. protected int capacityIncrement;" href="#3-protected-int-capacityincrement">
            <svg class="icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
        </a>
    </h1>
</div><p>当vector的大小要变得大于其容量时，vector的容量自动增加的量。如果容量增量小于或等于零，则每次需要增长时，vector的容量都会增加一倍。</p>
<hr>
<div class="gdoc-page__anchorwrap">
    <h1 id="4-private-static-final-long-serialversionuid---2767605614048989439l">
        4. private static final long serialVersionUID = -2767605614048989439L;
        <a data-clipboard-text="https://hongmao.run/jdk8-src-note/java/util/Vector/#4-private-static-final-long-serialversionuid---2767605614048989439l" class="gdoc-page__anchor gdoc-page__anchor--right clip" aria-label="Anchor 4. private static final long serialVersionUID = -2767605614048989439L;" href="#4-private-static-final-long-serialversionuid---2767605614048989439l">
            <svg class="icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
        </a>
    </h1>
</div><p>使用 JDK 1.0.2 中的 <code>serialVersionUID</code> 实现互通性。</p>
<hr>
<div class="gdoc-page__anchorwrap">
    <h1 id="5-public-vectorint-initialcapacity-int-capacityincrement">
        5. public Vector(int initialCapacity, int capacityIncrement)
        <a data-clipboard-text="https://hongmao.run/jdk8-src-note/java/util/Vector/#5-public-vectorint-initialcapacity-int-capacityincrement" class="gdoc-page__anchor gdoc-page__anchor--right clip" aria-label="Anchor 5. public Vector(int initialCapacity, int capacityIncrement)" href="#5-public-vectorint-initialcapacity-int-capacityincrement">
            <svg class="icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
        </a>
    </h1>
</div><p>构造一个具有指定初始容量和容量增量的空vector。</p>
<p>其源码如下：</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2"><code class="language-java" data-lang="java"><span style="color:#a90d91">public</span> <span style="color:#000">Vector</span><span style="color:#000">(</span><span style="color:#a90d91">int</span> <span style="color:#000">initialCapacity</span><span style="color:#000">,</span> <span style="color:#a90d91">int</span> <span style="color:#000">capacityIncrement</span><span style="color:#000">)</span> <span style="color:#000">{</span>
		<span style="color:#177500">// 调用AbstractList()
</span><span style="color:#177500"></span>    <span style="color:#a90d91">super</span><span style="color:#000">();</span>
		<span style="color:#177500">// 初始容量不可小于0
</span><span style="color:#177500"></span>    <span style="color:#a90d91">if</span> <span style="color:#000">(</span><span style="color:#000">initialCapacity</span> <span style="color:#000">&lt;</span> <span style="color:#000">0</span><span style="color:#000">)</span>
        <span style="color:#a90d91">throw</span> <span style="color:#a90d91">new</span> <span style="color:#000">IllegalArgumentException</span><span style="color:#000">(</span><span style="color:#c41a16">&#34;Illegal Capacity: &#34;</span><span style="color:#000">+</span>
                                           <span style="color:#000">initialCapacity</span><span style="color:#000">);</span>
		<span style="color:#177500">// 初始化组件数组，也即元素数组
</span><span style="color:#177500"></span>    <span style="color:#a90d91">this</span><span style="color:#000">.</span><span style="color:#836c28">elementData</span> <span style="color:#000">=</span> <span style="color:#a90d91">new</span> <span style="color:#000">Object</span><span style="color:#000">[</span><span style="color:#000">initialCapacity</span><span style="color:#000">];</span>
		<span style="color:#177500">// 设定容量增量
</span><span style="color:#177500"></span>    <span style="color:#a90d91">this</span><span style="color:#000">.</span><span style="color:#836c28">capacityIncrement</span> <span style="color:#000">=</span> <span style="color:#000">capacityIncrement</span><span style="color:#000">;</span>
<span style="color:#000">}</span>
</code></pre></div><hr>
<div class="gdoc-page__anchorwrap">
    <h1 id="6-public-vectorint-initialcapacity">
        6. public Vector(int initialCapacity)
        <a data-clipboard-text="https://hongmao.run/jdk8-src-note/java/util/Vector/#6-public-vectorint-initialcapacity" class="gdoc-page__anchor gdoc-page__anchor--right clip" aria-label="Anchor 6. public Vector(int initialCapacity)" href="#6-public-vectorint-initialcapacity">
            <svg class="icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
        </a>
    </h1>
</div><p>构造一个具有指定初始容量且容量增量为零的空vector。</p>
<p>源码如下：</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2"><code class="language-java" data-lang="java"><span style="color:#a90d91">public</span> <span style="color:#000">Vector</span><span style="color:#000">(</span><span style="color:#a90d91">int</span> <span style="color:#000">initialCapacity</span><span style="color:#000">)</span> <span style="color:#000">{</span>
    <span style="color:#a90d91">this</span><span style="color:#000">(</span><span style="color:#000">initialCapacity</span><span style="color:#000">,</span> <span style="color:#000">0</span><span style="color:#000">);</span>
<span style="color:#000">}</span>
</code></pre></div><hr>
<div class="gdoc-page__anchorwrap">
    <h1 id="7-public-vector">
        7. public Vector()
        <a data-clipboard-text="https://hongmao.run/jdk8-src-note/java/util/Vector/#7-public-vector" class="gdoc-page__anchor gdoc-page__anchor--right clip" aria-label="Anchor 7. public Vector()" href="#7-public-vector">
            <svg class="icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
        </a>
    </h1>
</div><p>构造一个空vector，使其内部数据数组的大小为<code>10</code>并且其标准容量增量为零。</p>
<p>源码如下：</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2"><code class="language-java" data-lang="java"><span style="color:#a90d91">public</span> <span style="color:#000">Vector</span><span style="color:#000">()</span> <span style="color:#000">{</span>
    <span style="color:#a90d91">this</span><span style="color:#000">(</span><span style="color:#000">10</span><span style="color:#000">);</span>
<span style="color:#000">}</span>
</code></pre></div><hr>
<div class="gdoc-page__anchorwrap">
    <h1 id="8-public-vectorcollection-extends-e-c">
        8. public Vector(Collection&lt;? extends E&gt; c)
        <a data-clipboard-text="https://hongmao.run/jdk8-src-note/java/util/Vector/#8-public-vectorcollection-extends-e-c" class="gdoc-page__anchor gdoc-page__anchor--right clip" aria-label="Anchor 8. public Vector(Collection&lt;? extends E&gt; c)" href="#8-public-vectorcollection-extends-e-c">
            <svg class="icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
        </a>
    </h1>
</div><p>构造一个包含指定集合元素的vector，按照集合的迭代器返回的顺序。</p>
<p>源码如下：</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2"><code class="language-java" data-lang="java"><span style="color:#a90d91">public</span> <span style="color:#000">Vector</span><span style="color:#000">(</span><span style="color:#000">Collection</span><span style="color:#000">&lt;?</span> <span style="color:#a90d91">extends</span> <span style="color:#000">E</span><span style="color:#000">&gt;</span> <span style="color:#000">c</span><span style="color:#000">)</span> <span style="color:#000">{</span>
		<span style="color:#177500">// 将参数中给定集合转化为数组
</span><span style="color:#177500"></span>    <span style="color:#000">Object</span><span style="color:#000">[]</span> <span style="color:#000">a</span> <span style="color:#000">=</span> <span style="color:#000">c</span><span style="color:#000">.</span><span style="color:#836c28">toArray</span><span style="color:#000">();</span>
		<span style="color:#177500">// 数组长度即本Vector实例的元素数量
</span><span style="color:#177500"></span>    <span style="color:#000">elementCount</span> <span style="color:#000">=</span> <span style="color:#000">a</span><span style="color:#000">.</span><span style="color:#836c28">length</span><span style="color:#000">;</span>
		<span style="color:#177500">// 如果指定集合是ArrayList，则数组a可直接赋值给本Vector实例用于存储数据的数组
</span><span style="color:#177500"></span>    <span style="color:#a90d91">if</span> <span style="color:#000">(</span><span style="color:#000">c</span><span style="color:#000">.</span><span style="color:#836c28">getClass</span><span style="color:#000">()</span> <span style="color:#000">==</span> <span style="color:#000">ArrayList</span><span style="color:#000">.</span><span style="color:#836c28">class</span><span style="color:#000">)</span> <span style="color:#000">{</span>
        <span style="color:#000">elementData</span> <span style="color:#000">=</span> <span style="color:#000">a</span><span style="color:#000">;</span>
    <span style="color:#000">}</span> <span style="color:#a90d91">else</span> <span style="color:#000">{</span>
				<span style="color:#177500">// 非ArrayList，可能与Vector实现差异较大，此处进行数组复制
</span><span style="color:#177500"></span>        <span style="color:#000">elementData</span> <span style="color:#000">=</span> <span style="color:#000">Arrays</span><span style="color:#000">.</span><span style="color:#836c28">copyOf</span><span style="color:#000">(</span><span style="color:#000">a</span><span style="color:#000">,</span> <span style="color:#000">elementCount</span><span style="color:#000">,</span> <span style="color:#000">Object</span><span style="color:#000">[].</span><span style="color:#836c28">class</span><span style="color:#000">);</span>
    <span style="color:#000">}</span>
<span style="color:#000">}</span>
</code></pre></div><hr>
<div class="gdoc-page__anchorwrap">
    <h1 id="9-public-synchronized-void-copyintoobject-anarray">
        9. public synchronized void copyInto(Object[] anArray)
        <a data-clipboard-text="https://hongmao.run/jdk8-src-note/java/util/Vector/#9-public-synchronized-void-copyintoobject-anarray" class="gdoc-page__anchor gdoc-page__anchor--right clip" aria-label="Anchor 9. public synchronized void copyInto(Object[] anArray)" href="#9-public-synchronized-void-copyintoobject-anarray">
            <svg class="icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
        </a>
    </h1>
</div><p>将此vector的组件（即元素）复制到指定的数组中。此vector中索引<code>k</code>处的项目被复制到<code>anArray</code>的<code>k</code>位置。</p>
<p>源码如下：</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2"><code class="language-java" data-lang="java"><span style="color:#a90d91">public</span> <span style="color:#a90d91">synchronized</span> <span style="color:#a90d91">void</span> <span style="color:#000">copyInto</span><span style="color:#000">(</span><span style="color:#000">Object</span><span style="color:#000">[]</span> <span style="color:#000">anArray</span><span style="color:#000">)</span> <span style="color:#000">{</span>
    <span style="color:#000">System</span><span style="color:#000">.</span><span style="color:#836c28">arraycopy</span><span style="color:#000">(</span><span style="color:#000">elementData</span><span style="color:#000">,</span> <span style="color:#000">0</span><span style="color:#000">,</span> <span style="color:#000">anArray</span><span style="color:#000">,</span> <span style="color:#000">0</span><span style="color:#000">,</span> <span style="color:#000">elementCount</span><span style="color:#000">);</span>
<span style="color:#000">}</span>
</code></pre></div><hr>
<div class="gdoc-page__anchorwrap">
    <h1 id="10-public-synchronized-void-trimtosize">
        10. public synchronized void trimToSize()
        <a data-clipboard-text="https://hongmao.run/jdk8-src-note/java/util/Vector/#10-public-synchronized-void-trimtosize" class="gdoc-page__anchor gdoc-page__anchor--right clip" aria-label="Anchor 10. public synchronized void trimToSize()" href="#10-public-synchronized-void-trimtosize">
            <svg class="icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
        </a>
    </h1>
</div><p>将此vector的容量修剪为vector的当前大小。如果此vector的容量大于其当前大小，则通过将其内部数据数组替换为较小的数组，将容量更改为等于大小，该数组保存在字段<code>elementData</code>中。应用程序可以使用此操作来最小化vector的存储。</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2"><code class="language-java" data-lang="java"><span style="color:#a90d91">public</span> <span style="color:#a90d91">synchronized</span> <span style="color:#a90d91">void</span> <span style="color:#000">trimToSize</span><span style="color:#000">()</span> <span style="color:#000">{</span>
		<span style="color:#177500">// 增加修改次数
</span><span style="color:#177500"></span>    <span style="color:#000">modCount</span><span style="color:#000">++;</span>
		<span style="color:#177500">// 取出当前数组长度
</span><span style="color:#177500"></span>    <span style="color:#a90d91">int</span> <span style="color:#000">oldCapacity</span> <span style="color:#000">=</span> <span style="color:#000">elementData</span><span style="color:#000">.</span><span style="color:#836c28">length</span><span style="color:#000">;</span>
		<span style="color:#177500">// 如果当前元素个数 小于 当前数组长度
</span><span style="color:#177500"></span>    <span style="color:#a90d91">if</span> <span style="color:#000">(</span><span style="color:#000">elementCount</span> <span style="color:#000">&lt;</span> <span style="color:#000">oldCapacity</span><span style="color:#000">)</span> <span style="color:#000">{</span>
				<span style="color:#177500">// 复制当前数组存放了数据的部分，也即丢弃数组后面未存放元素的部分
</span><span style="color:#177500"></span>        <span style="color:#000">elementData</span> <span style="color:#000">=</span> <span style="color:#000">Arrays</span><span style="color:#000">.</span><span style="color:#836c28">copyOf</span><span style="color:#000">(</span><span style="color:#000">elementData</span><span style="color:#000">,</span> <span style="color:#000">elementCount</span><span style="color:#000">);</span>
    <span style="color:#000">}</span>
<span style="color:#000">}</span>
</code></pre></div><hr>
<div class="gdoc-page__anchorwrap">
    <h1 id="11-public-synchronized-void-ensurecapacityint-mincapacity">
        11. public synchronized void ensureCapacity(int minCapacity)
        <a data-clipboard-text="https://hongmao.run/jdk8-src-note/java/util/Vector/#11-public-synchronized-void-ensurecapacityint-mincapacity" class="gdoc-page__anchor gdoc-page__anchor--right clip" aria-label="Anchor 11. public synchronized void ensureCapacity(int minCapacity)" href="#11-public-synchronized-void-ensurecapacityint-mincapacity">
            <svg class="icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
        </a>
    </h1>
</div><p>如有必要，增加此vector的容量，以确保它至少可以容纳由最小容量参数指定的组件数量。</p>
<p>如果此vector的当前容量小于<code>minCapacity</code>，则通过将其保存在字段<code>elementData</code>中的内部数据数组替换为更大的数组来增加其容量。新数据数组的大小为旧大小加上<code>capacityIncrement</code>，除非<code>capacityIncrement</code>的值小于或等于0，在这种情况下，新容量将是旧容量的两倍；但如果这个新大小仍然小于<code>minCapacity</code>，那么新容量将是<code>minCapacity</code>。</p>
<p>源码如下：</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2"><code class="language-java" data-lang="java"><span style="color:#a90d91">public</span> <span style="color:#a90d91">synchronized</span> <span style="color:#a90d91">void</span> <span style="color:#000">ensureCapacity</span><span style="color:#000">(</span><span style="color:#a90d91">int</span> <span style="color:#000">minCapacity</span><span style="color:#000">)</span> <span style="color:#000">{</span>
    <span style="color:#a90d91">if</span> <span style="color:#000">(</span><span style="color:#000">minCapacity</span> <span style="color:#000">&gt;</span> <span style="color:#000">0</span><span style="color:#000">)</span> <span style="color:#000">{</span>
				<span style="color:#177500">// 增加修改次数
</span><span style="color:#177500"></span>        <span style="color:#000">modCount</span><span style="color:#000">++;</span>
				<span style="color:#177500">// 调用确保容量方法的非同步版本
</span><span style="color:#177500"></span>        <span style="color:#000">ensureCapacityHelper</span><span style="color:#000">(</span><span style="color:#000">minCapacity</span><span style="color:#000">);</span>
    <span style="color:#000">}</span>
<span style="color:#000">}</span>
</code></pre></div><hr>
<div class="gdoc-page__anchorwrap">
    <h1 id="12-private-void-ensurecapacityhelperint-mincapacity">
        12. private void ensureCapacityHelper(int minCapacity)
        <a data-clipboard-text="https://hongmao.run/jdk8-src-note/java/util/Vector/#12-private-void-ensurecapacityhelperint-mincapacity" class="gdoc-page__anchor gdoc-page__anchor--right clip" aria-label="Anchor 12. private void ensureCapacityHelper(int minCapacity)" href="#12-private-void-ensurecapacityhelperint-mincapacity">
            <svg class="icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
        </a>
    </h1>
</div><p>本方法实现了<code>ensureCapacity</code>的非同步版本。本类中的同步方法可以在内部调用此方法以确保容量，而不会产生额外同步的成本。</p>
<p>源码如下：</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2"><code class="language-java" data-lang="java"><span style="color:#a90d91">private</span> <span style="color:#a90d91">void</span> <span style="color:#000">ensureCapacityHelper</span><span style="color:#000">(</span><span style="color:#a90d91">int</span> <span style="color:#000">minCapacity</span><span style="color:#000">)</span> <span style="color:#000">{</span>
    <span style="color:#177500">// overflow-conscious code
</span><span style="color:#177500"></span>		<span style="color:#177500">// 如果参数中的最小容量大于当前vector存放数据的数组容量，则调用grow方法增大数组的容量
</span><span style="color:#177500"></span>    <span style="color:#a90d91">if</span> <span style="color:#000">(</span><span style="color:#000">minCapacity</span> <span style="color:#000">-</span> <span style="color:#000">elementData</span><span style="color:#000">.</span><span style="color:#836c28">length</span> <span style="color:#000">&gt;</span> <span style="color:#000">0</span><span style="color:#000">)</span>
        <span style="color:#000">grow</span><span style="color:#000">(</span><span style="color:#000">minCapacity</span><span style="color:#000">);</span>
<span style="color:#000">}</span>
</code></pre></div><hr>
<div class="gdoc-page__anchorwrap">
    <h1 id="13-private-static-final-int-max_array_size--integermax_value---8">
        13. private static final int MAX_ARRAY_SIZE = Integer.MAX_VALUE - 8;
        <a data-clipboard-text="https://hongmao.run/jdk8-src-note/java/util/Vector/#13-private-static-final-int-max_array_size--integermax_value---8" class="gdoc-page__anchor gdoc-page__anchor--right clip" aria-label="Anchor 13. private static final int MAX_ARRAY_SIZE = Integer.MAX_VALUE - 8;" href="#13-private-static-final-int-max_array_size--integermax_value---8">
            <svg class="icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
        </a>
    </h1>
</div><p>要分配的数组的最大大小。</p>
<p>一些 VM 在数组中保留一些头字。</p>
<p>尝试分配更大的数组可能会导致<code>OutOfMemoryError</code>：请求的数组大小超出 VM 限制</p>
<hr>
<div class="gdoc-page__anchorwrap">
    <h1 id="14-private-void-growint-mincapacity">
        14. private void grow(int minCapacity)
        <a data-clipboard-text="https://hongmao.run/jdk8-src-note/java/util/Vector/#14-private-void-growint-mincapacity" class="gdoc-page__anchor gdoc-page__anchor--right clip" aria-label="Anchor 14. private void grow(int minCapacity)" href="#14-private-void-growint-mincapacity">
            <svg class="icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
        </a>
    </h1>
</div><p>增加数组<code>elementData</code>大小。</p>
<p>源码如下：</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2"><code class="language-java" data-lang="java"><span style="color:#a90d91">private</span> <span style="color:#a90d91">void</span> <span style="color:#000">grow</span><span style="color:#000">(</span><span style="color:#a90d91">int</span> <span style="color:#000">minCapacity</span><span style="color:#000">)</span> <span style="color:#000">{</span>
    <span style="color:#177500">// overflow-conscious code
</span><span style="color:#177500"></span>		<span style="color:#177500">// 取出当前数组elementData的容量
</span><span style="color:#177500"></span>    <span style="color:#a90d91">int</span> <span style="color:#000">oldCapacity</span> <span style="color:#000">=</span> <span style="color:#000">elementData</span><span style="color:#000">.</span><span style="color:#836c28">length</span><span style="color:#000">;</span>
		<span style="color:#177500">// 如果容量增量大于0，则 新数组容量 = 旧数组容量 + 容量增量
</span><span style="color:#177500"></span>		<span style="color:#177500">// 否则， 新数组容量 = 旧数组容量 + 旧数组容量
</span><span style="color:#177500"></span>    <span style="color:#a90d91">int</span> <span style="color:#000">newCapacity</span> <span style="color:#000">=</span> <span style="color:#000">oldCapacity</span> <span style="color:#000">+</span> <span style="color:#000">((</span><span style="color:#000">capacityIncrement</span> <span style="color:#000">&gt;</span> <span style="color:#000">0</span><span style="color:#000">)</span> <span style="color:#000">?</span>
                                     <span style="color:#000">capacityIncrement</span> <span style="color:#000">:</span> <span style="color:#000">oldCapacity</span><span style="color:#000">);</span>
		<span style="color:#177500">// 经上述逻辑计算出的新数组容量如果仍小于参数中指定的最小容量，则新数组容量直接取参数中的最小容量
</span><span style="color:#177500"></span>    <span style="color:#a90d91">if</span> <span style="color:#000">(</span><span style="color:#000">newCapacity</span> <span style="color:#000">-</span> <span style="color:#000">minCapacity</span> <span style="color:#000">&lt;</span> <span style="color:#000">0</span><span style="color:#000">)</span>
        <span style="color:#000">newCapacity</span> <span style="color:#000">=</span> <span style="color:#000">minCapacity</span><span style="color:#000">;</span>
		<span style="color:#177500">// 经上述逻辑计算出的新数组容量如果大于Vector限定的数组最大数量，则调用获取最大容量方法
</span><span style="color:#177500"></span>    <span style="color:#a90d91">if</span> <span style="color:#000">(</span><span style="color:#000">newCapacity</span> <span style="color:#000">-</span> <span style="color:#000">MAX_ARRAY_SIZE</span> <span style="color:#000">&gt;</span> <span style="color:#000">0</span><span style="color:#000">)</span>
        <span style="color:#000">newCapacity</span> <span style="color:#000">=</span> <span style="color:#000">hugeCapacity</span><span style="color:#000">(</span><span style="color:#000">minCapacity</span><span style="color:#000">);</span>
		<span style="color:#177500">// 将elementData复制到扩容后的新数组
</span><span style="color:#177500"></span>    <span style="color:#000">elementData</span> <span style="color:#000">=</span> <span style="color:#000">Arrays</span><span style="color:#000">.</span><span style="color:#836c28">copyOf</span><span style="color:#000">(</span><span style="color:#000">elementData</span><span style="color:#000">,</span> <span style="color:#000">newCapacity</span><span style="color:#000">);</span>
<span style="color:#000">}</span>
</code></pre></div><hr>
<div class="gdoc-page__anchorwrap">
    <h1 id="15-private-static-int-hugecapacityint-mincapacity">
        15. private static int hugeCapacity(int minCapacity)
        <a data-clipboard-text="https://hongmao.run/jdk8-src-note/java/util/Vector/#15-private-static-int-hugecapacityint-mincapacity" class="gdoc-page__anchor gdoc-page__anchor--right clip" aria-label="Anchor 15. private static int hugeCapacity(int minCapacity)" href="#15-private-static-int-hugecapacityint-mincapacity">
            <svg class="icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
        </a>
    </h1>
</div><p>获取巨大的容量。</p>
<p>源码如下：</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2"><code class="language-java" data-lang="java"><span style="color:#a90d91">private</span> <span style="color:#a90d91">static</span> <span style="color:#a90d91">int</span> <span style="color:#000">hugeCapacity</span><span style="color:#000">(</span><span style="color:#a90d91">int</span> <span style="color:#000">minCapacity</span><span style="color:#000">)</span> <span style="color:#000">{</span>
		<span style="color:#177500">// 如果最小容量小于0，则抛出OutOfMemoryError
</span><span style="color:#177500"></span>    <span style="color:#a90d91">if</span> <span style="color:#000">(</span><span style="color:#000">minCapacity</span> <span style="color:#000">&lt;</span> <span style="color:#000">0</span><span style="color:#000">)</span> <span style="color:#177500">// overflow
</span><span style="color:#177500"></span>        <span style="color:#a90d91">throw</span> <span style="color:#a90d91">new</span> <span style="color:#000">OutOfMemoryError</span><span style="color:#000">();</span>
		<span style="color:#177500">// 如果最小容量大于Vector设定的最大数组容量，则巨大容量取Integer的最大值
</span><span style="color:#177500"></span>		<span style="color:#177500">// 否则，巨大容量取Vector设定的最大数组容量
</span><span style="color:#177500"></span>    <span style="color:#a90d91">return</span> <span style="color:#000">(</span><span style="color:#000">minCapacity</span> <span style="color:#000">&gt;</span> <span style="color:#000">MAX_ARRAY_SIZE</span><span style="color:#000">)</span> <span style="color:#000">?</span>
        <span style="color:#000">Integer</span><span style="color:#000">.</span><span style="color:#836c28">MAX_VALUE</span> <span style="color:#000">:</span>
        <span style="color:#000">MAX_ARRAY_SIZE</span><span style="color:#000">;</span>
<span style="color:#000">}</span>
</code></pre></div><hr>
<div class="gdoc-page__anchorwrap">
    <h1 id="16-public-synchronized-void-setsizeint-newsize">
        16. public synchronized void setSize(int newSize)
        <a data-clipboard-text="https://hongmao.run/jdk8-src-note/java/util/Vector/#16-public-synchronized-void-setsizeint-newsize" class="gdoc-page__anchor gdoc-page__anchor--right clip" aria-label="Anchor 16. public synchronized void setSize(int newSize)" href="#16-public-synchronized-void-setsizeint-newsize">
            <svg class="icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
        </a>
    </h1>
</div><p>设置此vector的大小。如果新大小大于当前大小，则往此vector的末尾添加<code>null</code>。如果新大小小于当前大小，则索引<code>newSize</code>位置及其之后的所有组件都将被丢弃。</p>
<p>源码如下：</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2"><code class="language-java" data-lang="java"><span style="color:#a90d91">public</span> <span style="color:#a90d91">synchronized</span> <span style="color:#a90d91">void</span> <span style="color:#000">setSize</span><span style="color:#000">(</span><span style="color:#a90d91">int</span> <span style="color:#000">newSize</span><span style="color:#000">)</span> <span style="color:#000">{</span>
		<span style="color:#177500">// 增加修改次数
</span><span style="color:#177500"></span>    <span style="color:#000">modCount</span><span style="color:#000">++;</span>
		<span style="color:#177500">// 如果新大小大于当前元素个数，则调用ensureCapacityHelper确保数组容量
</span><span style="color:#177500"></span>    <span style="color:#a90d91">if</span> <span style="color:#000">(</span><span style="color:#000">newSize</span> <span style="color:#000">&gt;</span> <span style="color:#000">elementCount</span><span style="color:#000">)</span> <span style="color:#000">{</span>
        <span style="color:#000">ensureCapacityHelper</span><span style="color:#000">(</span><span style="color:#000">newSize</span><span style="color:#000">);</span>
    <span style="color:#000">}</span> <span style="color:#a90d91">else</span> <span style="color:#000">{</span>
				<span style="color:#177500">// 新大小小于等于当前元素个数，则遍历数组从新大小到元素个数-1位置的部分
</span><span style="color:#177500"></span>				<span style="color:#177500">// 将遍历到的每个元素都置为null
</span><span style="color:#177500"></span>        <span style="color:#a90d91">for</span> <span style="color:#000">(</span><span style="color:#a90d91">int</span> <span style="color:#000">i</span> <span style="color:#000">=</span> <span style="color:#000">newSize</span> <span style="color:#000">;</span> <span style="color:#000">i</span> <span style="color:#000">&lt;</span> <span style="color:#000">elementCount</span> <span style="color:#000">;</span> <span style="color:#000">i</span><span style="color:#000">++)</span> <span style="color:#000">{</span>
            <span style="color:#000">elementData</span><span style="color:#000">[</span><span style="color:#000">i</span><span style="color:#000">]</span> <span style="color:#000">=</span> <span style="color:#a90d91">null</span><span style="color:#000">;</span>
        <span style="color:#000">}</span>
    <span style="color:#000">}</span>
		<span style="color:#177500">// 将元素个数置为新大小
</span><span style="color:#177500"></span>    <span style="color:#000">elementCount</span> <span style="color:#000">=</span> <span style="color:#000">newSize</span><span style="color:#000">;</span>
<span style="color:#000">}</span>
</code></pre></div><hr>
<div class="gdoc-page__anchorwrap">
    <h1 id="17-public-synchronized-int-capacity">
        17. public synchronized int capacity()
        <a data-clipboard-text="https://hongmao.run/jdk8-src-note/java/util/Vector/#17-public-synchronized-int-capacity" class="gdoc-page__anchor gdoc-page__anchor--right clip" aria-label="Anchor 17. public synchronized int capacity()" href="#17-public-synchronized-int-capacity">
            <svg class="icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
        </a>
    </h1>
</div><p>返回此vector的当前容量。</p>
<p>当前容量：其内部数据数组（即此vector的<code>elementData</code>字段）的长度。</p>
<p>源码如下：</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2"><code class="language-java" data-lang="java"><span style="color:#a90d91">public</span> <span style="color:#a90d91">synchronized</span> <span style="color:#a90d91">int</span> <span style="color:#000">capacity</span><span style="color:#000">()</span> <span style="color:#000">{</span>
    <span style="color:#a90d91">return</span> <span style="color:#000">elementData</span><span style="color:#000">.</span><span style="color:#836c28">length</span><span style="color:#000">;</span>
<span style="color:#000">}</span>
</code></pre></div><hr>
<div class="gdoc-page__anchorwrap">
    <h1 id="18-public-synchronized-int-size">
        18. public synchronized int size()
        <a data-clipboard-text="https://hongmao.run/jdk8-src-note/java/util/Vector/#18-public-synchronized-int-size" class="gdoc-page__anchor gdoc-page__anchor--right clip" aria-label="Anchor 18. public synchronized int size()" href="#18-public-synchronized-int-size">
            <svg class="icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
        </a>
    </h1>
</div><p>返回此vector中的组件数（即元素个数）。</p>
<p>源码如下：</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2"><code class="language-java" data-lang="java"><span style="color:#a90d91">public</span> <span style="color:#a90d91">synchronized</span> <span style="color:#a90d91">int</span> <span style="color:#000">size</span><span style="color:#000">()</span> <span style="color:#000">{</span>
    <span style="color:#a90d91">return</span> <span style="color:#000">elementCount</span><span style="color:#000">;</span>
<span style="color:#000">}</span>
</code></pre></div><hr>
<div class="gdoc-page__anchorwrap">
    <h1 id="19-public-synchronized-boolean-isempty">
        19. public synchronized boolean isEmpty()
        <a data-clipboard-text="https://hongmao.run/jdk8-src-note/java/util/Vector/#19-public-synchronized-boolean-isempty" class="gdoc-page__anchor gdoc-page__anchor--right clip" aria-label="Anchor 19. public synchronized boolean isEmpty()" href="#19-public-synchronized-boolean-isempty">
            <svg class="icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
        </a>
    </h1>
</div><p>测试此vector是否没有组件。</p>
<p>源码如下：</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2"><code class="language-java" data-lang="java"><span style="color:#a90d91">public</span> <span style="color:#a90d91">synchronized</span> <span style="color:#a90d91">boolean</span> <span style="color:#000">isEmpty</span><span style="color:#000">()</span> <span style="color:#000">{</span>
    <span style="color:#a90d91">return</span> <span style="color:#000">elementCount</span> <span style="color:#000">==</span> <span style="color:#000">0</span><span style="color:#000">;</span>
<span style="color:#000">}</span>
</code></pre></div><hr>
<div class="gdoc-page__anchorwrap">
    <h1 id="20-public-enumerationlte-elements">
        20. public Enumeration&lt;E&gt; elements()
        <a data-clipboard-text="https://hongmao.run/jdk8-src-note/java/util/Vector/#20-public-enumerationlte-elements" class="gdoc-page__anchor gdoc-page__anchor--right clip" aria-label="Anchor 20. public Enumeration&lt;E&gt; elements()" href="#20-public-enumerationlte-elements">
            <svg class="icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
        </a>
    </h1>
</div><p>返回此vector的组件的枚举。返回的<code>Enumeration</code>对象将生成此向量中的所有项目。生成的第一项是索引<code>0</code>处的项，然后是索引<code>1</code>处的项，依此类推。</p>
<p>源码如下：</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2"><code class="language-java" data-lang="java"><span style="color:#a90d91">public</span> <span style="color:#000">Enumeration</span><span style="color:#000">&lt;</span><span style="color:#000">E</span><span style="color:#000">&gt;</span> <span style="color:#000">elements</span><span style="color:#000">()</span> <span style="color:#000">{</span>
		<span style="color:#177500">// 因为Enumeration是一个接口，所以此处返回的是一个它的匿名内部类
</span><span style="color:#177500"></span>		<span style="color:#177500">// 该接口有两个方法：hasMoreElements()、nextElement()
</span><span style="color:#177500"></span>    <span style="color:#a90d91">return</span> <span style="color:#a90d91">new</span> <span style="color:#000">Enumeration</span><span style="color:#000">&lt;</span><span style="color:#000">E</span><span style="color:#000">&gt;()</span> <span style="color:#000">{</span>
				<span style="color:#177500">// 从0开始计数，此处count可以理解为游标
</span><span style="color:#177500"></span>        <span style="color:#a90d91">int</span> <span style="color:#000">count</span> <span style="color:#000">=</span> <span style="color:#000">0</span><span style="color:#000">;</span>

				<span style="color:#177500">// 判断是否还有其他元素
</span><span style="color:#177500"></span>        <span style="color:#a90d91">public</span> <span style="color:#a90d91">boolean</span> <span style="color:#000">hasMoreElements</span><span style="color:#000">()</span> <span style="color:#000">{</span>
						<span style="color:#177500">// 判断当前游标是否小于元素个数
</span><span style="color:#177500"></span>            <span style="color:#a90d91">return</span> <span style="color:#000">count</span> <span style="color:#000">&lt;</span> <span style="color:#000">elementCount</span><span style="color:#000">;</span>
        <span style="color:#000">}</span>

				<span style="color:#177500">// 获取下一个元素
</span><span style="color:#177500"></span>        <span style="color:#a90d91">public</span> <span style="color:#000">E</span> <span style="color:#000">nextElement</span><span style="color:#000">()</span> <span style="color:#000">{</span>
            <span style="color:#a90d91">synchronized</span> <span style="color:#000">(</span><span style="color:#000">Vector</span><span style="color:#000">.</span><span style="color:#836c28">this</span><span style="color:#000">)</span> <span style="color:#000">{</span>
                <span style="color:#a90d91">if</span> <span style="color:#000">(</span><span style="color:#000">count</span> <span style="color:#000">&lt;</span> <span style="color:#000">elementCount</span><span style="color:#000">)</span> <span style="color:#000">{</span>
										<span style="color:#177500">// 如果当前游标小于当前元素个数，则返回当前游标位置的元素
</span><span style="color:#177500"></span>                    <span style="color:#a90d91">return</span> <span style="color:#000">elementData</span><span style="color:#000">(</span><span style="color:#000">count</span><span style="color:#000">++);</span>
                <span style="color:#000">}</span>
            <span style="color:#000">}</span>
            <span style="color:#a90d91">throw</span> <span style="color:#a90d91">new</span> <span style="color:#000">NoSuchElementException</span><span style="color:#000">(</span><span style="color:#c41a16">&#34;Vector Enumeration&#34;</span><span style="color:#000">);</span>
        <span style="color:#000">}</span>
    <span style="color:#000">};</span>
<span style="color:#000">}</span>
</code></pre></div><hr>
<div class="gdoc-page__anchorwrap">
    <h1 id="21-public-boolean-containsobject-o">
        21. public boolean contains(Object o)
        <a data-clipboard-text="https://hongmao.run/jdk8-src-note/java/util/Vector/#21-public-boolean-containsobject-o" class="gdoc-page__anchor gdoc-page__anchor--right clip" aria-label="Anchor 21. public boolean contains(Object o)" href="#21-public-boolean-containsobject-o">
            <svg class="icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
        </a>
    </h1>
</div><p>如果此vector包含指定的元素，则返回<code>true</code>。更正式地说，当且仅当此vector包含至少一个元素<code>e</code>使得<code>(o==null ? e==null : o.equals(e))</code>时才返回<code>true</code>。</p>
<p>源码如下：</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2"><code class="language-java" data-lang="java"><span style="color:#a90d91">public</span> <span style="color:#a90d91">boolean</span> <span style="color:#000">contains</span><span style="color:#000">(</span><span style="color:#000">Object</span> <span style="color:#000">o</span><span style="color:#000">)</span> <span style="color:#000">{</span>
		<span style="color:#177500">// 调用indexOf方法判断指定元素在数组中的索引位置是否大于等于0
</span><span style="color:#177500"></span>    <span style="color:#a90d91">return</span> <span style="color:#000">indexOf</span><span style="color:#000">(</span><span style="color:#000">o</span><span style="color:#000">,</span> <span style="color:#000">0</span><span style="color:#000">)</span> <span style="color:#000">&gt;=</span> <span style="color:#000">0</span><span style="color:#000">;</span>
<span style="color:#000">}</span>
</code></pre></div><hr>
<div class="gdoc-page__anchorwrap">
    <h1 id="22-public-int-indexofobject-o">
        22. public int indexOf(Object o)
        <a data-clipboard-text="https://hongmao.run/jdk8-src-note/java/util/Vector/#22-public-int-indexofobject-o" class="gdoc-page__anchor gdoc-page__anchor--right clip" aria-label="Anchor 22. public int indexOf(Object o)" href="#22-public-int-indexofobject-o">
            <svg class="icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
        </a>
    </h1>
</div><p>返回指定元素在此vector中第一次出现的索引，如果此向量不包含该元素，则返回<code>-1</code>。更正式地说，返回最小索引<code>i</code>使得<code>(o==null ? get(i)==null : o.equals(get(i)))</code>，或者如果有是没有这样的索引则返回<code>-1</code>。</p>
<p>源码如下：</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2"><code class="language-java" data-lang="java"><span style="color:#a90d91">public</span> <span style="color:#a90d91">int</span> <span style="color:#000">indexOf</span><span style="color:#000">(</span><span style="color:#000">Object</span> <span style="color:#000">o</span><span style="color:#000">)</span> <span style="color:#000">{</span>
		<span style="color:#177500">// 从索引位置0处开始匹配
</span><span style="color:#177500"></span>    <span style="color:#a90d91">return</span> <span style="color:#000">indexOf</span><span style="color:#000">(</span><span style="color:#000">o</span><span style="color:#000">,</span> <span style="color:#000">0</span><span style="color:#000">);</span>
<span style="color:#000">}</span>
</code></pre></div><hr>
<div class="gdoc-page__anchorwrap">
    <h1 id="23-public-synchronized-int-indexofobject-o-int-index">
        23. public synchronized int indexOf(Object o, int index)
        <a data-clipboard-text="https://hongmao.run/jdk8-src-note/java/util/Vector/#23-public-synchronized-int-indexofobject-o-int-index" class="gdoc-page__anchor gdoc-page__anchor--right clip" aria-label="Anchor 23. public synchronized int indexOf(Object o, int index)" href="#23-public-synchronized-int-indexofobject-o-int-index">
            <svg class="icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
        </a>
    </h1>
</div><p>返回此vector中指定元素第一次出现的索引，从<code>index</code>开始搜索，如果未找到该元素，则返回<code>-1</code>。更正式地说，返回最小索引<code>i</code>使得<code>(i &gt;= index &amp;&amp; (o==null ? get(i)==null : o.equals(get(i))))</code>，如果没有这样的索引，则返回<code>-1</code>。</p>
<p>源码如下：</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2"><code class="language-java" data-lang="java"><span style="color:#a90d91">public</span> <span style="color:#a90d91">synchronized</span> <span style="color:#a90d91">int</span> <span style="color:#000">indexOf</span><span style="color:#000">(</span><span style="color:#000">Object</span> <span style="color:#000">o</span><span style="color:#000">,</span> <span style="color:#a90d91">int</span> <span style="color:#000">index</span><span style="color:#000">)</span> <span style="color:#000">{</span>
    <span style="color:#a90d91">if</span> <span style="color:#000">(</span><span style="color:#000">o</span> <span style="color:#000">==</span> <span style="color:#a90d91">null</span><span style="color:#000">)</span> <span style="color:#000">{</span>
				<span style="color:#177500">// 指定对象为null，则遍历数组找到元素为null的索引位置
</span><span style="color:#177500"></span>        <span style="color:#a90d91">for</span> <span style="color:#000">(</span><span style="color:#a90d91">int</span> <span style="color:#000">i</span> <span style="color:#000">=</span> <span style="color:#000">index</span> <span style="color:#000">;</span> <span style="color:#000">i</span> <span style="color:#000">&lt;</span> <span style="color:#000">elementCount</span> <span style="color:#000">;</span> <span style="color:#000">i</span><span style="color:#000">++)</span>
            <span style="color:#a90d91">if</span> <span style="color:#000">(</span><span style="color:#000">elementData</span><span style="color:#000">[</span><span style="color:#000">i</span><span style="color:#000">]==</span><span style="color:#a90d91">null</span><span style="color:#000">)</span>
                <span style="color:#a90d91">return</span> <span style="color:#000">i</span><span style="color:#000">;</span>
    <span style="color:#000">}</span> <span style="color:#a90d91">else</span> <span style="color:#000">{</span>
				<span style="color:#177500">// 指定对象不为null，则遍历数组找到equals为true的元素的索引位置
</span><span style="color:#177500"></span>        <span style="color:#a90d91">for</span> <span style="color:#000">(</span><span style="color:#a90d91">int</span> <span style="color:#000">i</span> <span style="color:#000">=</span> <span style="color:#000">index</span> <span style="color:#000">;</span> <span style="color:#000">i</span> <span style="color:#000">&lt;</span> <span style="color:#000">elementCount</span> <span style="color:#000">;</span> <span style="color:#000">i</span><span style="color:#000">++)</span>
            <span style="color:#a90d91">if</span> <span style="color:#000">(</span><span style="color:#000">o</span><span style="color:#000">.</span><span style="color:#836c28">equals</span><span style="color:#000">(</span><span style="color:#000">elementData</span><span style="color:#000">[</span><span style="color:#000">i</span><span style="color:#000">]))</span>
                <span style="color:#a90d91">return</span> <span style="color:#000">i</span><span style="color:#000">;</span>
    <span style="color:#000">}</span>
		<span style="color:#177500">// 找不到则返回-1
</span><span style="color:#177500"></span>    <span style="color:#a90d91">return</span> <span style="color:#000">-</span><span style="color:#000">1</span><span style="color:#000">;</span>
<span style="color:#000">}</span>
</code></pre></div><hr>
<div class="gdoc-page__anchorwrap">
    <h1 id="24-public-synchronized-int-lastindexofobject-o">
        24. public synchronized int lastIndexOf(Object o)
        <a data-clipboard-text="https://hongmao.run/jdk8-src-note/java/util/Vector/#24-public-synchronized-int-lastindexofobject-o" class="gdoc-page__anchor gdoc-page__anchor--right clip" aria-label="Anchor 24. public synchronized int lastIndexOf(Object o)" href="#24-public-synchronized-int-lastindexofobject-o">
            <svg class="icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
        </a>
    </h1>
</div><p>返回指定元素在此vector中最后一次出现的索引，如果此vector不包含该元素，则返回<code>-1</code>。更正式地，返回最大索引<code>i</code>使得<code>(o==null ? get(i)==null : o.equals(get(i)))</code>，或者如果没有这样的索引则返回<code>-1</code>。</p>
<p>源码如下：</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2"><code class="language-java" data-lang="java"><span style="color:#a90d91">public</span> <span style="color:#a90d91">synchronized</span> <span style="color:#a90d91">int</span> <span style="color:#000">lastIndexOf</span><span style="color:#000">(</span><span style="color:#000">Object</span> <span style="color:#000">o</span><span style="color:#000">)</span> <span style="color:#000">{</span>
    <span style="color:#a90d91">return</span> <span style="color:#000">lastIndexOf</span><span style="color:#000">(</span><span style="color:#000">o</span><span style="color:#000">,</span> <span style="color:#000">elementCount</span><span style="color:#000">-</span><span style="color:#000">1</span><span style="color:#000">);</span>
<span style="color:#000">}</span>
</code></pre></div><hr>
<div class="gdoc-page__anchorwrap">
    <h1 id="25-public-synchronized-int-lastindexofobject-o-int-index">
        25. public synchronized int lastIndexOf(Object o, int index)
        <a data-clipboard-text="https://hongmao.run/jdk8-src-note/java/util/Vector/#25-public-synchronized-int-lastindexofobject-o-int-index" class="gdoc-page__anchor gdoc-page__anchor--right clip" aria-label="Anchor 25. public synchronized int lastIndexOf(Object o, int index)" href="#25-public-synchronized-int-lastindexofobject-o-int-index">
            <svg class="icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
        </a>
    </h1>
</div><p>返回指定元素在此vector中最后一次出现的索引，从<code>index</code>开始向前搜索（即向索引变小的方向搜索），如果未找到该元素，则返回<code>-1</code>。更正式地说，返回最高索引<code>i</code>使得<code>(i &lt;= index &amp;&amp; (o==null ? get(i)==null : o.equals(get(i))))</code>，如果没有这样的索引则返回<code>-1</code>。</p>
<p>源码如下：</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2"><code class="language-java" data-lang="java"><span style="color:#a90d91">public</span> <span style="color:#a90d91">synchronized</span> <span style="color:#a90d91">int</span> <span style="color:#000">lastIndexOf</span><span style="color:#000">(</span><span style="color:#000">Object</span> <span style="color:#000">o</span><span style="color:#000">,</span> <span style="color:#a90d91">int</span> <span style="color:#000">index</span><span style="color:#000">)</span> <span style="color:#000">{</span>
		<span style="color:#177500">// 检查开始索引是否大于等于元素个数，如果是则抛出数组越界异常
</span><span style="color:#177500"></span>    <span style="color:#a90d91">if</span> <span style="color:#000">(</span><span style="color:#000">index</span> <span style="color:#000">&gt;=</span> <span style="color:#000">elementCount</span><span style="color:#000">)</span>
        <span style="color:#a90d91">throw</span> <span style="color:#a90d91">new</span> <span style="color:#000">IndexOutOfBoundsException</span><span style="color:#000">(</span><span style="color:#000">index</span> <span style="color:#000">+</span> <span style="color:#c41a16">&#34; &gt;= &#34;</span><span style="color:#000">+</span> <span style="color:#000">elementCount</span><span style="color:#000">);</span>

		<span style="color:#177500">// 和indexOf方法类似，指定对象是否为空走不同的逻辑
</span><span style="color:#177500"></span>    <span style="color:#a90d91">if</span> <span style="color:#000">(</span><span style="color:#000">o</span> <span style="color:#000">==</span> <span style="color:#a90d91">null</span><span style="color:#000">)</span> <span style="color:#000">{</span>
				<span style="color:#177500">// 从index位置开始，一直往前遍历（索引变小的方向）
</span><span style="color:#177500"></span>        <span style="color:#a90d91">for</span> <span style="color:#000">(</span><span style="color:#a90d91">int</span> <span style="color:#000">i</span> <span style="color:#000">=</span> <span style="color:#000">index</span><span style="color:#000">;</span> <span style="color:#000">i</span> <span style="color:#000">&gt;=</span> <span style="color:#000">0</span><span style="color:#000">;</span> <span style="color:#000">i</span><span style="color:#000">--)</span>
						<span style="color:#177500">// 命中即返回
</span><span style="color:#177500"></span>            <span style="color:#a90d91">if</span> <span style="color:#000">(</span><span style="color:#000">elementData</span><span style="color:#000">[</span><span style="color:#000">i</span><span style="color:#000">]==</span><span style="color:#a90d91">null</span><span style="color:#000">)</span>
                <span style="color:#a90d91">return</span> <span style="color:#000">i</span><span style="color:#000">;</span>
    <span style="color:#000">}</span> <span style="color:#a90d91">else</span> <span style="color:#000">{</span>
        <span style="color:#a90d91">for</span> <span style="color:#000">(</span><span style="color:#a90d91">int</span> <span style="color:#000">i</span> <span style="color:#000">=</span> <span style="color:#000">index</span><span style="color:#000">;</span> <span style="color:#000">i</span> <span style="color:#000">&gt;=</span> <span style="color:#000">0</span><span style="color:#000">;</span> <span style="color:#000">i</span><span style="color:#000">--)</span>
            <span style="color:#a90d91">if</span> <span style="color:#000">(</span><span style="color:#000">o</span><span style="color:#000">.</span><span style="color:#836c28">equals</span><span style="color:#000">(</span><span style="color:#000">elementData</span><span style="color:#000">[</span><span style="color:#000">i</span><span style="color:#000">]))</span>
                <span style="color:#a90d91">return</span> <span style="color:#000">i</span><span style="color:#000">;</span>
    <span style="color:#000">}</span>
		<span style="color:#177500">// 未找到，则返回-1
</span><span style="color:#177500"></span>    <span style="color:#a90d91">return</span> <span style="color:#000">-</span><span style="color:#000">1</span><span style="color:#000">;</span>
<span style="color:#000">}</span>
</code></pre></div><hr>
<div class="gdoc-page__anchorwrap">
    <h1 id="26-public-synchronized-e-elementatint-index">
        26. public synchronized E elementAt(int index)
        <a data-clipboard-text="https://hongmao.run/jdk8-src-note/java/util/Vector/#26-public-synchronized-e-elementatint-index" class="gdoc-page__anchor gdoc-page__anchor--right clip" aria-label="Anchor 26. public synchronized E elementAt(int index)" href="#26-public-synchronized-e-elementatint-index">
            <svg class="icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
        </a>
    </h1>
</div><p>返回指定索引处的组件（即元素）。</p>
<p>此方法在功能上与<code>get(int)</code>方法相同（<code>get(int)</code>是<code>List</code>接口的方法之一）。</p>
<p>源码如下：</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2"><code class="language-java" data-lang="java"><span style="color:#a90d91">public</span> <span style="color:#a90d91">synchronized</span> <span style="color:#000">E</span> <span style="color:#000">elementAt</span><span style="color:#000">(</span><span style="color:#a90d91">int</span> <span style="color:#000">index</span><span style="color:#000">)</span> <span style="color:#000">{</span>
		<span style="color:#177500">// 数组越界检查
</span><span style="color:#177500"></span>    <span style="color:#a90d91">if</span> <span style="color:#000">(</span><span style="color:#000">index</span> <span style="color:#000">&gt;=</span> <span style="color:#000">elementCount</span><span style="color:#000">)</span> <span style="color:#000">{</span>
        <span style="color:#a90d91">throw</span> <span style="color:#a90d91">new</span> <span style="color:#000">ArrayIndexOutOfBoundsException</span><span style="color:#000">(</span><span style="color:#000">index</span> <span style="color:#000">+</span> <span style="color:#c41a16">&#34; &gt;= &#34;</span> <span style="color:#000">+</span> <span style="color:#000">elementCount</span><span style="color:#000">);</span>
    <span style="color:#000">}</span>

		<span style="color:#177500">// 调用elementData方法
</span><span style="color:#177500"></span>    <span style="color:#a90d91">return</span> <span style="color:#000">elementData</span><span style="color:#000">(</span><span style="color:#000">index</span><span style="color:#000">);</span>
<span style="color:#000">}</span>
</code></pre></div><hr>
<div class="gdoc-page__anchorwrap">
    <h1 id="27-public-synchronized-e-firstelement">
        27. public synchronized E firstElement()
        <a data-clipboard-text="https://hongmao.run/jdk8-src-note/java/util/Vector/#27-public-synchronized-e-firstelement" class="gdoc-page__anchor gdoc-page__anchor--right clip" aria-label="Anchor 27. public synchronized E firstElement()" href="#27-public-synchronized-e-firstelement">
            <svg class="icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
        </a>
    </h1>
</div><p>返回此vector的第一个组件（索引<code>0</code>处的项目）。</p>
<p>源码如下：</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2"><code class="language-java" data-lang="java"><span style="color:#a90d91">public</span> <span style="color:#a90d91">synchronized</span> <span style="color:#000">E</span> <span style="color:#000">firstElement</span><span style="color:#000">()</span> <span style="color:#000">{</span>
    <span style="color:#a90d91">if</span> <span style="color:#000">(</span><span style="color:#000">elementCount</span> <span style="color:#000">==</span> <span style="color:#000">0</span><span style="color:#000">)</span> <span style="color:#000">{</span>
        <span style="color:#a90d91">throw</span> <span style="color:#a90d91">new</span> <span style="color:#000">NoSuchElementException</span><span style="color:#000">();</span>
    <span style="color:#000">}</span>
		<span style="color:#177500">// 没有特殊逻辑，就是从数组中根据索引0取数据
</span><span style="color:#177500"></span>    <span style="color:#a90d91">return</span> <span style="color:#000">elementData</span><span style="color:#000">(</span><span style="color:#000">0</span><span style="color:#000">);</span>
<span style="color:#000">}</span>
</code></pre></div><hr>
<div class="gdoc-page__anchorwrap">
    <h1 id="28-public-synchronized-e-lastelement">
        28. public synchronized E lastElement()
        <a data-clipboard-text="https://hongmao.run/jdk8-src-note/java/util/Vector/#28-public-synchronized-e-lastelement" class="gdoc-page__anchor gdoc-page__anchor--right clip" aria-label="Anchor 28. public synchronized E lastElement()" href="#28-public-synchronized-e-lastelement">
            <svg class="icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
        </a>
    </h1>
</div><p>返回vector的最后一个组件。</p>
<p>源码如下：</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2"><code class="language-java" data-lang="java"><span style="color:#a90d91">public</span> <span style="color:#a90d91">synchronized</span> <span style="color:#000">E</span> <span style="color:#000">lastElement</span><span style="color:#000">()</span> <span style="color:#000">{</span>
    <span style="color:#a90d91">if</span> <span style="color:#000">(</span><span style="color:#000">elementCount</span> <span style="color:#000">==</span> <span style="color:#000">0</span><span style="color:#000">)</span> <span style="color:#000">{</span>
        <span style="color:#a90d91">throw</span> <span style="color:#a90d91">new</span> <span style="color:#000">NoSuchElementException</span><span style="color:#000">();</span>
    <span style="color:#000">}</span>
		<span style="color:#177500">// 返回elementData数组中最后一个元素，对应索引位置为：元素个数 - 1
</span><span style="color:#177500"></span>    <span style="color:#a90d91">return</span> <span style="color:#000">elementData</span><span style="color:#000">(</span><span style="color:#000">elementCount</span> <span style="color:#000">-</span> <span style="color:#000">1</span><span style="color:#000">);</span>
<span style="color:#000">}</span>
</code></pre></div><hr>
<div class="gdoc-page__anchorwrap">
    <h1 id="29-public-synchronized-void-setelementate-obj-int-index">
        29. public synchronized void setElementAt(E obj, int index)
        <a data-clipboard-text="https://hongmao.run/jdk8-src-note/java/util/Vector/#29-public-synchronized-void-setelementate-obj-int-index" class="gdoc-page__anchor gdoc-page__anchor--right clip" aria-label="Anchor 29. public synchronized void setElementAt(E obj, int index)" href="#29-public-synchronized-void-setelementate-obj-int-index">
            <svg class="icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
        </a>
    </h1>
</div><p>将此vector的指定<code>index</code>处的组件设置为指定对象，该位置之前的组件将被丢弃。</p>
<p>该索引必须大于或等于<code>0</code>且小于vector的当前大小。</p>
<p>此方法在功能上与<code>set(int, E)</code>方法（它是<code>List</code>接口的方法之一）相同。请注意，<code>set</code>方法颠倒了参数的顺序，以更紧密地匹配数组用法。另请注意，<code>set</code>方法会返回存储在指定位置的旧值。</p>
<p>源码如下：</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2"><code class="language-java" data-lang="java"><span style="color:#a90d91">public</span> <span style="color:#a90d91">synchronized</span> <span style="color:#a90d91">void</span> <span style="color:#000">setElementAt</span><span style="color:#000">(</span><span style="color:#000">E</span> <span style="color:#000">obj</span><span style="color:#000">,</span> <span style="color:#a90d91">int</span> <span style="color:#000">index</span><span style="color:#000">)</span> <span style="color:#000">{</span>
    <span style="color:#a90d91">if</span> <span style="color:#000">(</span><span style="color:#000">index</span> <span style="color:#000">&gt;=</span> <span style="color:#000">elementCount</span><span style="color:#000">)</span> <span style="color:#000">{</span>
        <span style="color:#a90d91">throw</span> <span style="color:#a90d91">new</span> <span style="color:#000">ArrayIndexOutOfBoundsException</span><span style="color:#000">(</span><span style="color:#000">index</span> <span style="color:#000">+</span> <span style="color:#c41a16">&#34; &gt;= &#34;</span> <span style="color:#000">+</span>
                                                 <span style="color:#000">elementCount</span><span style="color:#000">);</span>
    <span style="color:#000">}</span>
    <span style="color:#000">elementData</span><span style="color:#000">[</span><span style="color:#000">index</span><span style="color:#000">]</span> <span style="color:#000">=</span> <span style="color:#000">obj</span><span style="color:#000">;</span>
<span style="color:#000">}</span>
</code></pre></div><hr>
<div class="gdoc-page__anchorwrap">
    <h1 id="30-public-synchronized-void-removeelementatint-index">
        30. public synchronized void removeElementAt(int index)
        <a data-clipboard-text="https://hongmao.run/jdk8-src-note/java/util/Vector/#30-public-synchronized-void-removeelementatint-index" class="gdoc-page__anchor gdoc-page__anchor--right clip" aria-label="Anchor 30. public synchronized void removeElementAt(int index)" href="#30-public-synchronized-void-removeelementatint-index">
            <svg class="icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
        </a>
    </h1>
</div><p>删除指定索引处的组件。此vector中索引大于或等于指定<code>index</code>的每个组件向前移动，使其索引比之前的值小 1。这个vector的大小减少<code>1</code>。</p>
<p>索引必须是大于或等于<code>0</code>且小于vector的当前大小的值。</p>
<p>此方法在功能上与<code>remove(int)</code>方法（它是<code>List</code>接口的一部分）相同。需要注意，<code>remove</code>方法会返回存储在指定位置的旧值。</p>
<p>源码如下：</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2"><code class="language-java" data-lang="java"><span style="color:#a90d91">public</span> <span style="color:#a90d91">synchronized</span> <span style="color:#a90d91">void</span> <span style="color:#000">removeElementAt</span><span style="color:#000">(</span><span style="color:#a90d91">int</span> <span style="color:#000">index</span><span style="color:#000">)</span> <span style="color:#000">{</span>
		<span style="color:#177500">// 增加修改次数
</span><span style="color:#177500"></span>    <span style="color:#000">modCount</span><span style="color:#000">++;</span>
		<span style="color:#177500">// 校验指定的索引index是否出于合理区间（即：大于等于0且小于元素个数）
</span><span style="color:#177500"></span>    <span style="color:#a90d91">if</span> <span style="color:#000">(</span><span style="color:#000">index</span> <span style="color:#000">&gt;=</span> <span style="color:#000">elementCount</span><span style="color:#000">)</span> <span style="color:#000">{</span>
        <span style="color:#a90d91">throw</span> <span style="color:#a90d91">new</span> <span style="color:#000">ArrayIndexOutOfBoundsException</span><span style="color:#000">(</span><span style="color:#000">index</span> <span style="color:#000">+</span> <span style="color:#c41a16">&#34; &gt;= &#34;</span> <span style="color:#000">+</span>
                                                 <span style="color:#000">elementCount</span><span style="color:#000">);</span>
    <span style="color:#000">}</span>
    <span style="color:#a90d91">else</span> <span style="color:#a90d91">if</span> <span style="color:#000">(</span><span style="color:#000">index</span> <span style="color:#000">&lt;</span> <span style="color:#000">0</span><span style="color:#000">)</span> <span style="color:#000">{</span>
        <span style="color:#a90d91">throw</span> <span style="color:#a90d91">new</span> <span style="color:#000">ArrayIndexOutOfBoundsException</span><span style="color:#000">(</span><span style="color:#000">index</span><span style="color:#000">);</span>
    <span style="color:#000">}</span>
		<span style="color:#177500">// 计算出所需要异动位置的元素个数
</span><span style="color:#177500"></span>    <span style="color:#a90d91">int</span> <span style="color:#000">j</span> <span style="color:#000">=</span> <span style="color:#000">elementCount</span> <span style="color:#000">-</span> <span style="color:#000">index</span> <span style="color:#000">-</span> <span style="color:#000">1</span><span style="color:#000">;</span>
    <span style="color:#a90d91">if</span> <span style="color:#000">(</span><span style="color:#000">j</span> <span style="color:#000">&gt;</span> <span style="color:#000">0</span><span style="color:#000">)</span> <span style="color:#000">{</span>
				<span style="color:#177500">// 进行数组复制
</span><span style="color:#177500"></span>				<span style="color:#177500">// 将elementData数组的“index+1”及之后的元素复制到elementData数组的“index”处及之后的位置
</span><span style="color:#177500"></span>				<span style="color:#177500">// 复制元素的个数为j
</span><span style="color:#177500"></span>        <span style="color:#000">System</span><span style="color:#000">.</span><span style="color:#836c28">arraycopy</span><span style="color:#000">(</span><span style="color:#000">elementData</span><span style="color:#000">,</span> <span style="color:#000">index</span> <span style="color:#000">+</span> <span style="color:#000">1</span><span style="color:#000">,</span> <span style="color:#000">elementData</span><span style="color:#000">,</span> <span style="color:#000">index</span><span style="color:#000">,</span> <span style="color:#000">j</span><span style="color:#000">);</span>
    <span style="color:#000">}</span>
		<span style="color:#177500">// 元素个数减一
</span><span style="color:#177500"></span>    <span style="color:#000">elementCount</span><span style="color:#000">--;</span>
		<span style="color:#177500">// 将末尾的元素置为null，以使其可被垃圾回收
</span><span style="color:#177500"></span>    <span style="color:#000">elementData</span><span style="color:#000">[</span><span style="color:#000">elementCount</span><span style="color:#000">]</span> <span style="color:#000">=</span> <span style="color:#a90d91">null</span><span style="color:#000">;</span> <span style="color:#177500">/* to let gc do its work */</span>
<span style="color:#000">}</span>
</code></pre></div><hr>
<div class="gdoc-page__anchorwrap">
    <h1 id="31-public-synchronized-void-insertelementate-obj-int-index">
        31. public synchronized void insertElementAt(E obj, int index)
        <a data-clipboard-text="https://hongmao.run/jdk8-src-note/java/util/Vector/#31-public-synchronized-void-insertelementate-obj-int-index" class="gdoc-page__anchor gdoc-page__anchor--right clip" aria-label="Anchor 31. public synchronized void insertElementAt(E obj, int index)" href="#31-public-synchronized-void-insertelementate-obj-int-index">
            <svg class="icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
        </a>
    </h1>
</div><p>将指定对象作为组件插入此vector中指定<code>index</code>处。此vector中索引大于或等于指定<code>index</code>的每个组件向后移动，使其索引比之前的值大 1。</p>
<p>索引必须是大于等于<code>0</code>且小于等于vector的当前大小的值。（如果索引等于vector的当前大小，则新元素将追加到当前vector。）</p>
<p>此方法在功能上与<code>add(int, E)</code>方法（它是<code>List</code>接口的一部分）相同。需要注意，<code>add</code>方法颠倒了参数的顺序，以更接近数组用法。</p>
<p>源码如下：</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2"><code class="language-java" data-lang="java"><span style="color:#a90d91">public</span> <span style="color:#a90d91">synchronized</span> <span style="color:#a90d91">void</span> <span style="color:#000">insertElementAt</span><span style="color:#000">(</span><span style="color:#000">E</span> <span style="color:#000">obj</span><span style="color:#000">,</span> <span style="color:#a90d91">int</span> <span style="color:#000">index</span><span style="color:#000">)</span> <span style="color:#000">{</span>
		<span style="color:#177500">// 修改次数加1
</span><span style="color:#177500"></span>    <span style="color:#000">modCount</span><span style="color:#000">++;</span>
		<span style="color:#177500">// 校验指定的索引index是否在合理的区间内
</span><span style="color:#177500"></span>    <span style="color:#a90d91">if</span> <span style="color:#000">(</span><span style="color:#000">index</span> <span style="color:#000">&gt;</span> <span style="color:#000">elementCount</span><span style="color:#000">)</span> <span style="color:#000">{</span>
        <span style="color:#a90d91">throw</span> <span style="color:#a90d91">new</span> <span style="color:#000">ArrayIndexOutOfBoundsException</span><span style="color:#000">(</span><span style="color:#000">index</span>
                                                 <span style="color:#000">+</span> <span style="color:#c41a16">&#34; &gt; &#34;</span> <span style="color:#000">+</span> <span style="color:#000">elementCount</span><span style="color:#000">);</span>
    <span style="color:#000">}</span>
		<span style="color:#177500">// 确保vector容量足够
</span><span style="color:#177500"></span>    <span style="color:#000">ensureCapacityHelper</span><span style="color:#000">(</span><span style="color:#000">elementCount</span> <span style="color:#000">+</span> <span style="color:#000">1</span><span style="color:#000">);</span>
		<span style="color:#177500">// 执行数组复制，将elementData数组index及之后的元素复制到elementData的index+1处及之后的位置
</span><span style="color:#177500"></span>		<span style="color:#177500">// 复制的元素个数为元素个数-指定索引index
</span><span style="color:#177500"></span>    <span style="color:#000">System</span><span style="color:#000">.</span><span style="color:#836c28">arraycopy</span><span style="color:#000">(</span><span style="color:#000">elementData</span><span style="color:#000">,</span> <span style="color:#000">index</span><span style="color:#000">,</span> <span style="color:#000">elementData</span><span style="color:#000">,</span> <span style="color:#000">index</span> <span style="color:#000">+</span> <span style="color:#000">1</span><span style="color:#000">,</span> <span style="color:#000">elementCount</span> <span style="color:#000">-</span> <span style="color:#000">index</span><span style="color:#000">);</span>
		<span style="color:#177500">// 此时给index位置替换元素为指定的元素obj
</span><span style="color:#177500"></span>    <span style="color:#000">elementData</span><span style="color:#000">[</span><span style="color:#000">index</span><span style="color:#000">]</span> <span style="color:#000">=</span> <span style="color:#000">obj</span><span style="color:#000">;</span>
		<span style="color:#177500">// 元素个数加1
</span><span style="color:#177500"></span>    <span style="color:#000">elementCount</span><span style="color:#000">++;</span>
<span style="color:#000">}</span>
</code></pre></div><hr>
<div class="gdoc-page__anchorwrap">
    <h1 id="32-public-synchronized-void-addelemente-obj">
        32. public synchronized void addElement(E obj)
        <a data-clipboard-text="https://hongmao.run/jdk8-src-note/java/util/Vector/#32-public-synchronized-void-addelemente-obj" class="gdoc-page__anchor gdoc-page__anchor--right clip" aria-label="Anchor 32. public synchronized void addElement(E obj)" href="#32-public-synchronized-void-addelemente-obj">
            <svg class="icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
        </a>
    </h1>
</div><p>将指定的组件添加到此vector的末尾，将其大小增加 1。如果该vector的大小变得大于其容量，则该vector的容量会增加。</p>
<p>此方法在功能上与<code>add(E)</code>方法（它是<code>List</code>接口的一部分）相同。</p>
<p>源码如下：</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2"><code class="language-java" data-lang="java"><span style="color:#a90d91">public</span> <span style="color:#a90d91">synchronized</span> <span style="color:#a90d91">void</span> <span style="color:#000">addElement</span><span style="color:#000">(</span><span style="color:#000">E</span> <span style="color:#000">obj</span><span style="color:#000">)</span> <span style="color:#000">{</span>
		<span style="color:#177500">// 修改次数加1
</span><span style="color:#177500"></span>    <span style="color:#000">modCount</span><span style="color:#000">++;</span>
		<span style="color:#177500">// 确保容量足够（不够的话会进行扩容）
</span><span style="color:#177500"></span>    <span style="color:#000">ensureCapacityHelper</span><span style="color:#000">(</span><span style="color:#000">elementCount</span> <span style="color:#000">+</span> <span style="color:#000">1</span><span style="color:#000">);</span>
		<span style="color:#177500">// 将指定元素拼接到vector的末尾
</span><span style="color:#177500"></span>    <span style="color:#000">elementData</span><span style="color:#000">[</span><span style="color:#000">elementCount</span><span style="color:#000">++]</span> <span style="color:#000">=</span> <span style="color:#000">obj</span><span style="color:#000">;</span>
<span style="color:#000">}</span>
</code></pre></div><hr>
<div class="gdoc-page__anchorwrap">
    <h1 id="33-public-synchronized-boolean-removeelementobject-obj">
        33. public synchronized boolean removeElement(Object obj)
        <a data-clipboard-text="https://hongmao.run/jdk8-src-note/java/util/Vector/#33-public-synchronized-boolean-removeelementobject-obj" class="gdoc-page__anchor gdoc-page__anchor--right clip" aria-label="Anchor 33. public synchronized boolean removeElement(Object obj)" href="#33-public-synchronized-boolean-removeelementobject-obj">
            <svg class="icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
        </a>
    </h1>
</div><p>从此vector中删除指定参数的第一次（最低索引）出现。如果在此vector中找到对象，则向量中索引大于或等于该指定对象索引的每个元素将向前移动，使其索引比之前的值减1。</p>
<p>此方法在功能上与<code>remove(Object)</code>方法（它是<code>List</code>接口的一部分）相同。</p>
<p>源码如下：</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2"><code class="language-java" data-lang="java"><span style="color:#a90d91">public</span> <span style="color:#a90d91">synchronized</span> <span style="color:#a90d91">boolean</span> <span style="color:#000">removeElement</span><span style="color:#000">(</span><span style="color:#000">Object</span> <span style="color:#000">obj</span><span style="color:#000">)</span> <span style="color:#000">{</span>
		<span style="color:#177500">// 修改次数加1
</span><span style="color:#177500"></span>    <span style="color:#000">modCount</span><span style="color:#000">++;</span>
		<span style="color:#177500">// 找到指定元素的索引位置（最小的那个）
</span><span style="color:#177500"></span>    <span style="color:#a90d91">int</span> <span style="color:#000">i</span> <span style="color:#000">=</span> <span style="color:#000">indexOf</span><span style="color:#000">(</span><span style="color:#000">obj</span><span style="color:#000">);</span>
		<span style="color:#177500">// 如果找到了，则删除并返回true，否则返回false
</span><span style="color:#177500"></span>    <span style="color:#a90d91">if</span> <span style="color:#000">(</span><span style="color:#000">i</span> <span style="color:#000">&gt;=</span> <span style="color:#000">0</span><span style="color:#000">)</span> <span style="color:#000">{</span>
				<span style="color:#177500">// 删除指定索引位置的元素
</span><span style="color:#177500"></span>        <span style="color:#000">removeElementAt</span><span style="color:#000">(</span><span style="color:#000">i</span><span style="color:#000">);</span>
        <span style="color:#a90d91">return</span> <span style="color:#a90d91">true</span><span style="color:#000">;</span>
    <span style="color:#000">}</span>
    <span style="color:#a90d91">return</span> <span style="color:#a90d91">false</span><span style="color:#000">;</span>
<span style="color:#000">}</span>
</code></pre></div><hr>
<div class="gdoc-page__anchorwrap">
    <h1 id="34-public-synchronized-void-removeallelements">
        34. public synchronized void removeAllElements()
        <a data-clipboard-text="https://hongmao.run/jdk8-src-note/java/util/Vector/#34-public-synchronized-void-removeallelements" class="gdoc-page__anchor gdoc-page__anchor--right clip" aria-label="Anchor 34. public synchronized void removeAllElements()" href="#34-public-synchronized-void-removeallelements">
            <svg class="icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
        </a>
    </h1>
</div><p>删除此vector中的所有组件并将其大小设置为零。</p>
<p>此方法在功能上与<code>clear</code>方法（它是<code>List</code>接口的一部分）相同。</p>
<p>源码如下：</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2"><code class="language-java" data-lang="java"><span style="color:#a90d91">public</span> <span style="color:#a90d91">synchronized</span> <span style="color:#a90d91">void</span> <span style="color:#000">removeAllElements</span><span style="color:#000">()</span> <span style="color:#000">{</span>
		<span style="color:#177500">// 修改次数加1
</span><span style="color:#177500"></span>    <span style="color:#000">modCount</span><span style="color:#000">++;</span>
    <span style="color:#177500">// Let gc do its work
</span><span style="color:#177500"></span>		<span style="color:#177500">// 遍历数组，将所有元素置为null，以使其可被垃圾回收
</span><span style="color:#177500"></span>    <span style="color:#a90d91">for</span> <span style="color:#000">(</span><span style="color:#a90d91">int</span> <span style="color:#000">i</span> <span style="color:#000">=</span> <span style="color:#000">0</span><span style="color:#000">;</span> <span style="color:#000">i</span> <span style="color:#000">&lt;</span> <span style="color:#000">elementCount</span><span style="color:#000">;</span> <span style="color:#000">i</span><span style="color:#000">++)</span>
        <span style="color:#000">elementData</span><span style="color:#000">[</span><span style="color:#000">i</span><span style="color:#000">]</span> <span style="color:#000">=</span> <span style="color:#a90d91">null</span><span style="color:#000">;</span>

		<span style="color:#177500">// 将元素个数置为0
</span><span style="color:#177500"></span>    <span style="color:#000">elementCount</span> <span style="color:#000">=</span> <span style="color:#000">0</span><span style="color:#000">;</span>
<span style="color:#000">}</span>
</code></pre></div><hr>
<div class="gdoc-page__anchorwrap">
    <h1 id="35-public-synchronized-object-clone">
        35. public synchronized Object clone()
        <a data-clipboard-text="https://hongmao.run/jdk8-src-note/java/util/Vector/#35-public-synchronized-object-clone" class="gdoc-page__anchor gdoc-page__anchor--right clip" aria-label="Anchor 35. public synchronized Object clone()" href="#35-public-synchronized-object-clone">
            <svg class="icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
        </a>
    </h1>
</div><p>返回此vector的克隆。该副本将包含对内部数据数组副本的引用，而不是对这个<code>Vector</code>对象的原始内部数据数组的引用。</p>
<p>源码如下：</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2"><code class="language-java" data-lang="java"><span style="color:#a90d91">public</span> <span style="color:#a90d91">synchronized</span> <span style="color:#000">Object</span> <span style="color:#000">clone</span><span style="color:#000">()</span> <span style="color:#000">{</span>
    <span style="color:#a90d91">try</span> <span style="color:#000">{</span>
				<span style="color:#177500">// 调用Object的clone方法获取一个Vector对象，但此时持有元素的数据数组未被复制
</span><span style="color:#177500"></span>        <span style="color:#000">@SuppressWarnings</span><span style="color:#000">(</span><span style="color:#c41a16">&#34;unchecked&#34;</span><span style="color:#000">)</span>
            <span style="color:#000">Vector</span><span style="color:#000">&lt;</span><span style="color:#000">E</span><span style="color:#000">&gt;</span> <span style="color:#000">v</span> <span style="color:#000">=</span> <span style="color:#000">(</span><span style="color:#000">Vector</span><span style="color:#000">&lt;</span><span style="color:#000">E</span><span style="color:#000">&gt;)</span> <span style="color:#a90d91">super</span><span style="color:#000">.</span><span style="color:#836c28">clone</span><span style="color:#000">();</span>
				<span style="color:#177500">// 将持有元素的数据数组复制一份，并赋值给上面新得到的Vector对象
</span><span style="color:#177500"></span>        <span style="color:#000">v</span><span style="color:#000">.</span><span style="color:#836c28">elementData</span> <span style="color:#000">=</span> <span style="color:#000">Arrays</span><span style="color:#000">.</span><span style="color:#836c28">copyOf</span><span style="color:#000">(</span><span style="color:#000">elementData</span><span style="color:#000">,</span> <span style="color:#000">elementCount</span><span style="color:#000">);</span>
				<span style="color:#177500">// 修改次数赋值为0
</span><span style="color:#177500"></span>        <span style="color:#000">v</span><span style="color:#000">.</span><span style="color:#836c28">modCount</span> <span style="color:#000">=</span> <span style="color:#000">0</span><span style="color:#000">;</span>
        <span style="color:#a90d91">return</span> <span style="color:#000">v</span><span style="color:#000">;</span>
    <span style="color:#000">}</span> <span style="color:#a90d91">catch</span> <span style="color:#000">(</span><span style="color:#000">CloneNotSupportedException</span> <span style="color:#000">e</span><span style="color:#000">)</span> <span style="color:#000">{</span>
        <span style="color:#177500">// this shouldn&#39;t happen, since we are Cloneable
</span><span style="color:#177500"></span>        <span style="color:#a90d91">throw</span> <span style="color:#a90d91">new</span> <span style="color:#000">InternalError</span><span style="color:#000">(</span><span style="color:#000">e</span><span style="color:#000">);</span>
    <span style="color:#000">}</span>
<span style="color:#000">}</span>
</code></pre></div><hr>
<div class="gdoc-page__anchorwrap">
    <h1 id="36-public-synchronized-object-toarray">
        36. public synchronized Object[] toArray()
        <a data-clipboard-text="https://hongmao.run/jdk8-src-note/java/util/Vector/#36-public-synchronized-object-toarray" class="gdoc-page__anchor gdoc-page__anchor--right clip" aria-label="Anchor 36. public synchronized Object[] toArray()" href="#36-public-synchronized-object-toarray">
            <svg class="icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
        </a>
    </h1>
</div><p>以正确的顺序返回包含此<code>Vector</code>中所有元素的数组。</p>
<p>源码如下：</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2"><code class="language-java" data-lang="java"><span style="color:#a90d91">public</span> <span style="color:#a90d91">synchronized</span> <span style="color:#000">Object</span><span style="color:#000">[]</span> <span style="color:#000">toArray</span><span style="color:#000">()</span> <span style="color:#000">{</span>
		<span style="color:#177500">// 返回的是内部数据数组的副本
</span><span style="color:#177500"></span>    <span style="color:#a90d91">return</span> <span style="color:#000">Arrays</span><span style="color:#000">.</span><span style="color:#836c28">copyOf</span><span style="color:#000">(</span><span style="color:#000">elementData</span><span style="color:#000">,</span> <span style="color:#000">elementCount</span><span style="color:#000">);</span>
<span style="color:#000">}</span>
</code></pre></div><hr>
<div class="gdoc-page__anchorwrap">
    <h1 id="37-public-synchronized-ltt-t-toarrayt-a">
        37. public synchronized &lt;T&gt; T[] toArray(T[] a)
        <a data-clipboard-text="https://hongmao.run/jdk8-src-note/java/util/Vector/#37-public-synchronized-ltt-t-toarrayt-a" class="gdoc-page__anchor gdoc-page__anchor--right clip" aria-label="Anchor 37. public synchronized &lt;T&gt; T[] toArray(T[] a)" href="#37-public-synchronized-ltt-t-toarrayt-a">
            <svg class="icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
        </a>
    </h1>
</div><p>以正确的顺序返回包含此<code>Vector</code>中所有元素的数组；返回数组的运行时类型是指定数组的类型。如果<code>Vector</code>适合指定的数组，则在其中返回。否则，将使用指定数组的运行时类型和此<code>Vector</code>的大小分配一个新数组。</p>
<p>如果<code>Vector</code>适合指定的数组并有剩余空间（即，该数组的元素比<code>Vector</code>多），则紧跟<code>Vector</code>末尾的数组中的元素将设置为<code>null</code>。（如果调用者知道<code>Vector</code>不包含任何空元素，这对于确定<code>Vector</code>的长度很有用。）</p>
<p>源码如下：</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2"><code class="language-java" data-lang="java"><span style="color:#000">@SuppressWarnings</span><span style="color:#000">(</span><span style="color:#c41a16">&#34;unchecked&#34;</span><span style="color:#000">)</span>
<span style="color:#a90d91">public</span> <span style="color:#a90d91">synchronized</span> <span style="color:#000">&lt;</span><span style="color:#000">T</span><span style="color:#000">&gt;</span> <span style="color:#000">T</span><span style="color:#000">[]</span> <span style="color:#000">toArray</span><span style="color:#000">(</span><span style="color:#000">T</span><span style="color:#000">[]</span> <span style="color:#000">a</span><span style="color:#000">)</span> <span style="color:#000">{</span>
		<span style="color:#177500">// 如果指定的数组a的大小小于当前Vector对象的元素个数，则直接数组复制到一个新的数组并返回
</span><span style="color:#177500"></span>    <span style="color:#a90d91">if</span> <span style="color:#000">(</span><span style="color:#000">a</span><span style="color:#000">.</span><span style="color:#836c28">length</span> <span style="color:#000">&lt;</span> <span style="color:#000">elementCount</span><span style="color:#000">)</span>
        <span style="color:#a90d91">return</span> <span style="color:#000">(</span><span style="color:#000">T</span><span style="color:#000">[])</span> <span style="color:#000">Arrays</span><span style="color:#000">.</span><span style="color:#836c28">copyOf</span><span style="color:#000">(</span><span style="color:#000">elementData</span><span style="color:#000">,</span> <span style="color:#000">elementCount</span><span style="color:#000">,</span> <span style="color:#000">a</span><span style="color:#000">.</span><span style="color:#836c28">getClass</span><span style="color:#000">());</span>

		<span style="color:#177500">// 指定数组a的大小大于等于当前Vector对象的元素个数，说明其可以承载当前Vector的所有元素
</span><span style="color:#177500"></span>		<span style="color:#177500">// 将Vector对象中持有元素的数据数组复制到指定的数组a
</span><span style="color:#177500"></span>    <span style="color:#000">System</span><span style="color:#000">.</span><span style="color:#836c28">arraycopy</span><span style="color:#000">(</span><span style="color:#000">elementData</span><span style="color:#000">,</span> <span style="color:#000">0</span><span style="color:#000">,</span> <span style="color:#000">a</span><span style="color:#000">,</span> <span style="color:#000">0</span><span style="color:#000">,</span> <span style="color:#000">elementCount</span><span style="color:#000">);</span>

		<span style="color:#177500">// 如果指定的数组a的容量大于当前Vector对象的大小，则在数组a的最后一个元素的下一个元素设置为null（也即elementCount索引位置）
</span><span style="color:#177500"></span>    <span style="color:#a90d91">if</span> <span style="color:#000">(</span><span style="color:#000">a</span><span style="color:#000">.</span><span style="color:#836c28">length</span> <span style="color:#000">&gt;</span> <span style="color:#000">elementCount</span><span style="color:#000">)</span>
        <span style="color:#000">a</span><span style="color:#000">[</span><span style="color:#000">elementCount</span><span style="color:#000">]</span> <span style="color:#000">=</span> <span style="color:#a90d91">null</span><span style="color:#000">;</span>

    <span style="color:#a90d91">return</span> <span style="color:#000">a</span><span style="color:#000">;</span>
<span style="color:#000">}</span>
</code></pre></div><hr>
<div class="gdoc-page__anchorwrap">
    <h1 id="38-e-elementdataint-index">
        38. E elementData(int index)
        <a data-clipboard-text="https://hongmao.run/jdk8-src-note/java/util/Vector/#38-e-elementdataint-index" class="gdoc-page__anchor gdoc-page__anchor--right clip" aria-label="Anchor 38. E elementData(int index)" href="#38-e-elementdataint-index">
            <svg class="icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
        </a>
    </h1>
</div><p>获取指定索引位置的元素。</p>
<p>源码如下：</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2"><code class="language-java" data-lang="java"><span style="color:#000">@SuppressWarnings</span><span style="color:#000">(</span><span style="color:#c41a16">&#34;unchecked&#34;</span><span style="color:#000">)</span>
<span style="color:#000">E</span> <span style="color:#000">elementData</span><span style="color:#000">(</span><span style="color:#a90d91">int</span> <span style="color:#000">index</span><span style="color:#000">)</span> <span style="color:#000">{</span>
		<span style="color:#177500">// 直接从数组中取出指定索引位置的元素
</span><span style="color:#177500"></span>    <span style="color:#a90d91">return</span> <span style="color:#000">(</span><span style="color:#000">E</span><span style="color:#000">)</span> <span style="color:#000">elementData</span><span style="color:#000">[</span><span style="color:#000">index</span><span style="color:#000">];</span>
<span style="color:#000">}</span>
</code></pre></div><hr>
<div class="gdoc-page__anchorwrap">
    <h1 id="39-public-synchronized-e-getint-index">
        39. public synchronized E get(int index)
        <a data-clipboard-text="https://hongmao.run/jdk8-src-note/java/util/Vector/#39-public-synchronized-e-getint-index" class="gdoc-page__anchor gdoc-page__anchor--right clip" aria-label="Anchor 39. public synchronized E get(int index)" href="#39-public-synchronized-e-getint-index">
            <svg class="icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
        </a>
    </h1>
</div><p>返回此<code>Vector</code>中指定位置的元素。</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2"><code class="language-java" data-lang="java"><span style="color:#a90d91">public</span> <span style="color:#a90d91">synchronized</span> <span style="color:#000">E</span> <span style="color:#000">get</span><span style="color:#000">(</span><span style="color:#a90d91">int</span> <span style="color:#000">index</span><span style="color:#000">)</span> <span style="color:#000">{</span>
		<span style="color:#177500">// 指定索引的合法性检查
</span><span style="color:#177500"></span>    <span style="color:#a90d91">if</span> <span style="color:#000">(</span><span style="color:#000">index</span> <span style="color:#000">&gt;=</span> <span style="color:#000">elementCount</span><span style="color:#000">)</span>
        <span style="color:#a90d91">throw</span> <span style="color:#a90d91">new</span> <span style="color:#000">ArrayIndexOutOfBoundsException</span><span style="color:#000">(</span><span style="color:#000">index</span><span style="color:#000">);</span>

		<span style="color:#177500">// 返回数组中指定位置的元素
</span><span style="color:#177500"></span>    <span style="color:#a90d91">return</span> <span style="color:#000">elementData</span><span style="color:#000">(</span><span style="color:#000">index</span><span style="color:#000">);</span>
<span style="color:#000">}</span>
</code></pre></div><hr>
<div class="gdoc-page__anchorwrap">
    <h1 id="40-public-synchronized-e-setint-index-e-element">
        40. public synchronized E set(int index, E element)
        <a data-clipboard-text="https://hongmao.run/jdk8-src-note/java/util/Vector/#40-public-synchronized-e-setint-index-e-element" class="gdoc-page__anchor gdoc-page__anchor--right clip" aria-label="Anchor 40. public synchronized E set(int index, E element)" href="#40-public-synchronized-e-setint-index-e-element">
            <svg class="icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
        </a>
    </h1>
</div><p>用指定的元素替换此<code>Vector</code>中指定位置的元素。</p>
<p>源码如下：</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2"><code class="language-java" data-lang="java"><span style="color:#a90d91">public</span> <span style="color:#a90d91">synchronized</span> <span style="color:#000">E</span> <span style="color:#000">set</span><span style="color:#000">(</span><span style="color:#a90d91">int</span> <span style="color:#000">index</span><span style="color:#000">,</span> <span style="color:#000">E</span> <span style="color:#000">element</span><span style="color:#000">)</span> <span style="color:#000">{</span>
		<span style="color:#177500">// 指定索引的合法性检查
</span><span style="color:#177500"></span>    <span style="color:#a90d91">if</span> <span style="color:#000">(</span><span style="color:#000">index</span> <span style="color:#000">&gt;=</span> <span style="color:#000">elementCount</span><span style="color:#000">)</span>
        <span style="color:#a90d91">throw</span> <span style="color:#a90d91">new</span> <span style="color:#000">ArrayIndexOutOfBoundsException</span><span style="color:#000">(</span><span style="color:#000">index</span><span style="color:#000">);</span>

		<span style="color:#177500">// 取出指定索引位置的原值
</span><span style="color:#177500"></span>    <span style="color:#000">E</span> <span style="color:#000">oldValue</span> <span style="color:#000">=</span> <span style="color:#000">elementData</span><span style="color:#000">(</span><span style="color:#000">index</span><span style="color:#000">);</span>
		<span style="color:#177500">// 将指定索引位置的元素替换为指定的元素
</span><span style="color:#177500"></span>    <span style="color:#000">elementData</span><span style="color:#000">[</span><span style="color:#000">index</span><span style="color:#000">]</span> <span style="color:#000">=</span> <span style="color:#000">element</span><span style="color:#000">;</span>
		<span style="color:#177500">// 返回此索引位置的原值
</span><span style="color:#177500"></span>    <span style="color:#a90d91">return</span> <span style="color:#000">oldValue</span><span style="color:#000">;</span>
<span style="color:#000">}</span>
</code></pre></div><hr>
<div class="gdoc-page__anchorwrap">
    <h1 id="41-public-synchronized-boolean-adde-e">
        41. public synchronized boolean add(E e)
        <a data-clipboard-text="https://hongmao.run/jdk8-src-note/java/util/Vector/#41-public-synchronized-boolean-adde-e" class="gdoc-page__anchor gdoc-page__anchor--right clip" aria-label="Anchor 41. public synchronized boolean add(E e)" href="#41-public-synchronized-boolean-adde-e">
            <svg class="icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
        </a>
    </h1>
</div><p>将指定的元素附加到此<code>Vector</code>的末尾。</p>
<p>源码如下：</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2"><code class="language-java" data-lang="java"><span style="color:#a90d91">public</span> <span style="color:#a90d91">synchronized</span> <span style="color:#a90d91">boolean</span> <span style="color:#000">add</span><span style="color:#000">(</span><span style="color:#000">E</span> <span style="color:#000">e</span><span style="color:#000">)</span> <span style="color:#000">{</span>
		<span style="color:#177500">// 修改次数加1
</span><span style="color:#177500"></span>    <span style="color:#000">modCount</span><span style="color:#000">++;</span>
		<span style="color:#177500">// 确保容量足够
</span><span style="color:#177500"></span>    <span style="color:#000">ensureCapacityHelper</span><span style="color:#000">(</span><span style="color:#000">elementCount</span> <span style="color:#000">+</span> <span style="color:#000">1</span><span style="color:#000">);</span>
		<span style="color:#177500">// 将数组的elementCount索引位置设置为指定元素e，然后将elementCount加1
</span><span style="color:#177500"></span>    <span style="color:#000">elementData</span><span style="color:#000">[</span><span style="color:#000">elementCount</span><span style="color:#000">++]</span> <span style="color:#000">=</span> <span style="color:#000">e</span><span style="color:#000">;</span>
    <span style="color:#a90d91">return</span> <span style="color:#a90d91">true</span><span style="color:#000">;</span>
<span style="color:#000">}</span>
</code></pre></div><hr>
<div class="gdoc-page__anchorwrap">
    <h1 id="42-public-boolean-removeobject-o">
        42. public boolean remove(Object o)
        <a data-clipboard-text="https://hongmao.run/jdk8-src-note/java/util/Vector/#42-public-boolean-removeobject-o" class="gdoc-page__anchor gdoc-page__anchor--right clip" aria-label="Anchor 42. public boolean remove(Object o)" href="#42-public-boolean-removeobject-o">
            <svg class="icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
        </a>
    </h1>
</div><p>移除此<code>Vector</code>中第一次出现的指定元素，如果<code>Vector</code>不包含该元素，则它保持不变。更正式地说，删除满足<code>(o==null ? get(i)==null : o.equals(get(i)))</code>的最低索引<code>i</code>的元素，（如果存在这样的元素）。</p>
<p>源码如下：</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2"><code class="language-java" data-lang="java"><span style="color:#a90d91">public</span> <span style="color:#a90d91">boolean</span> <span style="color:#000">remove</span><span style="color:#000">(</span><span style="color:#000">Object</span> <span style="color:#000">o</span><span style="color:#000">)</span> <span style="color:#000">{</span>
    <span style="color:#a90d91">return</span> <span style="color:#000">removeElement</span><span style="color:#000">(</span><span style="color:#000">o</span><span style="color:#000">);</span>
<span style="color:#000">}</span>
</code></pre></div><hr>
<div class="gdoc-page__anchorwrap">
    <h1 id="43-public-void-addint-index-e-element">
        43. public void add(int index, E element)
        <a data-clipboard-text="https://hongmao.run/jdk8-src-note/java/util/Vector/#43-public-void-addint-index-e-element" class="gdoc-page__anchor gdoc-page__anchor--right clip" aria-label="Anchor 43. public void add(int index, E element)" href="#43-public-void-addint-index-e-element">
            <svg class="icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
        </a>
    </h1>
</div><p>在此<code>Vector</code>的指定位置插入指定元素。将当前在该位置的元素（如果有）和任何后续元素向右移动（将它们的索引加一）。</p>
<p>源码如下：</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2"><code class="language-java" data-lang="java"><span style="color:#a90d91">public</span> <span style="color:#a90d91">void</span> <span style="color:#000">add</span><span style="color:#000">(</span><span style="color:#a90d91">int</span> <span style="color:#000">index</span><span style="color:#000">,</span> <span style="color:#000">E</span> <span style="color:#000">element</span><span style="color:#000">)</span> <span style="color:#000">{</span>
    <span style="color:#000">insertElementAt</span><span style="color:#000">(</span><span style="color:#000">element</span><span style="color:#000">,</span> <span style="color:#000">index</span><span style="color:#000">);</span>
<span style="color:#000">}</span>
</code></pre></div><hr>
<div class="gdoc-page__anchorwrap">
    <h1 id="44-public-synchronized-e-removeint-index">
        44. public synchronized E remove(int index)
        <a data-clipboard-text="https://hongmao.run/jdk8-src-note/java/util/Vector/#44-public-synchronized-e-removeint-index" class="gdoc-page__anchor gdoc-page__anchor--right clip" aria-label="Anchor 44. public synchronized E remove(int index)" href="#44-public-synchronized-e-removeint-index">
            <svg class="icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
        </a>
    </h1>
</div><p>移除此<code>Vector</code>中指定位置的元素。将任何后续元素向左移动（将它们的索引中减一）。返回从<code>Vector</code>中删除的元素。</p>
<p>源码如下：</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2"><code class="language-java" data-lang="java"><span style="color:#a90d91">public</span> <span style="color:#a90d91">synchronized</span> <span style="color:#000">E</span> <span style="color:#000">remove</span><span style="color:#000">(</span><span style="color:#a90d91">int</span> <span style="color:#000">index</span><span style="color:#000">)</span> <span style="color:#000">{</span>
		<span style="color:#177500">// 修改次数加1
</span><span style="color:#177500"></span>    <span style="color:#000">modCount</span><span style="color:#000">++;</span>
		<span style="color:#177500">// 指定索引的合法性校验
</span><span style="color:#177500"></span>    <span style="color:#a90d91">if</span> <span style="color:#000">(</span><span style="color:#000">index</span> <span style="color:#000">&gt;=</span> <span style="color:#000">elementCount</span><span style="color:#000">)</span>
        <span style="color:#a90d91">throw</span> <span style="color:#a90d91">new</span> <span style="color:#000">ArrayIndexOutOfBoundsException</span><span style="color:#000">(</span><span style="color:#000">index</span><span style="color:#000">);</span>
		<span style="color:#177500">// 取出指定索引位置的原值
</span><span style="color:#177500"></span>    <span style="color:#000">E</span> <span style="color:#000">oldValue</span> <span style="color:#000">=</span> <span style="color:#000">elementData</span><span style="color:#000">(</span><span style="color:#000">index</span><span style="color:#000">);</span>

		<span style="color:#177500">// 需要移动索引位置的元素个数 = 指定索引及其后面的元素
</span><span style="color:#177500"></span>    <span style="color:#a90d91">int</span> <span style="color:#000">numMoved</span> <span style="color:#000">=</span> <span style="color:#000">elementCount</span> <span style="color:#000">-</span> <span style="color:#000">index</span> <span style="color:#000">-</span> <span style="color:#000">1</span><span style="color:#000">;</span>
		<span style="color:#177500">// 需要移动索引的元素个数大于0，则通过数组复制进行批量移动
</span><span style="color:#177500"></span>    <span style="color:#a90d91">if</span> <span style="color:#000">(</span><span style="color:#000">numMoved</span> <span style="color:#000">&gt;</span> <span style="color:#000">0</span><span style="color:#000">)</span>
        <span style="color:#000">System</span><span style="color:#000">.</span><span style="color:#836c28">arraycopy</span><span style="color:#000">(</span><span style="color:#000">elementData</span><span style="color:#000">,</span> <span style="color:#000">index</span><span style="color:#000">+</span><span style="color:#000">1</span><span style="color:#000">,</span> <span style="color:#000">elementData</span><span style="color:#000">,</span> <span style="color:#000">index</span><span style="color:#000">,</span>
                         <span style="color:#000">numMoved</span><span style="color:#000">);</span>
		<span style="color:#177500">// 将元素个数减1，然后将元素个数位置的元素置为null，以使其可被垃圾回收
</span><span style="color:#177500"></span>    <span style="color:#000">elementData</span><span style="color:#000">[--</span><span style="color:#000">elementCount</span><span style="color:#000">]</span> <span style="color:#000">=</span> <span style="color:#a90d91">null</span><span style="color:#000">;</span> <span style="color:#177500">// Let gc do its work
</span><span style="color:#177500"></span>
		<span style="color:#177500">// 返回原值
</span><span style="color:#177500"></span>    <span style="color:#a90d91">return</span> <span style="color:#000">oldValue</span><span style="color:#000">;</span>
<span style="color:#000">}</span>
</code></pre></div><hr>
<div class="gdoc-page__anchorwrap">
    <h1 id="45-public-void-clear">
        45. public void clear()
        <a data-clipboard-text="https://hongmao.run/jdk8-src-note/java/util/Vector/#45-public-void-clear" class="gdoc-page__anchor gdoc-page__anchor--right clip" aria-label="Anchor 45. public void clear()" href="#45-public-void-clear">
            <svg class="icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
        </a>
    </h1>
</div><p>从此<code>Vector</code>中删除所有元素。此调用返回后，<code>Vector</code>将为空（除非它引发异常）。</p>
<p>源码如下：</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2"><code class="language-java" data-lang="java"><span style="color:#a90d91">public</span> <span style="color:#a90d91">void</span> <span style="color:#000">clear</span><span style="color:#000">()</span> <span style="color:#000">{</span>
    <span style="color:#000">removeAllElements</span><span style="color:#000">();</span>
<span style="color:#000">}</span>
</code></pre></div><hr>
<div class="gdoc-page__anchorwrap">
    <h1 id="46-public-synchronized-boolean-containsallcollection-c">
        46. public synchronized boolean containsAll(Collection&lt;?&gt; c)
        <a data-clipboard-text="https://hongmao.run/jdk8-src-note/java/util/Vector/#46-public-synchronized-boolean-containsallcollection-c" class="gdoc-page__anchor gdoc-page__anchor--right clip" aria-label="Anchor 46. public synchronized boolean containsAll(Collection&lt;?&gt; c)" href="#46-public-synchronized-boolean-containsallcollection-c">
            <svg class="icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
        </a>
    </h1>
</div><p>如果此<code>Vector</code>包含指定<code>Collection</code>中的所有元素，则返回<code>true</code>。</p>
<p>当指定的集合为空时，会抛出<code>NullPointerException</code>。</p>
<p>源码如下：</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2"><code class="language-java" data-lang="java"><span style="color:#a90d91">public</span> <span style="color:#a90d91">synchronized</span> <span style="color:#a90d91">boolean</span> <span style="color:#000">containsAll</span><span style="color:#000">(</span><span style="color:#000">Collection</span><span style="color:#000">&lt;?&gt;</span> <span style="color:#000">c</span><span style="color:#000">)</span> <span style="color:#000">{</span>
		<span style="color:#177500">// 调用AbstractCollection的containsAll进行判断
</span><span style="color:#177500"></span>    <span style="color:#a90d91">return</span> <span style="color:#a90d91">super</span><span style="color:#000">.</span><span style="color:#836c28">containsAll</span><span style="color:#000">(</span><span style="color:#000">c</span><span style="color:#000">);</span>
<span style="color:#000">}</span>
</code></pre></div><hr>
<div class="gdoc-page__anchorwrap">
    <h1 id="47-public-synchronized-boolean-addallcollection-extends-e-c">
        47. public synchronized boolean addAll(Collection&lt;? extends E&gt; c)
        <a data-clipboard-text="https://hongmao.run/jdk8-src-note/java/util/Vector/#47-public-synchronized-boolean-addallcollection-extends-e-c" class="gdoc-page__anchor gdoc-page__anchor--right clip" aria-label="Anchor 47. public synchronized boolean addAll(Collection&lt;? extends E&gt; c)" href="#47-public-synchronized-boolean-addallcollection-extends-e-c">
            <svg class="icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
        </a>
    </h1>
</div><p>将指定<code>Collection</code>中的所有元素按照指定该集合的迭代器返回的顺序追加到此<code>Vector</code>的末尾。如果在操作进行时修改了指定的<code>Collection</code>，则此操作的行为将变得未知。 （这意味着如果指定的<code>Collection</code>是此<code>Vector</code>且此<code>Vector</code>非空，则此次调用的行为未知。）</p>
<p>如果此<code>Vector</code>由于调用而更改，则返回<code>true</code>。</p>
<p>源码如下：</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2"><code class="language-java" data-lang="java"><span style="color:#a90d91">public</span> <span style="color:#a90d91">synchronized</span> <span style="color:#a90d91">boolean</span> <span style="color:#000">addAll</span><span style="color:#000">(</span><span style="color:#000">Collection</span><span style="color:#000">&lt;?</span> <span style="color:#a90d91">extends</span> <span style="color:#000">E</span><span style="color:#000">&gt;</span> <span style="color:#000">c</span><span style="color:#000">)</span> <span style="color:#000">{</span>
		<span style="color:#177500">// 修改次数加1
</span><span style="color:#177500"></span>    <span style="color:#000">modCount</span><span style="color:#000">++;</span>
		<span style="color:#177500">// 将指定的集合转化为数组
</span><span style="color:#177500"></span>    <span style="color:#000">Object</span><span style="color:#000">[]</span> <span style="color:#000">a</span> <span style="color:#000">=</span> <span style="color:#000">c</span><span style="color:#000">.</span><span style="color:#836c28">toArray</span><span style="color:#000">();</span>
		<span style="color:#177500">// 取出数组的长度
</span><span style="color:#177500"></span>    <span style="color:#a90d91">int</span> <span style="color:#000">numNew</span> <span style="color:#000">=</span> <span style="color:#000">a</span><span style="color:#000">.</span><span style="color:#836c28">length</span><span style="color:#000">;</span>
		<span style="color:#177500">// 确保容量足够容纳下此数组
</span><span style="color:#177500"></span>    <span style="color:#000">ensureCapacityHelper</span><span style="color:#000">(</span><span style="color:#000">elementCount</span> <span style="color:#000">+</span> <span style="color:#000">numNew</span><span style="color:#000">);</span>
		<span style="color:#177500">// 将数组a复制到此Vector的最后一个元素后面
</span><span style="color:#177500"></span>    <span style="color:#000">System</span><span style="color:#000">.</span><span style="color:#836c28">arraycopy</span><span style="color:#000">(</span><span style="color:#000">a</span><span style="color:#000">,</span> <span style="color:#000">0</span><span style="color:#000">,</span> <span style="color:#000">elementData</span><span style="color:#000">,</span> <span style="color:#000">elementCount</span><span style="color:#000">,</span> <span style="color:#000">numNew</span><span style="color:#000">);</span>
		<span style="color:#177500">// 增加元素个数
</span><span style="color:#177500"></span>    <span style="color:#000">elementCount</span> <span style="color:#000">+=</span> <span style="color:#000">numNew</span><span style="color:#000">;</span>
		<span style="color:#177500">// 返回新增加的元素个数是否不为0，不为0说明有新元素添加到此Vector，返回true
</span><span style="color:#177500"></span>    <span style="color:#a90d91">return</span> <span style="color:#000">numNew</span> <span style="color:#000">!=</span> <span style="color:#000">0</span><span style="color:#000">;</span>
<span style="color:#000">}</span>
</code></pre></div><hr>
<div class="gdoc-page__anchorwrap">
    <h1 id="48-public-synchronized-boolean-removeallcollection-c">
        48. public synchronized boolean removeAll(Collection&lt;?&gt; c)
        <a data-clipboard-text="https://hongmao.run/jdk8-src-note/java/util/Vector/#48-public-synchronized-boolean-removeallcollection-c" class="gdoc-page__anchor gdoc-page__anchor--right clip" aria-label="Anchor 48. public synchronized boolean removeAll(Collection&lt;?&gt; c)" href="#48-public-synchronized-boolean-removeallcollection-c">
            <svg class="icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
        </a>
    </h1>
</div><p>从此<code>Vector</code>中删除包含在指定<code>Collection</code>中的所有元素。</p>
<p>源码如下：</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2"><code class="language-java" data-lang="java"><span style="color:#a90d91">public</span> <span style="color:#a90d91">synchronized</span> <span style="color:#a90d91">boolean</span> <span style="color:#000">removeAll</span><span style="color:#000">(</span><span style="color:#000">Collection</span><span style="color:#000">&lt;?&gt;</span> <span style="color:#000">c</span><span style="color:#000">)</span> <span style="color:#000">{</span>
		<span style="color:#177500">// 调用AbstractCollection的removeAll方法
</span><span style="color:#177500"></span>    <span style="color:#a90d91">return</span> <span style="color:#a90d91">super</span><span style="color:#000">.</span><span style="color:#836c28">removeAll</span><span style="color:#000">(</span><span style="color:#000">c</span><span style="color:#000">);</span>
<span style="color:#000">}</span>
</code></pre></div><hr>
<div class="gdoc-page__anchorwrap">
    <h1 id="49-public-synchronized-boolean-retainallcollection-c">
        49. public synchronized boolean retainAll(Collection&lt;?&gt; c)
        <a data-clipboard-text="https://hongmao.run/jdk8-src-note/java/util/Vector/#49-public-synchronized-boolean-retainallcollection-c" class="gdoc-page__anchor gdoc-page__anchor--right clip" aria-label="Anchor 49. public synchronized boolean retainAll(Collection&lt;?&gt; c)" href="#49-public-synchronized-boolean-retainallcollection-c">
            <svg class="icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
        </a>
    </h1>
</div><p>仅保留此<code>Vector</code>中包含在指定<code>Collection</code>中的元素。换句话说，从此<code>Vector</code>中删除所有未包含在指定<code>Collection</code>中的元素。</p>
<p>源码如下：</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2"><code class="language-java" data-lang="java"><span style="color:#a90d91">public</span> <span style="color:#a90d91">synchronized</span> <span style="color:#a90d91">boolean</span> <span style="color:#000">retainAll</span><span style="color:#000">(</span><span style="color:#000">Collection</span><span style="color:#000">&lt;?&gt;</span> <span style="color:#000">c</span><span style="color:#000">)</span> <span style="color:#000">{</span>
		<span style="color:#177500">// 调用AbstractCollection的retainAll方法
</span><span style="color:#177500"></span>    <span style="color:#a90d91">return</span> <span style="color:#a90d91">super</span><span style="color:#000">.</span><span style="color:#836c28">retainAll</span><span style="color:#000">(</span><span style="color:#000">c</span><span style="color:#000">);</span>
<span style="color:#000">}</span>
</code></pre></div><hr>
<div class="gdoc-page__anchorwrap">
    <h1 id="50-public-synchronized-boolean-addallint-index-collection-extends-e-c">
        50. public synchronized boolean addAll(int index, Collection&lt;? extends E&gt; c)
        <a data-clipboard-text="https://hongmao.run/jdk8-src-note/java/util/Vector/#50-public-synchronized-boolean-addallint-index-collection-extends-e-c" class="gdoc-page__anchor gdoc-page__anchor--right clip" aria-label="Anchor 50. public synchronized boolean addAll(int index, Collection&lt;? extends E&gt; c)" href="#50-public-synchronized-boolean-addallint-index-collection-extends-e-c">
            <svg class="icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
        </a>
    </h1>
</div><p>将指定<code>Collection</code>中的所有元素插入此<code>Vector</code>的指定位置。将当前在该位置的元素（如果有）和任何后续元素向右移动（增加它们的索引）。新元素将按照指定集合的迭代器返回的顺序出现在<code>Vector</code>中。</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2"><code class="language-java" data-lang="java"><span style="color:#a90d91">public</span> <span style="color:#a90d91">synchronized</span> <span style="color:#a90d91">boolean</span> <span style="color:#000">addAll</span><span style="color:#000">(</span><span style="color:#a90d91">int</span> <span style="color:#000">index</span><span style="color:#000">,</span> <span style="color:#000">Collection</span><span style="color:#000">&lt;?</span> <span style="color:#a90d91">extends</span> <span style="color:#000">E</span><span style="color:#000">&gt;</span> <span style="color:#000">c</span><span style="color:#000">)</span> <span style="color:#000">{</span>
		<span style="color:#177500">// 增加修改次数
</span><span style="color:#177500"></span>    <span style="color:#000">modCount</span><span style="color:#000">++;</span>
		<span style="color:#177500">// 指定索引的合法性校验，大于等于0 且 小于等于元素个数
</span><span style="color:#177500"></span>    <span style="color:#a90d91">if</span> <span style="color:#000">(</span><span style="color:#000">index</span> <span style="color:#000">&lt;</span> <span style="color:#000">0</span> <span style="color:#000">||</span> <span style="color:#000">index</span> <span style="color:#000">&gt;</span> <span style="color:#000">elementCount</span><span style="color:#000">)</span>
        <span style="color:#a90d91">throw</span> <span style="color:#a90d91">new</span> <span style="color:#000">ArrayIndexOutOfBoundsException</span><span style="color:#000">(</span><span style="color:#000">index</span><span style="color:#000">);</span>

		<span style="color:#177500">// 将指定集合转化为数组
</span><span style="color:#177500"></span>    <span style="color:#000">Object</span><span style="color:#000">[]</span> <span style="color:#000">a</span> <span style="color:#000">=</span> <span style="color:#000">c</span><span style="color:#000">.</span><span style="color:#836c28">toArray</span><span style="color:#000">();</span>
		<span style="color:#177500">// 数组大小
</span><span style="color:#177500"></span>    <span style="color:#a90d91">int</span> <span style="color:#000">numNew</span> <span style="color:#000">=</span> <span style="color:#000">a</span><span style="color:#000">.</span><span style="color:#836c28">length</span><span style="color:#000">;</span>
		<span style="color:#177500">// 确保此Vector的容量足够容纳下指定集合的所有元素
</span><span style="color:#177500"></span>    <span style="color:#000">ensureCapacityHelper</span><span style="color:#000">(</span><span style="color:#000">elementCount</span> <span style="color:#000">+</span> <span style="color:#000">numNew</span><span style="color:#000">);</span>

		<span style="color:#177500">// 需移动索引的元素个数
</span><span style="color:#177500"></span>    <span style="color:#a90d91">int</span> <span style="color:#000">numMoved</span> <span style="color:#000">=</span> <span style="color:#000">elementCount</span> <span style="color:#000">-</span> <span style="color:#000">index</span><span style="color:#000">;</span>
		<span style="color:#177500">// 如果需移动索引的元素个数大于0，则执行数组复制，先往后移动这些元素
</span><span style="color:#177500"></span>    <span style="color:#a90d91">if</span> <span style="color:#000">(</span><span style="color:#000">numMoved</span> <span style="color:#000">&gt;</span> <span style="color:#000">0</span><span style="color:#000">)</span>
        <span style="color:#000">System</span><span style="color:#000">.</span><span style="color:#836c28">arraycopy</span><span style="color:#000">(</span><span style="color:#000">elementData</span><span style="color:#000">,</span> <span style="color:#000">index</span><span style="color:#000">,</span> <span style="color:#000">elementData</span><span style="color:#000">,</span> <span style="color:#000">index</span> <span style="color:#000">+</span> <span style="color:#000">numNew</span><span style="color:#000">,</span>
                         <span style="color:#000">numMoved</span><span style="color:#000">);</span>

		<span style="color:#177500">// 将指定集合转化的数组复制到此Vector数据数组的指定位置
</span><span style="color:#177500"></span>    <span style="color:#000">System</span><span style="color:#000">.</span><span style="color:#836c28">arraycopy</span><span style="color:#000">(</span><span style="color:#000">a</span><span style="color:#000">,</span> <span style="color:#000">0</span><span style="color:#000">,</span> <span style="color:#000">elementData</span><span style="color:#000">,</span> <span style="color:#000">index</span><span style="color:#000">,</span> <span style="color:#000">numNew</span><span style="color:#000">);</span>
		<span style="color:#177500">// 元素个数增加
</span><span style="color:#177500"></span>    <span style="color:#000">elementCount</span> <span style="color:#000">+=</span> <span style="color:#000">numNew</span><span style="color:#000">;</span>
		<span style="color:#177500">// 返回是否新增了元素至此Vector
</span><span style="color:#177500"></span>    <span style="color:#a90d91">return</span> <span style="color:#000">numNew</span> <span style="color:#000">!=</span> <span style="color:#000">0</span><span style="color:#000">;</span>
<span style="color:#000">}</span>
</code></pre></div><hr>
<div class="gdoc-page__anchorwrap">
    <h1 id="51-public-synchronized-boolean-equalsobject-o">
        51. public synchronized boolean equals(Object o)
        <a data-clipboard-text="https://hongmao.run/jdk8-src-note/java/util/Vector/#51-public-synchronized-boolean-equalsobject-o" class="gdoc-page__anchor gdoc-page__anchor--right clip" aria-label="Anchor 51. public synchronized boolean equals(Object o)" href="#51-public-synchronized-boolean-equalsobject-o">
            <svg class="icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
        </a>
    </h1>
</div><p>比较指定的<code>Object</code>与此<code>Vector</code>是否相等。当且仅当指定的<code>Object</code>也是一个<code>List</code>，两个<code>List</code>的大小相同，并且两个<code>List</code>中所有对应的元素对都相等时，才返回<code>true</code>。（如果<code>(e1==null ? e2==null : e1.equals(e2))</code>，说明两个元素<code>e1</code>和<code>e2</code>相等。）换句话说, 如果两个<code>List</code>以相同的顺序包含相同的元素，则它们被定义为相等。</p>
<p>源码如下：</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2"><code class="language-java" data-lang="java"><span style="color:#a90d91">public</span> <span style="color:#a90d91">synchronized</span> <span style="color:#a90d91">boolean</span> <span style="color:#000">equals</span><span style="color:#000">(</span><span style="color:#000">Object</span> <span style="color:#000">o</span><span style="color:#000">)</span> <span style="color:#000">{</span>
		<span style="color:#177500">// 调用AbstractList的equals方法
</span><span style="color:#177500"></span>    <span style="color:#a90d91">return</span> <span style="color:#a90d91">super</span><span style="color:#000">.</span><span style="color:#836c28">equals</span><span style="color:#000">(</span><span style="color:#000">o</span><span style="color:#000">);</span>
<span style="color:#000">}</span>
</code></pre></div><hr>
<div class="gdoc-page__anchorwrap">
    <h1 id="52-public-synchronized-int-hashcode">
        52. public synchronized int hashCode()
        <a data-clipboard-text="https://hongmao.run/jdk8-src-note/java/util/Vector/#52-public-synchronized-int-hashcode" class="gdoc-page__anchor gdoc-page__anchor--right clip" aria-label="Anchor 52. public synchronized int hashCode()" href="#52-public-synchronized-int-hashcode">
            <svg class="icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
        </a>
    </h1>
</div><p>返回此<code>Vector</code>的哈希编码值。</p>
<p>源码如下：</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2"><code class="language-java" data-lang="java"><span style="color:#a90d91">public</span> <span style="color:#a90d91">synchronized</span> <span style="color:#a90d91">int</span> <span style="color:#000">hashCode</span><span style="color:#000">()</span> <span style="color:#000">{</span>
		<span style="color:#177500">// 调用AbstractList的hashCode方法
</span><span style="color:#177500"></span>    <span style="color:#a90d91">return</span> <span style="color:#a90d91">super</span><span style="color:#000">.</span><span style="color:#836c28">hashCode</span><span style="color:#000">();</span>
<span style="color:#000">}</span>
</code></pre></div><hr>
<div class="gdoc-page__anchorwrap">
    <h1 id="53-public-synchronized-string-tostring">
        53. public synchronized String toString()
        <a data-clipboard-text="https://hongmao.run/jdk8-src-note/java/util/Vector/#53-public-synchronized-string-tostring" class="gdoc-page__anchor gdoc-page__anchor--right clip" aria-label="Anchor 53. public synchronized String toString()" href="#53-public-synchronized-string-tostring">
            <svg class="icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
        </a>
    </h1>
</div><p>返回此<code>Vector</code>的字符串表示形式，其中包含每个元素的字符串表示形式。</p>
<p>源码如下：</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2"><code class="language-java" data-lang="java"><span style="color:#a90d91">public</span> <span style="color:#a90d91">synchronized</span> <span style="color:#000">String</span> <span style="color:#000">toString</span><span style="color:#000">()</span> <span style="color:#000">{</span>
		<span style="color:#177500">// 调用AbstractCollection的toString方法
</span><span style="color:#177500"></span>    <span style="color:#a90d91">return</span> <span style="color:#a90d91">super</span><span style="color:#000">.</span><span style="color:#836c28">toString</span><span style="color:#000">();</span>
<span style="color:#000">}</span>
</code></pre></div><hr>
<div class="gdoc-page__anchorwrap">
    <h1 id="54-public-synchronized-listlte-sublistint-fromindex-int-toindex">
        54. public synchronized List&lt;E&gt; subList(int fromIndex, int toIndex)
        <a data-clipboard-text="https://hongmao.run/jdk8-src-note/java/util/Vector/#54-public-synchronized-listlte-sublistint-fromindex-int-toindex" class="gdoc-page__anchor gdoc-page__anchor--right clip" aria-label="Anchor 54. public synchronized List&lt;E&gt; subList(int fromIndex, int toIndex)" href="#54-public-synchronized-listlte-sublistint-fromindex-int-toindex">
            <svg class="icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
        </a>
    </h1>
</div><p>返回此<code>List</code>中的<code>fromIndex</code>(包含)和<code>toIndex</code>(不包含)之间部分的视图。 （如果<code>fromIndex</code>和<code>toIndex</code>相等，则返回的<code>List</code>为空。）返回的<code>List</code>基于此<code>List</code>，因此返回的<code>List</code>中的更改会反映在此<code>List</code>中，反之亦然。返回的<code>List</code>支持此<code>List</code>支持的所有可选<code>List</code>操作。</p>
<p>这种方法消除了对显式范围操作（数组通常存在的排序）的需要。通过对子列表视图而不是整个列表进行操作，任何需要列表的操作都可以用作范围操作。例如，以下惯用语法从<code>List</code>中删除一系列元素：<code>list.subList(from, to).clear();</code>，可以为<code>indexOf</code>和<code>lastIndexOf</code>构造类似的习惯用法，并且<code>Collections</code>类中的所有算法都可以应用于子列表。</p>
<p>如果基础列表（即此列表）以除了通过返回列表以外的任何方式进行了结构修改，则此方法返回的列表的语义将变得未知。 （结构修改是那些改变<code>List</code>的大小，或者以其他方式扰乱它，以致正在进行的迭代可能会产生不正确的结果。）</p>
<p>源码如下：</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2"><code class="language-java" data-lang="java"><span style="color:#a90d91">public</span> <span style="color:#a90d91">synchronized</span> <span style="color:#000">List</span><span style="color:#000">&lt;</span><span style="color:#000">E</span><span style="color:#000">&gt;</span> <span style="color:#000">subList</span><span style="color:#000">(</span><span style="color:#a90d91">int</span> <span style="color:#000">fromIndex</span><span style="color:#000">,</span> <span style="color:#a90d91">int</span> <span style="color:#000">toIndex</span><span style="color:#000">)</span> <span style="color:#000">{</span>
		<span style="color:#177500">// 调用Collections中的方法获取一个同步的列表
</span><span style="color:#177500"></span>    <span style="color:#a90d91">return</span> <span style="color:#000">Collections</span><span style="color:#000">.</span><span style="color:#836c28">synchronizedList</span><span style="color:#000">(</span><span style="color:#a90d91">super</span><span style="color:#000">.</span><span style="color:#836c28">subList</span><span style="color:#000">(</span><span style="color:#000">fromIndex</span><span style="color:#000">,</span> <span style="color:#000">toIndex</span><span style="color:#000">),</span>
                                        <span style="color:#a90d91">this</span><span style="color:#000">);</span>
<span style="color:#000">}</span>
</code></pre></div><hr>
<div class="gdoc-page__anchorwrap">
    <h1 id="55-protected-synchronized-void-removerangeint-fromindex-int-toindex">
        55. protected synchronized void removeRange(int fromIndex, int toIndex)
        <a data-clipboard-text="https://hongmao.run/jdk8-src-note/java/util/Vector/#55-protected-synchronized-void-removerangeint-fromindex-int-toindex" class="gdoc-page__anchor gdoc-page__anchor--right clip" aria-label="Anchor 55. protected synchronized void removeRange(int fromIndex, int toIndex)" href="#55-protected-synchronized-void-removerangeint-fromindex-int-toindex">
            <svg class="icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
        </a>
    </h1>
</div><p>从此列表中删除所有索引在<code>fromIndex</code>（含）和<code>toIndex</code>（不含）之间的所有元素。将所有后续元素向左移动（减小其索引）。此调用减小列表的（<code>toIndex-fromIndex</code>）个元素。 （如果<code>toIndex == fromIndex</code>，则此操作无效。）</p>
<p>源码如下：</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2"><code class="language-java" data-lang="java"><span style="color:#a90d91">protected</span> <span style="color:#a90d91">synchronized</span> <span style="color:#a90d91">void</span> <span style="color:#000">removeRange</span><span style="color:#000">(</span><span style="color:#a90d91">int</span> <span style="color:#000">fromIndex</span><span style="color:#000">,</span> <span style="color:#a90d91">int</span> <span style="color:#000">toIndex</span><span style="color:#000">)</span> <span style="color:#000">{</span>
		<span style="color:#177500">// 增加修改次数
</span><span style="color:#177500"></span>    <span style="color:#000">modCount</span><span style="color:#000">++;</span>
		<span style="color:#177500">// 计算出需移动多少个元素
</span><span style="color:#177500"></span>    <span style="color:#a90d91">int</span> <span style="color:#000">numMoved</span> <span style="color:#000">=</span> <span style="color:#000">elementCount</span> <span style="color:#000">-</span> <span style="color:#000">toIndex</span><span style="color:#000">;</span>
		<span style="color:#177500">// 将需移动的元素往前移动至fromIndex处
</span><span style="color:#177500"></span>    <span style="color:#000">System</span><span style="color:#000">.</span><span style="color:#836c28">arraycopy</span><span style="color:#000">(</span><span style="color:#000">elementData</span><span style="color:#000">,</span> <span style="color:#000">toIndex</span><span style="color:#000">,</span> <span style="color:#000">elementData</span><span style="color:#000">,</span> <span style="color:#000">fromIndex</span><span style="color:#000">,</span>
                     <span style="color:#000">numMoved</span><span style="color:#000">);</span>

    <span style="color:#177500">// Let gc do its work
</span><span style="color:#177500"></span>		<span style="color:#177500">// 此时，Vector对象的元素个数未变，因为要被删除的范围内的元素已被其后的元素覆盖
</span><span style="color:#177500"></span>		<span style="color:#177500">// 需要将移动前的索引位置的元素置为空，以促使垃圾回收
</span><span style="color:#177500"></span>		<span style="color:#177500">// 例如：
</span><span style="color:#177500"></span>		<span style="color:#177500">// 原Vector：[0, 1, 2, 3, 4]，现在对其调用removeRange(1, 3)方法
</span><span style="color:#177500"></span>		<span style="color:#177500">// 数组复制后：[0, 3, 4, 3, 4]
</span><span style="color:#177500"></span>		<span style="color:#177500">// 最终：[0, 3, 4]
</span><span style="color:#177500"></span>    <span style="color:#a90d91">int</span> <span style="color:#000">newElementCount</span> <span style="color:#000">=</span> <span style="color:#000">elementCount</span> <span style="color:#000">-</span> <span style="color:#000">(</span><span style="color:#000">toIndex</span><span style="color:#000">-</span><span style="color:#000">fromIndex</span><span style="color:#000">);</span>
    <span style="color:#a90d91">while</span> <span style="color:#000">(</span><span style="color:#000">elementCount</span> <span style="color:#000">!=</span> <span style="color:#000">newElementCount</span><span style="color:#000">)</span>
        <span style="color:#000">elementData</span><span style="color:#000">[--</span><span style="color:#000">elementCount</span><span style="color:#000">]</span> <span style="color:#000">=</span> <span style="color:#a90d91">null</span><span style="color:#000">;</span>
<span style="color:#000">}</span>
</code></pre></div><hr>
<div class="gdoc-page__anchorwrap">
    <h1 id="56-private-void-readobjectobjectinputstream-in--throws-ioexception-classnotfoundexception">
        56. private void readObject(ObjectInputStream in)  throws IOException, ClassNotFoundException
        <a data-clipboard-text="https://hongmao.run/jdk8-src-note/java/util/Vector/#56-private-void-readobjectobjectinputstream-in--throws-ioexception-classnotfoundexception" class="gdoc-page__anchor gdoc-page__anchor--right clip" aria-label="Anchor 56. private void readObject(ObjectInputStream in)  throws IOException, ClassNotFoundException" href="#56-private-void-readobjectobjectinputstream-in--throws-ioexception-classnotfoundexception">
            <svg class="icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
        </a>
    </h1>
</div><p>从流中加载<code>Vector</code>实例（即反序列化它）。此方法执行检查以确保字段的一致性。</p>
<p>源码如下：</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2"><code class="language-java" data-lang="java"><span style="color:#a90d91">private</span> <span style="color:#a90d91">void</span> <span style="color:#000">readObject</span><span style="color:#000">(</span><span style="color:#000">ObjectInputStream</span> <span style="color:#000">in</span><span style="color:#000">)</span>
        <span style="color:#a90d91">throws</span> <span style="color:#000">IOException</span><span style="color:#000">,</span> <span style="color:#000">ClassNotFoundException</span> <span style="color:#000">{</span>
		<span style="color:#177500">// 从流中读取出字段信息
</span><span style="color:#177500"></span>    <span style="color:#000">ObjectInputStream</span><span style="color:#000">.</span><span style="color:#836c28">GetField</span> <span style="color:#000">gfields</span> <span style="color:#000">=</span> <span style="color:#000">in</span><span style="color:#000">.</span><span style="color:#836c28">readFields</span><span style="color:#000">();</span>
		<span style="color:#177500">// 取出elementCount字段的值
</span><span style="color:#177500"></span>    <span style="color:#a90d91">int</span> <span style="color:#000">count</span> <span style="color:#000">=</span> <span style="color:#000">gfields</span><span style="color:#000">.</span><span style="color:#836c28">get</span><span style="color:#000">(</span><span style="color:#c41a16">&#34;elementCount&#34;</span><span style="color:#000">,</span> <span style="color:#000">0</span><span style="color:#000">);</span>
		<span style="color:#177500">// 取出elementData字段的值
</span><span style="color:#177500"></span>    <span style="color:#000">Object</span><span style="color:#000">[]</span> <span style="color:#000">data</span> <span style="color:#000">=</span> <span style="color:#000">(</span><span style="color:#000">Object</span><span style="color:#000">[])</span><span style="color:#000">gfields</span><span style="color:#000">.</span><span style="color:#836c28">get</span><span style="color:#000">(</span><span style="color:#c41a16">&#34;elementData&#34;</span><span style="color:#000">,</span> <span style="color:#a90d91">null</span><span style="color:#000">);</span>
		<span style="color:#177500">// 对取出字段的合理性做校验
</span><span style="color:#177500"></span>		<span style="color:#177500">// 判断包括：count不能小于0 且 data不能为空 且count需与data的长度一致
</span><span style="color:#177500"></span>    <span style="color:#a90d91">if</span> <span style="color:#000">(</span><span style="color:#000">count</span> <span style="color:#000">&lt;</span> <span style="color:#000">0</span> <span style="color:#000">||</span> <span style="color:#000">data</span> <span style="color:#000">==</span> <span style="color:#a90d91">null</span> <span style="color:#000">||</span> <span style="color:#000">count</span> <span style="color:#000">&gt;</span> <span style="color:#000">data</span><span style="color:#000">.</span><span style="color:#836c28">length</span><span style="color:#000">)</span> <span style="color:#000">{</span>
        <span style="color:#a90d91">throw</span> <span style="color:#a90d91">new</span> <span style="color:#000">StreamCorruptedException</span><span style="color:#000">(</span><span style="color:#c41a16">&#34;Inconsistent vector internals&#34;</span><span style="color:#000">);</span>
    <span style="color:#000">}</span>
		<span style="color:#177500">// 将流中的elementCount赋值给当前Vector的elementCount
</span><span style="color:#177500"></span>    <span style="color:#000">elementCount</span> <span style="color:#000">=</span> <span style="color:#000">count</span><span style="color:#000">;</span>
		<span style="color:#177500">// 将流中的elementData数组的拷贝赋值给当前Vector的elementData
</span><span style="color:#177500"></span>    <span style="color:#000">elementData</span> <span style="color:#000">=</span> <span style="color:#000">data</span><span style="color:#000">.</span><span style="color:#836c28">clone</span><span style="color:#000">();</span>
<span style="color:#000">}</span>
</code></pre></div><hr>
<div class="gdoc-page__anchorwrap">
    <h1 id="57-private-void-writeobjectjavaioobjectoutputstream-s-throws-javaioioexception">
        57. private void writeObject(java.io.ObjectOutputStream s) throws java.io.IOException
        <a data-clipboard-text="https://hongmao.run/jdk8-src-note/java/util/Vector/#57-private-void-writeobjectjavaioobjectoutputstream-s-throws-javaioioexception" class="gdoc-page__anchor gdoc-page__anchor--right clip" aria-label="Anchor 57. private void writeObject(java.io.ObjectOutputStream s) throws java.io.IOException" href="#57-private-void-writeobjectjavaioobjectoutputstream-s-throws-javaioioexception">
            <svg class="icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
        </a>
    </h1>
</div><p>将<code>Vector</code>实例的状态保存到流中（即序列化它）。该方法执行同步以保证序列化数据的一致性。</p>
<p>源码如下：</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2"><code class="language-java" data-lang="java"><span style="color:#a90d91">private</span> <span style="color:#a90d91">void</span> <span style="color:#000">writeObject</span><span style="color:#000">(</span><span style="color:#000">java</span><span style="color:#000">.</span><span style="color:#836c28">io</span><span style="color:#000">.</span><span style="color:#836c28">ObjectOutputStream</span> <span style="color:#000">s</span><span style="color:#000">)</span>
        <span style="color:#a90d91">throws</span> <span style="color:#000">java</span><span style="color:#000">.</span><span style="color:#836c28">io</span><span style="color:#000">.</span><span style="color:#836c28">IOException</span> <span style="color:#000">{</span>
    <span style="color:#a90d91">final</span> <span style="color:#000">java</span><span style="color:#000">.</span><span style="color:#836c28">io</span><span style="color:#000">.</span><span style="color:#836c28">ObjectOutputStream</span><span style="color:#000">.</span><span style="color:#836c28">PutField</span> <span style="color:#000">fields</span> <span style="color:#000">=</span> <span style="color:#000">s</span><span style="color:#000">.</span><span style="color:#836c28">putFields</span><span style="color:#000">();</span>
    <span style="color:#a90d91">final</span> <span style="color:#000">Object</span><span style="color:#000">[]</span> <span style="color:#000">data</span><span style="color:#000">;</span>
    <span style="color:#a90d91">synchronized</span> <span style="color:#000">(</span><span style="color:#a90d91">this</span><span style="color:#000">)</span> <span style="color:#000">{</span>
				<span style="color:#177500">// 将capacityIncrement放入流
</span><span style="color:#177500"></span>        <span style="color:#000">fields</span><span style="color:#000">.</span><span style="color:#836c28">put</span><span style="color:#000">(</span><span style="color:#c41a16">&#34;capacityIncrement&#34;</span><span style="color:#000">,</span> <span style="color:#000">capacityIncrement</span><span style="color:#000">);</span>
				<span style="color:#177500">// 将elementCount放入流
</span><span style="color:#177500"></span>        <span style="color:#000">fields</span><span style="color:#000">.</span><span style="color:#836c28">put</span><span style="color:#000">(</span><span style="color:#c41a16">&#34;elementCount&#34;</span><span style="color:#000">,</span> <span style="color:#000">elementCount</span><span style="color:#000">);</span>
				<span style="color:#177500">// 执行对象数组的复制
</span><span style="color:#177500"></span>        <span style="color:#000">data</span> <span style="color:#000">=</span> <span style="color:#000">elementData</span><span style="color:#000">.</span><span style="color:#836c28">clone</span><span style="color:#000">();</span>
    <span style="color:#000">}</span>
		<span style="color:#177500">// 将对象数组的拷贝放入流
</span><span style="color:#177500"></span>    <span style="color:#000">fields</span><span style="color:#000">.</span><span style="color:#836c28">put</span><span style="color:#000">(</span><span style="color:#c41a16">&#34;elementData&#34;</span><span style="color:#000">,</span> <span style="color:#000">data</span><span style="color:#000">);</span>
		<span style="color:#177500">// 将上述设定写入流中
</span><span style="color:#177500"></span>    <span style="color:#000">s</span><span style="color:#000">.</span><span style="color:#836c28">writeFields</span><span style="color:#000">();</span>
<span style="color:#000">}</span>
</code></pre></div><hr>
<div class="gdoc-page__anchorwrap">
    <h1 id="58-public-synchronized-listiteratorlte-listiteratorint-index">
        58. public synchronized ListIterator&lt;E&gt; listIterator(int index)
        <a data-clipboard-text="https://hongmao.run/jdk8-src-note/java/util/Vector/#58-public-synchronized-listiteratorlte-listiteratorint-index" class="gdoc-page__anchor gdoc-page__anchor--right clip" aria-label="Anchor 58. public synchronized ListIterator&lt;E&gt; listIterator(int index)" href="#58-public-synchronized-listiteratorlte-listiteratorint-index">
            <svg class="icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
        </a>
    </h1>
</div><p>返回在此列表元素上从指定位置开始的列表迭代器（以适当的顺序）。指定的索引指示初始调用<code>next</code>将返回的第一个元素。初次调用<code>previous</code>将返回指定索引减一的元素。</p>
<p>返回的列表迭代器是“快速失败”的。</p>
<p>源码如下：</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2"><code class="language-java" data-lang="java"><span style="color:#a90d91">public</span> <span style="color:#a90d91">synchronized</span> <span style="color:#000">ListIterator</span><span style="color:#000">&lt;</span><span style="color:#000">E</span><span style="color:#000">&gt;</span> <span style="color:#000">listIterator</span><span style="color:#000">(</span><span style="color:#a90d91">int</span> <span style="color:#000">index</span><span style="color:#000">)</span> <span style="color:#000">{</span>
		<span style="color:#177500">// 指定索引的合理性校验
</span><span style="color:#177500"></span>    <span style="color:#a90d91">if</span> <span style="color:#000">(</span><span style="color:#000">index</span> <span style="color:#000">&lt;</span> <span style="color:#000">0</span> <span style="color:#000">||</span> <span style="color:#000">index</span> <span style="color:#000">&gt;</span> <span style="color:#000">elementCount</span><span style="color:#000">)</span>
        <span style="color:#a90d91">throw</span> <span style="color:#a90d91">new</span> <span style="color:#000">IndexOutOfBoundsException</span><span style="color:#000">(</span><span style="color:#c41a16">&#34;Index: &#34;</span><span style="color:#000">+</span><span style="color:#000">index</span><span style="color:#000">);</span>
		<span style="color:#177500">// 返回一个ListItr实例
</span><span style="color:#177500"></span>    <span style="color:#a90d91">return</span> <span style="color:#a90d91">new</span> <span style="color:#000">ListItr</span><span style="color:#000">(</span><span style="color:#000">index</span><span style="color:#000">);</span>
<span style="color:#000">}</span>
</code></pre></div><hr>
<div class="gdoc-page__anchorwrap">
    <h1 id="59-public-synchronized-listiteratorlte-listiterator">
        59. public synchronized ListIterator&lt;E&gt; listIterator()
        <a data-clipboard-text="https://hongmao.run/jdk8-src-note/java/util/Vector/#59-public-synchronized-listiteratorlte-listiterator" class="gdoc-page__anchor gdoc-page__anchor--right clip" aria-label="Anchor 59. public synchronized ListIterator&lt;E&gt; listIterator()" href="#59-public-synchronized-listiteratorlte-listiterator">
            <svg class="icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
        </a>
    </h1>
</div><p>返回此列表中的元素的列表迭代器（按适当顺序）。</p>
<p>返回的列表迭代器是“快速失败”的。</p>
<p>源码如下：</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2"><code class="language-java" data-lang="java"><span style="color:#a90d91">public</span> <span style="color:#a90d91">synchronized</span> <span style="color:#000">ListIterator</span><span style="color:#000">&lt;</span><span style="color:#000">E</span><span style="color:#000">&gt;</span> <span style="color:#000">listIterator</span><span style="color:#000">()</span> <span style="color:#000">{</span>
		<span style="color:#177500">// 返回一个从索引位置0处开始的列表迭代器实例
</span><span style="color:#177500"></span>    <span style="color:#a90d91">return</span> <span style="color:#a90d91">new</span> <span style="color:#000">ListItr</span><span style="color:#000">(</span><span style="color:#000">0</span><span style="color:#000">);</span>
<span style="color:#000">}</span>
</code></pre></div><hr>
<div class="gdoc-page__anchorwrap">
    <h1 id="60-public-synchronized-iteratorlte-iterator">
        60. public synchronized Iterator&lt;E&gt; iterator()
        <a data-clipboard-text="https://hongmao.run/jdk8-src-note/java/util/Vector/#60-public-synchronized-iteratorlte-iterator" class="gdoc-page__anchor gdoc-page__anchor--right clip" aria-label="Anchor 60. public synchronized Iterator&lt;E&gt; iterator()" href="#60-public-synchronized-iteratorlte-iterator">
            <svg class="icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
        </a>
    </h1>
</div><p>返回在此列表中元素上的迭代器（以正确的顺序）。</p>
<p>返回的迭代器是“快速失败”的。</p>
<p>源码如下：</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2"><code class="language-java" data-lang="java"><span style="color:#a90d91">public</span> <span style="color:#a90d91">synchronized</span> <span style="color:#000">Iterator</span><span style="color:#000">&lt;</span><span style="color:#000">E</span><span style="color:#000">&gt;</span> <span style="color:#000">iterator</span><span style="color:#000">()</span> <span style="color:#000">{</span>
		<span style="color:#177500">// 返回一个Itr实例
</span><span style="color:#177500"></span>    <span style="color:#a90d91">return</span> <span style="color:#a90d91">new</span> <span style="color:#000">Itr</span><span style="color:#000">();</span>
<span style="color:#000">}</span>
</code></pre></div><hr>
<div class="gdoc-page__anchorwrap">
    <h1 id="61-private-class-itr-implements-iteratorlte">
        61. private class Itr implements Iterator&lt;E&gt;
        <a data-clipboard-text="https://hongmao.run/jdk8-src-note/java/util/Vector/#61-private-class-itr-implements-iteratorlte" class="gdoc-page__anchor gdoc-page__anchor--right clip" aria-label="Anchor 61. private class Itr implements Iterator&lt;E&gt;" href="#61-private-class-itr-implements-iteratorlte">
            <svg class="icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
        </a>
    </h1>
</div><p><code>AbstractList.Itr</code>的优化版本。</p>
<div class="gdoc-page__anchorwrap">
    <h2 id="611-int-cursor">
        61.1 int cursor;
        <a data-clipboard-text="https://hongmao.run/jdk8-src-note/java/util/Vector/#611-int-cursor" class="gdoc-page__anchor gdoc-page__anchor--right clip" aria-label="Anchor 61.1 int cursor;" href="#611-int-cursor">
            <svg class="icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
        </a>
    </h2>
</div><p>要返回的下一个元素的索引，也即“游标“。</p>
<div class="gdoc-page__anchorwrap">
    <h2 id="612-int-lastret---1">
        61.2 int lastRet = -1;
        <a data-clipboard-text="https://hongmao.run/jdk8-src-note/java/util/Vector/#612-int-lastret---1" class="gdoc-page__anchor gdoc-page__anchor--right clip" aria-label="Anchor 61.2 int lastRet = -1;" href="#612-int-lastret---1">
            <svg class="icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
        </a>
    </h2>
</div><p>返回的最后一个元素的索引，如果还没有返回过元素，则是<code>-1</code>。</p>
<div class="gdoc-page__anchorwrap">
    <h2 id="613-int-expectedmodcount--modcount">
        61.3 int expectedModCount = modCount;
        <a data-clipboard-text="https://hongmao.run/jdk8-src-note/java/util/Vector/#613-int-expectedmodcount--modcount" class="gdoc-page__anchor gdoc-page__anchor--right clip" aria-label="Anchor 61.3 int expectedModCount = modCount;" href="#613-int-expectedmodcount--modcount">
            <svg class="icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
        </a>
    </h2>
</div><p>期望更新次数，默认值取当前<code>Vector</code>的修改次数。</p>
<div class="gdoc-page__anchorwrap">
    <h2 id="614-public-boolean-hasnext">
        61.4 public boolean hasNext()
        <a data-clipboard-text="https://hongmao.run/jdk8-src-note/java/util/Vector/#614-public-boolean-hasnext" class="gdoc-page__anchor gdoc-page__anchor--right clip" aria-label="Anchor 61.4 public boolean hasNext()" href="#614-public-boolean-hasnext">
            <svg class="icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
        </a>
    </h2>
</div><p>判断是否还有下一个元素可返回，若有，则返回<code>true</code>。</p>
<p>源码如下：</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2"><code class="language-java" data-lang="java"><span style="color:#a90d91">public</span> <span style="color:#a90d91">boolean</span> <span style="color:#000">hasNext</span><span style="color:#000">()</span> <span style="color:#000">{</span>
    <span style="color:#177500">// Racy but within spec, since modifications are checked
</span><span style="color:#177500"></span>    <span style="color:#177500">// within or after synchronization in next/previous
</span><span style="color:#177500"></span>		<span style="color:#177500">// 返回当前游标是否处于elementCount索引位置
</span><span style="color:#177500"></span>    <span style="color:#a90d91">return</span> <span style="color:#000">cursor</span> <span style="color:#000">!=</span> <span style="color:#000">elementCount</span><span style="color:#000">;</span>
<span style="color:#000">}</span>
</code></pre></div><div class="gdoc-page__anchorwrap">
    <h2 id="615-public-e-next">
        61.5 public E next()
        <a data-clipboard-text="https://hongmao.run/jdk8-src-note/java/util/Vector/#615-public-e-next" class="gdoc-page__anchor gdoc-page__anchor--right clip" aria-label="Anchor 61.5 public E next()" href="#615-public-e-next">
            <svg class="icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
        </a>
    </h2>
</div><p>获取下一个元素。</p>
<p>源码如下：</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2"><code class="language-java" data-lang="java"><span style="color:#a90d91">public</span> <span style="color:#000">E</span> <span style="color:#000">next</span><span style="color:#000">()</span> <span style="color:#000">{</span>
    <span style="color:#a90d91">synchronized</span> <span style="color:#000">(</span><span style="color:#000">Vector</span><span style="color:#000">.</span><span style="color:#836c28">this</span><span style="color:#000">)</span> <span style="color:#000">{</span>
				<span style="color:#177500">// 检查是否有修改
</span><span style="color:#177500"></span>        <span style="color:#000">checkForComodification</span><span style="color:#000">();</span>
        <span style="color:#a90d91">int</span> <span style="color:#000">i</span> <span style="color:#000">=</span> <span style="color:#000">cursor</span><span style="color:#000">;</span>
				<span style="color:#177500">// 如果当前游标大于等于元素个数，则抛出无此元素异常
</span><span style="color:#177500"></span>        <span style="color:#a90d91">if</span> <span style="color:#000">(</span><span style="color:#000">i</span> <span style="color:#000">&gt;=</span> <span style="color:#000">elementCount</span><span style="color:#000">)</span>
            <span style="color:#a90d91">throw</span> <span style="color:#a90d91">new</span> <span style="color:#000">NoSuchElementException</span><span style="color:#000">();</span>
				<span style="color:#177500">// 游标后移一位（即加1）
</span><span style="color:#177500"></span>        <span style="color:#000">cursor</span> <span style="color:#000">=</span> <span style="color:#000">i</span> <span style="color:#000">+</span> <span style="color:#000">1</span><span style="color:#000">;</span>
				<span style="color:#177500">// 将移动前的原游标位置赋值给最后返回的索引字段，然后取出该位置的元素返回
</span><span style="color:#177500"></span>        <span style="color:#a90d91">return</span> <span style="color:#000">elementData</span><span style="color:#000">(</span><span style="color:#000">lastRet</span> <span style="color:#000">=</span> <span style="color:#000">i</span><span style="color:#000">);</span>
    <span style="color:#000">}</span>
<span style="color:#000">}</span>
</code></pre></div><div class="gdoc-page__anchorwrap">
    <h2 id="616-public-void-remove">
        61.6 public void remove()
        <a data-clipboard-text="https://hongmao.run/jdk8-src-note/java/util/Vector/#616-public-void-remove" class="gdoc-page__anchor gdoc-page__anchor--right clip" aria-label="Anchor 61.6 public void remove()" href="#616-public-void-remove">
            <svg class="icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
        </a>
    </h2>
</div><p>删除当前迭代器最近一次返回的元素。</p>
<p>源码如下：</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2"><code class="language-java" data-lang="java"><span style="color:#a90d91">public</span> <span style="color:#a90d91">void</span> <span style="color:#000">remove</span><span style="color:#000">()</span> <span style="color:#000">{</span>
		<span style="color:#177500">// 如果最后返回索引字段的值为-1，说明要么还未调用next获取过元素，要么已经删除过该元素
</span><span style="color:#177500"></span>    <span style="color:#a90d91">if</span> <span style="color:#000">(</span><span style="color:#000">lastRet</span> <span style="color:#000">==</span> <span style="color:#000">-</span><span style="color:#000">1</span><span style="color:#000">)</span>
        <span style="color:#a90d91">throw</span> <span style="color:#a90d91">new</span> <span style="color:#000">IllegalStateException</span><span style="color:#000">();</span>
    <span style="color:#a90d91">synchronized</span> <span style="color:#000">(</span><span style="color:#000">Vector</span><span style="color:#000">.</span><span style="color:#836c28">this</span><span style="color:#000">)</span> <span style="color:#000">{</span>
        <span style="color:#000">checkForComodification</span><span style="color:#000">();</span>
				<span style="color:#177500">// 调用Vector的remove方法删除最后返回索引位置的元素
</span><span style="color:#177500"></span>        <span style="color:#000">Vector</span><span style="color:#000">.</span><span style="color:#836c28">this</span><span style="color:#000">.</span><span style="color:#836c28">remove</span><span style="color:#000">(</span><span style="color:#000">lastRet</span><span style="color:#000">);</span>
				<span style="color:#177500">// 更新期望更新次数
</span><span style="color:#177500"></span>        <span style="color:#000">expectedModCount</span> <span style="color:#000">=</span> <span style="color:#000">modCount</span><span style="color:#000">;</span>
    <span style="color:#000">}</span>
		<span style="color:#177500">// 当前游标置于最近一次返回的索引处
</span><span style="color:#177500"></span>    <span style="color:#000">cursor</span> <span style="color:#000">=</span> <span style="color:#000">lastRet</span><span style="color:#000">;</span>
		<span style="color:#177500">// 最近返回的索引字段的值置为-1
</span><span style="color:#177500"></span>    <span style="color:#000">lastRet</span> <span style="color:#000">=</span> <span style="color:#000">-</span><span style="color:#000">1</span><span style="color:#000">;</span>
<span style="color:#000">}</span>
</code></pre></div><div class="gdoc-page__anchorwrap">
    <h2 id="617-public-void-foreachremainingconsumer-super-e-action">
        61.7 public void forEachRemaining(Consumer&lt;? super E&gt; action)
        <a data-clipboard-text="https://hongmao.run/jdk8-src-note/java/util/Vector/#617-public-void-foreachremainingconsumer-super-e-action" class="gdoc-page__anchor gdoc-page__anchor--right clip" aria-label="Anchor 61.7 public void forEachRemaining(Consumer&lt;? super E&gt; action)" href="#617-public-void-foreachremainingconsumer-super-e-action">
            <svg class="icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
        </a>
    </h2>
</div><p>对迭代器尚未遍历到的元素执行给定的操作。</p>
<p>源码如下：</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2"><code class="language-java" data-lang="java"><span style="color:#000">@Override</span>
<span style="color:#a90d91">public</span> <span style="color:#a90d91">void</span> <span style="color:#000">forEachRemaining</span><span style="color:#000">(</span><span style="color:#000">Consumer</span><span style="color:#000">&lt;?</span> <span style="color:#a90d91">super</span> <span style="color:#000">E</span><span style="color:#000">&gt;</span> <span style="color:#000">action</span><span style="color:#000">)</span> <span style="color:#000">{</span>
    <span style="color:#000">Objects</span><span style="color:#000">.</span><span style="color:#836c28">requireNonNull</span><span style="color:#000">(</span><span style="color:#000">action</span><span style="color:#000">);</span>
    <span style="color:#a90d91">synchronized</span> <span style="color:#000">(</span><span style="color:#000">Vector</span><span style="color:#000">.</span><span style="color:#836c28">this</span><span style="color:#000">)</span> <span style="color:#000">{</span>
        <span style="color:#a90d91">final</span> <span style="color:#a90d91">int</span> <span style="color:#000">size</span> <span style="color:#000">=</span> <span style="color:#000">elementCount</span><span style="color:#000">;</span>
        <span style="color:#a90d91">int</span> <span style="color:#000">i</span> <span style="color:#000">=</span> <span style="color:#000">cursor</span><span style="color:#000">;</span>
				<span style="color:#177500">// 如果当前游标位置大于等于元素个数，在说明没有未遍历到的元素了，此时直接返回
</span><span style="color:#177500"></span>        <span style="color:#a90d91">if</span> <span style="color:#000">(</span><span style="color:#000">i</span> <span style="color:#000">&gt;=</span> <span style="color:#000">size</span><span style="color:#000">)</span> <span style="color:#000">{</span>
            <span style="color:#a90d91">return</span><span style="color:#000">;</span>
        <span style="color:#000">}</span>
<span style="color:#177500">// 啊，这个缩进看的真难受
</span><span style="color:#177500"></span><span style="color:#000">@SuppressWarnings</span><span style="color:#000">(</span><span style="color:#c41a16">&#34;unchecked&#34;</span><span style="color:#000">)</span>
				<span style="color:#177500">// 取出当前Vector存放数据的数组
</span><span style="color:#177500"></span>        <span style="color:#a90d91">final</span> <span style="color:#000">E</span><span style="color:#000">[]</span> <span style="color:#000">elementData</span> <span style="color:#000">=</span> <span style="color:#000">(</span><span style="color:#000">E</span><span style="color:#000">[])</span> <span style="color:#000">Vector</span><span style="color:#000">.</span><span style="color:#836c28">this</span><span style="color:#000">.</span><span style="color:#836c28">elementData</span><span style="color:#000">;</span>
				<span style="color:#177500">// 如果当前游标位置大于等于数组长度，说明可能存在并发修改，此时将抛出异常
</span><span style="color:#177500"></span>        <span style="color:#a90d91">if</span> <span style="color:#000">(</span><span style="color:#000">i</span> <span style="color:#000">&gt;=</span> <span style="color:#000">elementData</span><span style="color:#000">.</span><span style="color:#836c28">length</span><span style="color:#000">)</span> <span style="color:#000">{</span>
            <span style="color:#a90d91">throw</span> <span style="color:#a90d91">new</span> <span style="color:#000">ConcurrentModificationException</span><span style="color:#000">();</span>
        <span style="color:#000">}</span>
				<span style="color:#177500">// 遍历剩余的元素，每次都执行并发修改检查
</span><span style="color:#177500"></span>        <span style="color:#a90d91">while</span> <span style="color:#000">(</span><span style="color:#000">i</span> <span style="color:#000">!=</span> <span style="color:#000">size</span> <span style="color:#000">&amp;&amp;</span> <span style="color:#000">modCount</span> <span style="color:#000">==</span> <span style="color:#000">expectedModCount</span><span style="color:#000">)</span> <span style="color:#000">{</span>
						<span style="color:#177500">// 对遍历到的元素执行给定的操作
</span><span style="color:#177500"></span>            <span style="color:#000">action</span><span style="color:#000">.</span><span style="color:#836c28">accept</span><span style="color:#000">(</span><span style="color:#000">elementData</span><span style="color:#000">[</span><span style="color:#000">i</span><span style="color:#000">++]);</span>
        <span style="color:#000">}</span>
        <span style="color:#177500">// update once at end of iteration to reduce heap write traffic
</span><span style="color:#177500"></span>				<span style="color:#177500">// 在遍历结束时更新一次以减少堆写入流量
</span><span style="color:#177500"></span>        <span style="color:#000">cursor</span> <span style="color:#000">=</span> <span style="color:#000">i</span><span style="color:#000">;</span>
        <span style="color:#000">lastRet</span> <span style="color:#000">=</span> <span style="color:#000">i</span> <span style="color:#000">-</span> <span style="color:#000">1</span><span style="color:#000">;</span>
				<span style="color:#177500">// 再执行并发修改检查
</span><span style="color:#177500"></span>        <span style="color:#000">checkForComodification</span><span style="color:#000">();</span>
    <span style="color:#000">}</span>
<span style="color:#000">}</span>
</code></pre></div><div class="gdoc-page__anchorwrap">
    <h2 id="618-final-void-checkforcomodification">
        61.8 final void checkForComodification()
        <a data-clipboard-text="https://hongmao.run/jdk8-src-note/java/util/Vector/#618-final-void-checkforcomodification" class="gdoc-page__anchor gdoc-page__anchor--right clip" aria-label="Anchor 61.8 final void checkForComodification()" href="#618-final-void-checkforcomodification">
            <svg class="icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
        </a>
    </h2>
</div><p>检查是否存在并发修改。</p>
<p>源码如下：</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2"><code class="language-java" data-lang="java"><span style="color:#a90d91">final</span> <span style="color:#a90d91">void</span> <span style="color:#000">checkForComodification</span><span style="color:#000">()</span> <span style="color:#000">{</span>
    <span style="color:#a90d91">if</span> <span style="color:#000">(</span><span style="color:#000">modCount</span> <span style="color:#000">!=</span> <span style="color:#000">expectedModCount</span><span style="color:#000">)</span>
        <span style="color:#a90d91">throw</span> <span style="color:#a90d91">new</span> <span style="color:#000">ConcurrentModificationException</span><span style="color:#000">();</span>
<span style="color:#000">}</span>
</code></pre></div><hr>
<div class="gdoc-page__anchorwrap">
    <h1 id="62-final-class-listitr-extends-itr-implements-listiteratorlte">
        62. final class ListItr extends Itr implements ListIterator&lt;E&gt;
        <a data-clipboard-text="https://hongmao.run/jdk8-src-note/java/util/Vector/#62-final-class-listitr-extends-itr-implements-listiteratorlte" class="gdoc-page__anchor gdoc-page__anchor--right clip" aria-label="Anchor 62. final class ListItr extends Itr implements ListIterator&lt;E&gt;" href="#62-final-class-listitr-extends-itr-implements-listiteratorlte">
            <svg class="icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
        </a>
    </h1>
</div><p><code>AbstractList.ListItr</code>的优化版本。</p>
<div class="gdoc-page__anchorwrap">
    <h2 id="621-listitrint-index">
        62.1 ListItr(int index)
        <a data-clipboard-text="https://hongmao.run/jdk8-src-note/java/util/Vector/#621-listitrint-index" class="gdoc-page__anchor gdoc-page__anchor--right clip" aria-label="Anchor 62.1 ListItr(int index)" href="#621-listitrint-index">
            <svg class="icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
        </a>
    </h2>
</div><p>构建一个<code>ListItr</code>。</p>
<p>源码如下：</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2"><code class="language-java" data-lang="java"><span style="color:#000">ListItr</span><span style="color:#000">(</span><span style="color:#a90d91">int</span> <span style="color:#000">index</span><span style="color:#000">)</span> <span style="color:#000">{</span>
    <span style="color:#a90d91">super</span><span style="color:#000">();</span>
    <span style="color:#000">cursor</span> <span style="color:#000">=</span> <span style="color:#000">index</span><span style="color:#000">;</span>
<span style="color:#000">}</span>
</code></pre></div><div class="gdoc-page__anchorwrap">
    <h2 id="622-public-boolean-hasprevious">
        62.2 public boolean hasPrevious()
        <a data-clipboard-text="https://hongmao.run/jdk8-src-note/java/util/Vector/#622-public-boolean-hasprevious" class="gdoc-page__anchor gdoc-page__anchor--right clip" aria-label="Anchor 62.2 public boolean hasPrevious()" href="#622-public-boolean-hasprevious">
            <svg class="icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
        </a>
    </h2>
</div><p>判断前面是否还有元素可返回，若有，则返回<code>true</code>。</p>
<p>源码如下：</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2"><code class="language-java" data-lang="java"><span style="color:#a90d91">public</span> <span style="color:#a90d91">boolean</span> <span style="color:#000">hasPrevious</span><span style="color:#000">()</span> <span style="color:#000">{</span>
		<span style="color:#177500">// 若当前游标不在索引位置0处，说明前面还有元素可返回
</span><span style="color:#177500"></span>    <span style="color:#a90d91">return</span> <span style="color:#000">cursor</span> <span style="color:#000">!=</span> <span style="color:#000">0</span><span style="color:#000">;</span>
<span style="color:#000">}</span>
</code></pre></div><div class="gdoc-page__anchorwrap">
    <h2 id="623-public-int-nextindex">
        62.3 public int nextIndex()
        <a data-clipboard-text="https://hongmao.run/jdk8-src-note/java/util/Vector/#623-public-int-nextindex" class="gdoc-page__anchor gdoc-page__anchor--right clip" aria-label="Anchor 62.3 public int nextIndex()" href="#623-public-int-nextindex">
            <svg class="icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
        </a>
    </h2>
</div><p>返回下一个元素的索引。</p>
<p>源码如下：</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2"><code class="language-java" data-lang="java"><span style="color:#a90d91">public</span> <span style="color:#a90d91">int</span> <span style="color:#000">nextIndex</span><span style="color:#000">()</span> <span style="color:#000">{</span>
		<span style="color:#177500">// 即返回游标位置
</span><span style="color:#177500"></span>    <span style="color:#a90d91">return</span> <span style="color:#000">cursor</span><span style="color:#000">;</span>
<span style="color:#000">}</span>
</code></pre></div><div class="gdoc-page__anchorwrap">
    <h2 id="624-public-int-previousindex">
        62.4 public int previousIndex()
        <a data-clipboard-text="https://hongmao.run/jdk8-src-note/java/util/Vector/#624-public-int-previousindex" class="gdoc-page__anchor gdoc-page__anchor--right clip" aria-label="Anchor 62.4 public int previousIndex()" href="#624-public-int-previousindex">
            <svg class="icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
        </a>
    </h2>
</div><p>返回上一个元素的索引。</p>
<p>源码如下：</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2"><code class="language-java" data-lang="java"><span style="color:#a90d91">public</span> <span style="color:#a90d91">int</span> <span style="color:#000">previousIndex</span><span style="color:#000">()</span> <span style="color:#000">{</span>
		<span style="color:#177500">// 返回当前游标位置减1
</span><span style="color:#177500"></span>    <span style="color:#a90d91">return</span> <span style="color:#000">cursor</span> <span style="color:#000">-</span> <span style="color:#000">1</span><span style="color:#000">;</span>
<span style="color:#000">}</span>
</code></pre></div><div class="gdoc-page__anchorwrap">
    <h2 id="625-public-e-previous">
        62.5 public E previous()
        <a data-clipboard-text="https://hongmao.run/jdk8-src-note/java/util/Vector/#625-public-e-previous" class="gdoc-page__anchor gdoc-page__anchor--right clip" aria-label="Anchor 62.5 public E previous()" href="#625-public-e-previous">
            <svg class="icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
        </a>
    </h2>
</div><p>返回上一个元素。</p>
<p>源码如下：</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2"><code class="language-java" data-lang="java"><span style="color:#a90d91">public</span> <span style="color:#000">E</span> <span style="color:#000">previous</span><span style="color:#000">()</span> <span style="color:#000">{</span>
    <span style="color:#a90d91">synchronized</span> <span style="color:#000">(</span><span style="color:#000">Vector</span><span style="color:#000">.</span><span style="color:#836c28">this</span><span style="color:#000">)</span> <span style="color:#000">{</span>
        <span style="color:#000">checkForComodification</span><span style="color:#000">();</span>
				<span style="color:#177500">// 取出前面一个元素的索引位置
</span><span style="color:#177500"></span>        <span style="color:#a90d91">int</span> <span style="color:#000">i</span> <span style="color:#000">=</span> <span style="color:#000">cursor</span> <span style="color:#000">-</span> <span style="color:#000">1</span><span style="color:#000">;</span>
				<span style="color:#177500">// 如果得到的索引位置小于0，则说明前面没有元素了，此时抛出异常
</span><span style="color:#177500"></span>        <span style="color:#a90d91">if</span> <span style="color:#000">(</span><span style="color:#000">i</span> <span style="color:#000">&lt;</span> <span style="color:#000">0</span><span style="color:#000">)</span>
            <span style="color:#a90d91">throw</span> <span style="color:#a90d91">new</span> <span style="color:#000">NoSuchElementException</span><span style="color:#000">();</span>
				<span style="color:#177500">// 将得到的索引位置赋值给游标
</span><span style="color:#177500"></span>        <span style="color:#000">cursor</span> <span style="color:#000">=</span> <span style="color:#000">i</span><span style="color:#000">;</span>
				<span style="color:#177500">// 将得到的索引位置赋值给最近一次返回的元素索引字段，然后返回该位置的元素
</span><span style="color:#177500"></span>        <span style="color:#a90d91">return</span> <span style="color:#000">elementData</span><span style="color:#000">(</span><span style="color:#000">lastRet</span> <span style="color:#000">=</span> <span style="color:#000">i</span><span style="color:#000">);</span>
    <span style="color:#000">}</span>
<span style="color:#000">}</span>
</code></pre></div><div class="gdoc-page__anchorwrap">
    <h2 id="626-public-void-sete-e">
        62.6 public void set(E e)
        <a data-clipboard-text="https://hongmao.run/jdk8-src-note/java/util/Vector/#626-public-void-sete-e" class="gdoc-page__anchor gdoc-page__anchor--right clip" aria-label="Anchor 62.6 public void set(E e)" href="#626-public-void-sete-e">
            <svg class="icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
        </a>
    </h2>
</div><p>替换掉最近一次返回的元素。</p>
<p>源码如下：</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2"><code class="language-java" data-lang="java"><span style="color:#a90d91">public</span> <span style="color:#a90d91">void</span> <span style="color:#000">set</span><span style="color:#000">(</span><span style="color:#000">E</span> <span style="color:#000">e</span><span style="color:#000">)</span> <span style="color:#000">{</span>
		<span style="color:#177500">// 如果最近返回的元素索引位置为-1，说明此时没有最近一次返回的元素（也可能已被删除），则此时抛出异常
</span><span style="color:#177500"></span>    <span style="color:#a90d91">if</span> <span style="color:#000">(</span><span style="color:#000">lastRet</span> <span style="color:#000">==</span> <span style="color:#000">-</span><span style="color:#000">1</span><span style="color:#000">)</span>
        <span style="color:#a90d91">throw</span> <span style="color:#a90d91">new</span> <span style="color:#000">IllegalStateException</span><span style="color:#000">();</span>
    <span style="color:#a90d91">synchronized</span> <span style="color:#000">(</span><span style="color:#000">Vector</span><span style="color:#000">.</span><span style="color:#836c28">this</span><span style="color:#000">)</span> <span style="color:#000">{</span>
        <span style="color:#000">checkForComodification</span><span style="color:#000">();</span>
				<span style="color:#177500">// 调用Vector的set方法 替换最近一次返回的元素为指定的元素
</span><span style="color:#177500"></span>        <span style="color:#000">Vector</span><span style="color:#000">.</span><span style="color:#836c28">this</span><span style="color:#000">.</span><span style="color:#836c28">set</span><span style="color:#000">(</span><span style="color:#000">lastRet</span><span style="color:#000">,</span> <span style="color:#000">e</span><span style="color:#000">);</span>
    <span style="color:#000">}</span>
<span style="color:#000">}</span>
</code></pre></div><div class="gdoc-page__anchorwrap">
    <h2 id="627-public-void-adde-e">
        62.7 public void add(E e)
        <a data-clipboard-text="https://hongmao.run/jdk8-src-note/java/util/Vector/#627-public-void-adde-e" class="gdoc-page__anchor gdoc-page__anchor--right clip" aria-label="Anchor 62.7 public void add(E e)" href="#627-public-void-adde-e">
            <svg class="icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
        </a>
    </h2>
</div><p>在最近一次返回的元素后面添加参数中指定的元素。</p>
<p>源码如下：</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2"><code class="language-java" data-lang="java"><span style="color:#a90d91">public</span> <span style="color:#a90d91">void</span> <span style="color:#000">add</span><span style="color:#000">(</span><span style="color:#000">E</span> <span style="color:#000">e</span><span style="color:#000">)</span> <span style="color:#000">{</span>
    <span style="color:#a90d91">int</span> <span style="color:#000">i</span> <span style="color:#000">=</span> <span style="color:#000">cursor</span><span style="color:#000">;</span>
    <span style="color:#a90d91">synchronized</span> <span style="color:#000">(</span><span style="color:#000">Vector</span><span style="color:#000">.</span><span style="color:#836c28">this</span><span style="color:#000">)</span> <span style="color:#000">{</span>
        <span style="color:#000">checkForComodification</span><span style="color:#000">();</span>
				<span style="color:#177500">// 在当前游标位置插入指定的元素e
</span><span style="color:#177500"></span>        <span style="color:#000">Vector</span><span style="color:#000">.</span><span style="color:#836c28">this</span><span style="color:#000">.</span><span style="color:#836c28">add</span><span style="color:#000">(</span><span style="color:#000">i</span><span style="color:#000">,</span> <span style="color:#000">e</span><span style="color:#000">);</span>
				<span style="color:#177500">// 更新期望更新次数
</span><span style="color:#177500"></span>        <span style="color:#000">expectedModCount</span> <span style="color:#000">=</span> <span style="color:#000">modCount</span><span style="color:#000">;</span>
    <span style="color:#000">}</span>
		<span style="color:#177500">// 游标后移一位
</span><span style="color:#177500"></span>    <span style="color:#000">cursor</span> <span style="color:#000">=</span> <span style="color:#000">i</span> <span style="color:#000">+</span> <span style="color:#000">1</span><span style="color:#000">;</span>
		<span style="color:#177500">// 最近返回的元素索引置为-1
</span><span style="color:#177500"></span>    <span style="color:#000">lastRet</span> <span style="color:#000">=</span> <span style="color:#000">-</span><span style="color:#000">1</span><span style="color:#000">;</span>
<span style="color:#000">}</span>
</code></pre></div><hr>
<div class="gdoc-page__anchorwrap">
    <h1 id="63-public-synchronized-void-foreachconsumer-super-e-action">
        63. public synchronized void forEach(Consumer&lt;? super E&gt; action)
        <a data-clipboard-text="https://hongmao.run/jdk8-src-note/java/util/Vector/#63-public-synchronized-void-foreachconsumer-super-e-action" class="gdoc-page__anchor gdoc-page__anchor--right clip" aria-label="Anchor 63. public synchronized void forEach(Consumer&lt;? super E&gt; action)" href="#63-public-synchronized-void-foreachconsumer-super-e-action">
            <svg class="icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
        </a>
    </h1>
</div><p>对当前<code>Vector</code>实例的每个元素执行给定的动作。</p>
<p>源码如下：</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2"><code class="language-java" data-lang="java"><span style="color:#000">@Override</span>
<span style="color:#a90d91">public</span> <span style="color:#a90d91">synchronized</span> <span style="color:#a90d91">void</span> <span style="color:#000">forEach</span><span style="color:#000">(</span><span style="color:#000">Consumer</span><span style="color:#000">&lt;?</span> <span style="color:#a90d91">super</span> <span style="color:#000">E</span><span style="color:#000">&gt;</span> <span style="color:#000">action</span><span style="color:#000">)</span> <span style="color:#000">{</span>
    <span style="color:#000">Objects</span><span style="color:#000">.</span><span style="color:#836c28">requireNonNull</span><span style="color:#000">(</span><span style="color:#000">action</span><span style="color:#000">);</span>
    <span style="color:#a90d91">final</span> <span style="color:#a90d91">int</span> <span style="color:#000">expectedModCount</span> <span style="color:#000">=</span> <span style="color:#000">modCount</span><span style="color:#000">;</span>
    <span style="color:#000">@SuppressWarnings</span><span style="color:#000">(</span><span style="color:#c41a16">&#34;unchecked&#34;</span><span style="color:#000">)</span>
    <span style="color:#a90d91">final</span> <span style="color:#000">E</span><span style="color:#000">[]</span> <span style="color:#000">elementData</span> <span style="color:#000">=</span> <span style="color:#000">(</span><span style="color:#000">E</span><span style="color:#000">[])</span> <span style="color:#a90d91">this</span><span style="color:#000">.</span><span style="color:#836c28">elementData</span><span style="color:#000">;</span>
    <span style="color:#a90d91">final</span> <span style="color:#a90d91">int</span> <span style="color:#000">elementCount</span> <span style="color:#000">=</span> <span style="color:#a90d91">this</span><span style="color:#000">.</span><span style="color:#836c28">elementCount</span><span style="color:#000">;</span>
    <span style="color:#177500">// 遍历当前Vector的对象数组
</span><span style="color:#177500"></span>    <span style="color:#a90d91">for</span> <span style="color:#000">(</span><span style="color:#a90d91">int</span> <span style="color:#000">i</span><span style="color:#000">=</span><span style="color:#000">0</span><span style="color:#000">;</span> <span style="color:#000">modCount</span> <span style="color:#000">==</span> <span style="color:#000">expectedModCount</span> <span style="color:#000">&amp;&amp;</span> <span style="color:#000">i</span> <span style="color:#000">&lt;</span> <span style="color:#000">elementCount</span><span style="color:#000">;</span> <span style="color:#000">i</span><span style="color:#000">++)</span> <span style="color:#000">{</span>
        <span style="color:#177500">// 对每个元素执行给定动作
</span><span style="color:#177500"></span>        <span style="color:#000">action</span><span style="color:#000">.</span><span style="color:#836c28">accept</span><span style="color:#000">(</span><span style="color:#000">elementData</span><span style="color:#000">[</span><span style="color:#000">i</span><span style="color:#000">]);</span>
    <span style="color:#000">}</span>
    <span style="color:#a90d91">if</span> <span style="color:#000">(</span><span style="color:#000">modCount</span> <span style="color:#000">!=</span> <span style="color:#000">expectedModCount</span><span style="color:#000">)</span> <span style="color:#000">{</span>
        <span style="color:#a90d91">throw</span> <span style="color:#a90d91">new</span> <span style="color:#000">ConcurrentModificationException</span><span style="color:#000">();</span>
    <span style="color:#000">}</span>
<span style="color:#000">}</span>
</code></pre></div><hr>
<div class="gdoc-page__anchorwrap">
    <h1 id="64-public-synchronized-boolean-removeifpredicate-super-e-filter">
        64. public synchronized boolean removeIf(Predicate&lt;? super E&gt; filter)
        <a data-clipboard-text="https://hongmao.run/jdk8-src-note/java/util/Vector/#64-public-synchronized-boolean-removeifpredicate-super-e-filter" class="gdoc-page__anchor gdoc-page__anchor--right clip" aria-label="Anchor 64. public synchronized boolean removeIf(Predicate&lt;? super E&gt; filter)" href="#64-public-synchronized-boolean-removeifpredicate-super-e-filter">
            <svg class="icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
        </a>
    </h1>
</div><p>删除当前Vector实例中满足给定条件的元素。</p>
<p>源码如下：</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2"><code class="language-java" data-lang="java"><span style="color:#000">@Override</span>
<span style="color:#000">@SuppressWarnings</span><span style="color:#000">(</span><span style="color:#c41a16">&#34;unchecked&#34;</span><span style="color:#000">)</span>
<span style="color:#a90d91">public</span> <span style="color:#a90d91">synchronized</span> <span style="color:#a90d91">boolean</span> <span style="color:#000">removeIf</span><span style="color:#000">(</span><span style="color:#000">Predicate</span><span style="color:#000">&lt;?</span> <span style="color:#a90d91">super</span> <span style="color:#000">E</span><span style="color:#000">&gt;</span> <span style="color:#000">filter</span><span style="color:#000">)</span> <span style="color:#000">{</span>
    <span style="color:#000">Objects</span><span style="color:#000">.</span><span style="color:#836c28">requireNonNull</span><span style="color:#000">(</span><span style="color:#000">filter</span><span style="color:#000">);</span>
    <span style="color:#177500">// 先找出要被删除的元素
</span><span style="color:#177500"></span>    <span style="color:#177500">// figure out which elements are to be removed
</span><span style="color:#177500"></span>    <span style="color:#177500">// 判断过程中抛出了任何异常，都不会导致此集合改变
</span><span style="color:#177500"></span>    <span style="color:#177500">// any exception thrown from the filter predicate at this stage
</span><span style="color:#177500"></span>    <span style="color:#177500">// will leave the collection unmodified
</span><span style="color:#177500"></span>    <span style="color:#a90d91">int</span> <span style="color:#000">removeCount</span> <span style="color:#000">=</span> <span style="color:#000">0</span><span style="color:#000">;</span>
    <span style="color:#a90d91">final</span> <span style="color:#a90d91">int</span> <span style="color:#000">size</span> <span style="color:#000">=</span> <span style="color:#000">elementCount</span><span style="color:#000">;</span>
    <span style="color:#177500">// 创建一个BitSet实例，用于记录要被删除记录的索引
</span><span style="color:#177500"></span>    <span style="color:#a90d91">final</span> <span style="color:#000">BitSet</span> <span style="color:#000">removeSet</span> <span style="color:#000">=</span> <span style="color:#a90d91">new</span> <span style="color:#000">BitSet</span><span style="color:#000">(</span><span style="color:#000">size</span><span style="color:#000">);</span>
    <span style="color:#a90d91">final</span> <span style="color:#a90d91">int</span> <span style="color:#000">expectedModCount</span> <span style="color:#000">=</span> <span style="color:#000">modCount</span><span style="color:#000">;</span>
    <span style="color:#177500">// 遍历当前Vector的对象数组
</span><span style="color:#177500"></span>    <span style="color:#a90d91">for</span> <span style="color:#000">(</span><span style="color:#a90d91">int</span> <span style="color:#000">i</span><span style="color:#000">=</span><span style="color:#000">0</span><span style="color:#000">;</span> <span style="color:#000">modCount</span> <span style="color:#000">==</span> <span style="color:#000">expectedModCount</span> <span style="color:#000">&amp;&amp;</span> <span style="color:#000">i</span> <span style="color:#000">&lt;</span> <span style="color:#000">size</span><span style="color:#000">;</span> <span style="color:#000">i</span><span style="color:#000">++)</span> <span style="color:#000">{</span>
        <span style="color:#000">@SuppressWarnings</span><span style="color:#000">(</span><span style="color:#c41a16">&#34;unchecked&#34;</span><span style="color:#000">)</span>
        <span style="color:#177500">// 取出当前位置的元素
</span><span style="color:#177500"></span>        <span style="color:#a90d91">final</span> <span style="color:#000">E</span> <span style="color:#000">element</span> <span style="color:#000">=</span> <span style="color:#000">(</span><span style="color:#000">E</span><span style="color:#000">)</span> <span style="color:#000">elementData</span><span style="color:#000">[</span><span style="color:#000">i</span><span style="color:#000">];</span>
        <span style="color:#177500">// 对当前位置的元素执行给定的条件判断
</span><span style="color:#177500"></span>        <span style="color:#a90d91">if</span> <span style="color:#000">(</span><span style="color:#000">filter</span><span style="color:#000">.</span><span style="color:#836c28">test</span><span style="color:#000">(</span><span style="color:#000">element</span><span style="color:#000">))</span> <span style="color:#000">{</span>
            <span style="color:#177500">// 如果判断的结果为true，则记录当前索引
</span><span style="color:#177500"></span>            <span style="color:#000">removeSet</span><span style="color:#000">.</span><span style="color:#836c28">set</span><span style="color:#000">(</span><span style="color:#000">i</span><span style="color:#000">);</span>
            <span style="color:#000">removeCount</span><span style="color:#000">++;</span>
        <span style="color:#000">}</span>
    <span style="color:#000">}</span>
    <span style="color:#a90d91">if</span> <span style="color:#000">(</span><span style="color:#000">modCount</span> <span style="color:#000">!=</span> <span style="color:#000">expectedModCount</span><span style="color:#000">)</span> <span style="color:#000">{</span>
        <span style="color:#a90d91">throw</span> <span style="color:#a90d91">new</span> <span style="color:#000">ConcurrentModificationException</span><span style="color:#000">();</span>
    <span style="color:#000">}</span>

    <span style="color:#177500">// shift surviving elements left over the spaces left by removed elements
</span><span style="color:#177500"></span>    <span style="color:#177500">// 将未删除的元素向左移
</span><span style="color:#177500"></span>    <span style="color:#a90d91">final</span> <span style="color:#a90d91">boolean</span> <span style="color:#000">anyToRemove</span> <span style="color:#000">=</span> <span style="color:#000">removeCount</span> <span style="color:#000">&gt;</span> <span style="color:#000">0</span><span style="color:#000">;</span>
    <span style="color:#a90d91">if</span> <span style="color:#000">(</span><span style="color:#000">anyToRemove</span><span style="color:#000">)</span> <span style="color:#000">{</span>
        <span style="color:#177500">// 计算出剩余后的元素个数
</span><span style="color:#177500"></span>        <span style="color:#a90d91">final</span> <span style="color:#a90d91">int</span> <span style="color:#000">newSize</span> <span style="color:#000">=</span> <span style="color:#000">size</span> <span style="color:#000">-</span> <span style="color:#000">removeCount</span><span style="color:#000">;</span>
        <span style="color:#177500">// 遍历对象数组，i代表了原数组索引，j代表新数组索引
</span><span style="color:#177500"></span>        <span style="color:#a90d91">for</span> <span style="color:#000">(</span><span style="color:#a90d91">int</span> <span style="color:#000">i</span><span style="color:#000">=</span><span style="color:#000">0</span><span style="color:#000">,</span> <span style="color:#000">j</span><span style="color:#000">=</span><span style="color:#000">0</span><span style="color:#000">;</span> <span style="color:#000">(</span><span style="color:#000">i</span> <span style="color:#000">&lt;</span> <span style="color:#000">size</span><span style="color:#000">)</span> <span style="color:#000">&amp;&amp;</span> <span style="color:#000">(</span><span style="color:#000">j</span> <span style="color:#000">&lt;</span> <span style="color:#000">newSize</span><span style="color:#000">);</span> <span style="color:#000">i</span><span style="color:#000">++,</span> <span style="color:#000">j</span><span style="color:#000">++)</span> <span style="color:#000">{</span>
            <span style="color:#177500">// 取出i及以后的第一个未被删除的元素的索引
</span><span style="color:#177500"></span>            <span style="color:#000">i</span> <span style="color:#000">=</span> <span style="color:#000">removeSet</span><span style="color:#000">.</span><span style="color:#836c28">nextClearBit</span><span style="color:#000">(</span><span style="color:#000">i</span><span style="color:#000">);</span>
            <span style="color:#177500">// 将该未被删除的元素放置到j位置
</span><span style="color:#177500"></span>            <span style="color:#000">elementData</span><span style="color:#000">[</span><span style="color:#000">j</span><span style="color:#000">]</span> <span style="color:#000">=</span> <span style="color:#000">elementData</span><span style="color:#000">[</span><span style="color:#000">i</span><span style="color:#000">];</span>
        <span style="color:#000">}</span>
        <span style="color:#177500">// 遍历新对象数组（指完成元素移动后的数组），将后部的元素置为null
</span><span style="color:#177500"></span>        <span style="color:#a90d91">for</span> <span style="color:#000">(</span><span style="color:#a90d91">int</span> <span style="color:#000">k</span><span style="color:#000">=</span><span style="color:#000">newSize</span><span style="color:#000">;</span> <span style="color:#000">k</span> <span style="color:#000">&lt;</span> <span style="color:#000">size</span><span style="color:#000">;</span> <span style="color:#000">k</span><span style="color:#000">++)</span> <span style="color:#000">{</span>
            <span style="color:#000">elementData</span><span style="color:#000">[</span><span style="color:#000">k</span><span style="color:#000">]</span> <span style="color:#000">=</span> <span style="color:#a90d91">null</span><span style="color:#000">;</span>  <span style="color:#177500">// Let gc do its work
</span><span style="color:#177500"></span>        <span style="color:#000">}</span>
        <span style="color:#000">elementCount</span> <span style="color:#000">=</span> <span style="color:#000">newSize</span><span style="color:#000">;</span>
        <span style="color:#a90d91">if</span> <span style="color:#000">(</span><span style="color:#000">modCount</span> <span style="color:#000">!=</span> <span style="color:#000">expectedModCount</span><span style="color:#000">)</span> <span style="color:#000">{</span>
            <span style="color:#a90d91">throw</span> <span style="color:#a90d91">new</span> <span style="color:#000">ConcurrentModificationException</span><span style="color:#000">();</span>
        <span style="color:#000">}</span>
        <span style="color:#000">modCount</span><span style="color:#000">++;</span>
    <span style="color:#000">}</span>

    <span style="color:#a90d91">return</span> <span style="color:#000">anyToRemove</span><span style="color:#000">;</span>
<span style="color:#000">}</span>
</code></pre></div><hr>
<div class="gdoc-page__anchorwrap">
    <h1 id="65-public-synchronized-void-replaceallunaryoperatorlte-operator">
        65. public synchronized void replaceAll(UnaryOperator&lt;E&gt; operator)
        <a data-clipboard-text="https://hongmao.run/jdk8-src-note/java/util/Vector/#65-public-synchronized-void-replaceallunaryoperatorlte-operator" class="gdoc-page__anchor gdoc-page__anchor--right clip" aria-label="Anchor 65. public synchronized void replaceAll(UnaryOperator&lt;E&gt; operator)" href="#65-public-synchronized-void-replaceallunaryoperatorlte-operator">
            <svg class="icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
        </a>
    </h1>
</div><p>对每个元素执行给定的操作，并用得到的返回值替换该元素。</p>
<p>源码如下：</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2"><code class="language-java" data-lang="java"><span style="color:#000">@Override</span>
<span style="color:#000">@SuppressWarnings</span><span style="color:#000">(</span><span style="color:#c41a16">&#34;unchecked&#34;</span><span style="color:#000">)</span>
<span style="color:#a90d91">public</span> <span style="color:#a90d91">synchronized</span> <span style="color:#a90d91">void</span> <span style="color:#000">replaceAll</span><span style="color:#000">(</span><span style="color:#000">UnaryOperator</span><span style="color:#000">&lt;</span><span style="color:#000">E</span><span style="color:#000">&gt;</span> <span style="color:#000">operator</span><span style="color:#000">)</span> <span style="color:#000">{</span>
    <span style="color:#000">Objects</span><span style="color:#000">.</span><span style="color:#836c28">requireNonNull</span><span style="color:#000">(</span><span style="color:#000">operator</span><span style="color:#000">);</span>
    <span style="color:#a90d91">final</span> <span style="color:#a90d91">int</span> <span style="color:#000">expectedModCount</span> <span style="color:#000">=</span> <span style="color:#000">modCount</span><span style="color:#000">;</span>
    <span style="color:#a90d91">final</span> <span style="color:#a90d91">int</span> <span style="color:#000">size</span> <span style="color:#000">=</span> <span style="color:#000">elementCount</span><span style="color:#000">;</span>
    <span style="color:#177500">// 遍历对象数组
</span><span style="color:#177500"></span>    <span style="color:#a90d91">for</span> <span style="color:#000">(</span><span style="color:#a90d91">int</span> <span style="color:#000">i</span><span style="color:#000">=</span><span style="color:#000">0</span><span style="color:#000">;</span> <span style="color:#000">modCount</span> <span style="color:#000">==</span> <span style="color:#000">expectedModCount</span> <span style="color:#000">&amp;&amp;</span> <span style="color:#000">i</span> <span style="color:#000">&lt;</span> <span style="color:#000">size</span><span style="color:#000">;</span> <span style="color:#000">i</span><span style="color:#000">++)</span> <span style="color:#000">{</span>
        <span style="color:#177500">// 对当前元素执行给定的操作，用计算出的结果替换当前元素
</span><span style="color:#177500"></span>        <span style="color:#000">elementData</span><span style="color:#000">[</span><span style="color:#000">i</span><span style="color:#000">]</span> <span style="color:#000">=</span> <span style="color:#000">operator</span><span style="color:#000">.</span><span style="color:#836c28">apply</span><span style="color:#000">((</span><span style="color:#000">E</span><span style="color:#000">)</span> <span style="color:#000">elementData</span><span style="color:#000">[</span><span style="color:#000">i</span><span style="color:#000">]);</span>
    <span style="color:#000">}</span>
    <span style="color:#a90d91">if</span> <span style="color:#000">(</span><span style="color:#000">modCount</span> <span style="color:#000">!=</span> <span style="color:#000">expectedModCount</span><span style="color:#000">)</span> <span style="color:#000">{</span>
        <span style="color:#a90d91">throw</span> <span style="color:#a90d91">new</span> <span style="color:#000">ConcurrentModificationException</span><span style="color:#000">();</span>
    <span style="color:#000">}</span>
    <span style="color:#000">modCount</span><span style="color:#000">++;</span>
<span style="color:#000">}</span>
</code></pre></div><hr>
<div class="gdoc-page__anchorwrap">
    <h1 id="66-public-synchronized-void-sortcomparator-super-e-c">
        66. public synchronized void sort(Comparator&lt;? super E&gt; c)
        <a data-clipboard-text="https://hongmao.run/jdk8-src-note/java/util/Vector/#66-public-synchronized-void-sortcomparator-super-e-c" class="gdoc-page__anchor gdoc-page__anchor--right clip" aria-label="Anchor 66. public synchronized void sort(Comparator&lt;? super E&gt; c)" href="#66-public-synchronized-void-sortcomparator-super-e-c">
            <svg class="icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
        </a>
    </h1>
</div><p>使用给定的比较器对当前<code>Vector</code>进行排序。</p>
<p>源码如下：</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2"><code class="language-java" data-lang="java"><span style="color:#000">@SuppressWarnings</span><span style="color:#000">(</span><span style="color:#c41a16">&#34;unchecked&#34;</span><span style="color:#000">)</span>
<span style="color:#000">@Override</span>
<span style="color:#a90d91">public</span> <span style="color:#a90d91">synchronized</span> <span style="color:#a90d91">void</span> <span style="color:#000">sort</span><span style="color:#000">(</span><span style="color:#000">Comparator</span><span style="color:#000">&lt;?</span> <span style="color:#a90d91">super</span> <span style="color:#000">E</span><span style="color:#000">&gt;</span> <span style="color:#000">c</span><span style="color:#000">)</span> <span style="color:#000">{</span>
    <span style="color:#a90d91">final</span> <span style="color:#a90d91">int</span> <span style="color:#000">expectedModCount</span> <span style="color:#000">=</span> <span style="color:#000">modCount</span><span style="color:#000">;</span>
    <span style="color:#177500">// 使用Arrays.sort方法对对象数组进行排序
</span><span style="color:#177500"></span>    <span style="color:#000">Arrays</span><span style="color:#000">.</span><span style="color:#836c28">sort</span><span style="color:#000">((</span><span style="color:#000">E</span><span style="color:#000">[])</span> <span style="color:#000">elementData</span><span style="color:#000">,</span> <span style="color:#000">0</span><span style="color:#000">,</span> <span style="color:#000">elementCount</span><span style="color:#000">,</span> <span style="color:#000">c</span><span style="color:#000">);</span>
    <span style="color:#a90d91">if</span> <span style="color:#000">(</span><span style="color:#000">modCount</span> <span style="color:#000">!=</span> <span style="color:#000">expectedModCount</span><span style="color:#000">)</span> <span style="color:#000">{</span>
        <span style="color:#a90d91">throw</span> <span style="color:#a90d91">new</span> <span style="color:#000">ConcurrentModificationException</span><span style="color:#000">();</span>
    <span style="color:#000">}</span>
    <span style="color:#000">modCount</span><span style="color:#000">++;</span>
<span style="color:#000">}</span>
</code></pre></div><hr>
<div class="gdoc-page__anchorwrap">
    <h1 id="67-public-spliteratorlte-spliterator">
        67. public Spliterator&lt;E&gt; spliterator()
        <a data-clipboard-text="https://hongmao.run/jdk8-src-note/java/util/Vector/#67-public-spliteratorlte-spliterator" class="gdoc-page__anchor gdoc-page__anchor--right clip" aria-label="Anchor 67. public Spliterator&lt;E&gt; spliterator()" href="#67-public-spliteratorlte-spliterator">
            <svg class="icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
        </a>
    </h1>
</div><p>在此列表的元素上创建一个“延迟绑定”、“快速失败”的拆分器。</p>
<p>该拆分器报告的特征有：<code>Spliterator#SIZED</code>、<code>Spliterator#SUBSIZED</code>、<code>Spliterator#ORDERED</code>。覆盖该实现时应该记录附加的特征值的报告。</p>
<p>源码如下：</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2"><code class="language-java" data-lang="java"><span style="color:#000">@Override</span>
<span style="color:#a90d91">public</span> <span style="color:#000">Spliterator</span><span style="color:#000">&lt;</span><span style="color:#000">E</span><span style="color:#000">&gt;</span> <span style="color:#000">spliterator</span><span style="color:#000">()</span> <span style="color:#000">{</span>
    <span style="color:#177500">// 返回一个VectorSpliterator实例
</span><span style="color:#177500"></span>    <span style="color:#a90d91">return</span> <span style="color:#a90d91">new</span> <span style="color:#000">VectorSpliterator</span><span style="color:#000">&lt;&gt;(</span><span style="color:#a90d91">this</span><span style="color:#000">,</span> <span style="color:#a90d91">null</span><span style="color:#000">,</span> <span style="color:#000">0</span><span style="color:#000">,</span> <span style="color:#000">-</span><span style="color:#000">1</span><span style="color:#000">,</span> <span style="color:#000">0</span><span style="color:#000">);</span>
<span style="color:#000">}</span>
</code></pre></div><hr>
<div class="gdoc-page__anchorwrap">
    <h1 id="68-static-final-class-vectorspliteratorlte-implements-spliteratorlte">
        68. static final class VectorSpliterator&lt;E&gt; implements Spliterator&lt;E&gt;
        <a data-clipboard-text="https://hongmao.run/jdk8-src-note/java/util/Vector/#68-static-final-class-vectorspliteratorlte-implements-spliteratorlte" class="gdoc-page__anchor gdoc-page__anchor--right clip" aria-label="Anchor 68. static final class VectorSpliterator&lt;E&gt; implements Spliterator&lt;E&gt;" href="#68-static-final-class-vectorspliteratorlte-implements-spliteratorlte">
            <svg class="icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
        </a>
    </h1>
</div><p><code>Vector</code>的拆分器，类似于<code>ArrayList</code>的拆分器。</p>
<div class="gdoc-page__anchorwrap">
    <h2 id="681-private-final-vectorlte-list">
        68.1 private final Vector&lt;E&gt; list;
        <a data-clipboard-text="https://hongmao.run/jdk8-src-note/java/util/Vector/#681-private-final-vectorlte-list" class="gdoc-page__anchor gdoc-page__anchor--right clip" aria-label="Anchor 68.1 private final Vector&lt;E&gt; list;" href="#681-private-final-vectorlte-list">
            <svg class="icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
        </a>
    </h2>
</div><p>当前拆分器所持有的<code>Vector</code>实例。</p>
<div class="gdoc-page__anchorwrap">
    <h2 id="682-private-object-array">
        68.2 private Object[] array;
        <a data-clipboard-text="https://hongmao.run/jdk8-src-note/java/util/Vector/#682-private-object-array" class="gdoc-page__anchor gdoc-page__anchor--right clip" aria-label="Anchor 68.2 private Object[] array;" href="#682-private-object-array">
            <svg class="icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
        </a>
    </h2>
</div><p>当前拆分器所持有的<code>Vector</code>实例（即上面的<code>list</code>）的元素数据数组（<code>elementData</code>）。</p>
<div class="gdoc-page__anchorwrap">
    <h2 id="683-private-int-index">
        68.3 private int index;
        <a data-clipboard-text="https://hongmao.run/jdk8-src-note/java/util/Vector/#683-private-int-index" class="gdoc-page__anchor gdoc-page__anchor--right clip" aria-label="Anchor 68.3 private int index;" href="#683-private-int-index">
            <svg class="icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
        </a>
    </h2>
</div><p>当前索引，在前进和拆分时修改。</p>
<div class="gdoc-page__anchorwrap">
    <h2 id="684-private-int-fence">
        68.4 private int fence;
        <a data-clipboard-text="https://hongmao.run/jdk8-src-note/java/util/Vector/#684-private-int-fence" class="gdoc-page__anchor gdoc-page__anchor--right clip" aria-label="Anchor 68.4 private int fence;" href="#684-private-int-fence">
            <svg class="icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
        </a>
    </h2>
</div><p>在使用前一直为<code>-1</code>；然后是从<code>1</code>到最后一个索引。</p>
<div class="gdoc-page__anchorwrap">
    <h2 id="685-private-int-expectedmodcount">
        68.5 private int expectedModCount;
        <a data-clipboard-text="https://hongmao.run/jdk8-src-note/java/util/Vector/#685-private-int-expectedmodcount" class="gdoc-page__anchor gdoc-page__anchor--right clip" aria-label="Anchor 68.5 private int expectedModCount;" href="#685-private-int-expectedmodcount">
            <svg class="icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
        </a>
    </h2>
</div><p>设置围栏（<code>fence</code>）时初始化该值。</p>
<div class="gdoc-page__anchorwrap">
    <h2 id="686-vectorspliteratorvectorlte-list-object-array-int-origin-int-fence-int-expectedmodcount">
        68.6 VectorSpliterator(Vector&lt;E&gt; list, Object[] array, int origin, int fence, int expectedModCount)
        <a data-clipboard-text="https://hongmao.run/jdk8-src-note/java/util/Vector/#686-vectorspliteratorvectorlte-list-object-array-int-origin-int-fence-int-expectedmodcount" class="gdoc-page__anchor gdoc-page__anchor--right clip" aria-label="Anchor 68.6 VectorSpliterator(Vector&lt;E&gt; list, Object[] array, int origin, int fence, int expectedModCount)" href="#686-vectorspliteratorvectorlte-list-object-array-int-origin-int-fence-int-expectedmodcount">
            <svg class="icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
        </a>
    </h2>
</div><p>创建覆盖给定范围的新拆分器，也是当前拆分器类的唯一构造函数。</p>
<p>源码如下：</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2"><code class="language-java" data-lang="java"><span style="color:#000">VectorSpliterator</span><span style="color:#000">(</span><span style="color:#000">Vector</span><span style="color:#000">&lt;</span><span style="color:#000">E</span><span style="color:#000">&gt;</span> <span style="color:#000">list</span><span style="color:#000">,</span> <span style="color:#000">Object</span><span style="color:#000">[]</span> <span style="color:#000">array</span><span style="color:#000">,</span> <span style="color:#a90d91">int</span> <span style="color:#000">origin</span><span style="color:#000">,</span> <span style="color:#a90d91">int</span> <span style="color:#000">fence</span><span style="color:#000">,</span>
                  <span style="color:#a90d91">int</span> <span style="color:#000">expectedModCount</span><span style="color:#000">)</span> <span style="color:#000">{</span>
    <span style="color:#a90d91">this</span><span style="color:#000">.</span><span style="color:#836c28">list</span> <span style="color:#000">=</span> <span style="color:#000">list</span><span style="color:#000">;</span>
    <span style="color:#a90d91">this</span><span style="color:#000">.</span><span style="color:#836c28">array</span> <span style="color:#000">=</span> <span style="color:#000">array</span><span style="color:#000">;</span>
    <span style="color:#a90d91">this</span><span style="color:#000">.</span><span style="color:#836c28">index</span> <span style="color:#000">=</span> <span style="color:#000">origin</span><span style="color:#000">;</span>
    <span style="color:#a90d91">this</span><span style="color:#000">.</span><span style="color:#836c28">fence</span> <span style="color:#000">=</span> <span style="color:#000">fence</span><span style="color:#000">;</span>
    <span style="color:#a90d91">this</span><span style="color:#000">.</span><span style="color:#836c28">expectedModCount</span> <span style="color:#000">=</span> <span style="color:#000">expectedModCount</span><span style="color:#000">;</span>
<span style="color:#000">}</span>
</code></pre></div><div class="gdoc-page__anchorwrap">
    <h2 id="687-private-int-getfence">
        68.7 private int getFence()
        <a data-clipboard-text="https://hongmao.run/jdk8-src-note/java/util/Vector/#687-private-int-getfence" class="gdoc-page__anchor gdoc-page__anchor--right clip" aria-label="Anchor 68.7 private int getFence()" href="#687-private-int-getfence">
            <svg class="icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
        </a>
    </h2>
</div><p>首次使用时初始化围栏的值。</p>
<p>源码如下：</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2"><code class="language-java" data-lang="java"><span style="color:#a90d91">private</span> <span style="color:#a90d91">int</span> <span style="color:#000">getFence</span><span style="color:#000">()</span> <span style="color:#000">{</span> <span style="color:#177500">// initialize on first use
</span><span style="color:#177500"></span>    <span style="color:#a90d91">int</span> <span style="color:#000">hi</span><span style="color:#000">;</span>
    <span style="color:#177500">// 围栏小于0才执行初始化，否则直接返回当前的围栏值
</span><span style="color:#177500"></span>    <span style="color:#a90d91">if</span> <span style="color:#000">((</span><span style="color:#000">hi</span> <span style="color:#000">=</span> <span style="color:#000">fence</span><span style="color:#000">)</span> <span style="color:#000">&lt;</span> <span style="color:#000">0</span><span style="color:#000">)</span> <span style="color:#000">{</span>
        <span style="color:#a90d91">synchronized</span><span style="color:#000">(</span><span style="color:#000">list</span><span style="color:#000">)</span> <span style="color:#000">{</span>
            <span style="color:#177500">// 初始化array属性，将其值置为列表的元素数据数组
</span><span style="color:#177500"></span>            <span style="color:#000">array</span> <span style="color:#000">=</span> <span style="color:#000">list</span><span style="color:#000">.</span><span style="color:#836c28">elementData</span><span style="color:#000">;</span>
            <span style="color:#177500">// 期望修改次数置为列表的修改次数
</span><span style="color:#177500"></span>            <span style="color:#000">expectedModCount</span> <span style="color:#000">=</span> <span style="color:#000">list</span><span style="color:#000">.</span><span style="color:#836c28">modCount</span><span style="color:#000">;</span>
            <span style="color:#177500">// 将围栏设置为列表的元素个数
</span><span style="color:#177500"></span>            <span style="color:#000">hi</span> <span style="color:#000">=</span> <span style="color:#000">fence</span> <span style="color:#000">=</span> <span style="color:#000">list</span><span style="color:#000">.</span><span style="color:#836c28">elementCount</span><span style="color:#000">;</span>
        <span style="color:#000">}</span>
    <span style="color:#000">}</span>
    <span style="color:#a90d91">return</span> <span style="color:#000">hi</span><span style="color:#000">;</span>
<span style="color:#000">}</span>
</code></pre></div><div class="gdoc-page__anchorwrap">
    <h2 id="688-public-spliteratorlte-trysplit">
        68.8 public Spliterator&lt;E&gt; trySplit()
        <a data-clipboard-text="https://hongmao.run/jdk8-src-note/java/util/Vector/#688-public-spliteratorlte-trysplit" class="gdoc-page__anchor gdoc-page__anchor--right clip" aria-label="Anchor 68.8 public Spliterator&lt;E&gt; trySplit()" href="#688-public-spliteratorlte-trysplit">
            <svg class="icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
        </a>
    </h2>
</div><p>执行拆分。</p>
<p>源码如下：</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2"><code class="language-java" data-lang="java"><span style="color:#a90d91">public</span> <span style="color:#000">Spliterator</span><span style="color:#000">&lt;</span><span style="color:#000">E</span><span style="color:#000">&gt;</span> <span style="color:#000">trySplit</span><span style="color:#000">()</span> <span style="color:#000">{</span>
    <span style="color:#177500">// 获取围栏位置、当前索引位置，然后基于这俩计算出从当前索引至围栏位置的中间位置
</span><span style="color:#177500"></span>    <span style="color:#a90d91">int</span> <span style="color:#000">hi</span> <span style="color:#000">=</span> <span style="color:#000">getFence</span><span style="color:#000">(),</span> <span style="color:#000">lo</span> <span style="color:#000">=</span> <span style="color:#000">index</span><span style="color:#000">,</span> <span style="color:#000">mid</span> <span style="color:#000">=</span> <span style="color:#000">(</span><span style="color:#000">lo</span> <span style="color:#000">+</span> <span style="color:#000">hi</span><span style="color:#000">)</span> <span style="color:#000">&gt;&gt;&gt;</span> <span style="color:#000">1</span><span style="color:#000">;</span>
    <span style="color:#177500">// 只有当当前索引小于上面计算出的中间位置时拆分才有意义，所以，不满足时不会进行拆分
</span><span style="color:#177500"></span>    <span style="color:#a90d91">return</span> <span style="color:#000">(</span><span style="color:#000">lo</span> <span style="color:#000">&gt;=</span> <span style="color:#000">mid</span><span style="color:#000">)</span> <span style="color:#000">?</span> <span style="color:#a90d91">null</span> <span style="color:#000">:</span>
        <span style="color:#177500">// 如果需要拆分时，创建一个新的VectorSpliterator实例，其范围为当前索引至中间位置
</span><span style="color:#177500"></span>        <span style="color:#177500">// 同时index = mid这一步，将当前拆分器的当前索引位置推后至中间位置
</span><span style="color:#177500"></span>        <span style="color:#177500">// 至此，完成拆分
</span><span style="color:#177500"></span>        <span style="color:#a90d91">new</span> <span style="color:#000">VectorSpliterator</span><span style="color:#000">&lt;</span><span style="color:#000">E</span><span style="color:#000">&gt;(</span><span style="color:#000">list</span><span style="color:#000">,</span> <span style="color:#000">array</span><span style="color:#000">,</span> <span style="color:#000">lo</span><span style="color:#000">,</span> <span style="color:#000">index</span> <span style="color:#000">=</span> <span style="color:#000">mid</span><span style="color:#000">,</span>
                                 <span style="color:#000">expectedModCount</span><span style="color:#000">);</span>
<span style="color:#000">}</span>
</code></pre></div><div class="gdoc-page__anchorwrap">
    <h2 id="689-public-boolean-tryadvanceconsumer-super-e-action">
        68.9 public boolean tryAdvance(Consumer&lt;? super E&gt; action)
        <a data-clipboard-text="https://hongmao.run/jdk8-src-note/java/util/Vector/#689-public-boolean-tryadvanceconsumer-super-e-action" class="gdoc-page__anchor gdoc-page__anchor--right clip" aria-label="Anchor 68.9 public boolean tryAdvance(Consumer&lt;? super E&gt; action)" href="#689-public-boolean-tryadvanceconsumer-super-e-action">
            <svg class="icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
        </a>
    </h2>
</div><p>对当前索引位置的元素执行给定的操作，然后将当前索引右移一位（即加一）。</p>
<p>源码如下：</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2"><code class="language-java" data-lang="java"><span style="color:#000">@SuppressWarnings</span><span style="color:#000">(</span><span style="color:#c41a16">&#34;unchecked&#34;</span><span style="color:#000">)</span>
<span style="color:#a90d91">public</span> <span style="color:#a90d91">boolean</span> <span style="color:#000">tryAdvance</span><span style="color:#000">(</span><span style="color:#000">Consumer</span><span style="color:#000">&lt;?</span> <span style="color:#a90d91">super</span> <span style="color:#000">E</span><span style="color:#000">&gt;</span> <span style="color:#000">action</span><span style="color:#000">)</span> <span style="color:#000">{</span>
    <span style="color:#a90d91">int</span> <span style="color:#000">i</span><span style="color:#000">;</span>
    <span style="color:#a90d91">if</span> <span style="color:#000">(</span><span style="color:#000">action</span> <span style="color:#000">==</span> <span style="color:#a90d91">null</span><span style="color:#000">)</span>
        <span style="color:#a90d91">throw</span> <span style="color:#a90d91">new</span> <span style="color:#000">NullPointerException</span><span style="color:#000">();</span>
    <span style="color:#177500">// 当前索引不可大于等于围栏位置
</span><span style="color:#177500"></span>    <span style="color:#a90d91">if</span> <span style="color:#000">(</span><span style="color:#000">getFence</span><span style="color:#000">()</span> <span style="color:#000">&gt;</span> <span style="color:#000">(</span><span style="color:#000">i</span> <span style="color:#000">=</span> <span style="color:#000">index</span><span style="color:#000">))</span> <span style="color:#000">{</span>
        <span style="color:#177500">// 上面已经取出了当前索引的位置，赋值给了i，此处对当前索引进行右移操作，即加一
</span><span style="color:#177500"></span>        <span style="color:#000">index</span> <span style="color:#000">=</span> <span style="color:#000">i</span> <span style="color:#000">+</span> <span style="color:#000">1</span><span style="color:#000">;</span>
        <span style="color:#177500">// 对i位置的元素执行给定的操作
</span><span style="color:#177500"></span>        <span style="color:#000">action</span><span style="color:#000">.</span><span style="color:#836c28">accept</span><span style="color:#000">((</span><span style="color:#000">E</span><span style="color:#000">)</span><span style="color:#000">array</span><span style="color:#000">[</span><span style="color:#000">i</span><span style="color:#000">]);</span>
        <span style="color:#a90d91">if</span> <span style="color:#000">(</span><span style="color:#000">list</span><span style="color:#000">.</span><span style="color:#836c28">modCount</span> <span style="color:#000">!=</span> <span style="color:#000">expectedModCount</span><span style="color:#000">)</span>
            <span style="color:#a90d91">throw</span> <span style="color:#a90d91">new</span> <span style="color:#000">ConcurrentModificationException</span><span style="color:#000">();</span>
        <span style="color:#a90d91">return</span> <span style="color:#a90d91">true</span><span style="color:#000">;</span>
    <span style="color:#000">}</span>
    <span style="color:#a90d91">return</span> <span style="color:#a90d91">false</span><span style="color:#000">;</span>
<span style="color:#000">}</span>
</code></pre></div><div class="gdoc-page__anchorwrap">
    <h2 id="6810-public-void-foreachremainingconsumer-super-e-action">
        68.10 public void forEachRemaining(Consumer&lt;? super E&gt; action)
        <a data-clipboard-text="https://hongmao.run/jdk8-src-note/java/util/Vector/#6810-public-void-foreachremainingconsumer-super-e-action" class="gdoc-page__anchor gdoc-page__anchor--right clip" aria-label="Anchor 68.10 public void forEachRemaining(Consumer&lt;? super E&gt; action)" href="#6810-public-void-foreachremainingconsumer-super-e-action">
            <svg class="icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
        </a>
    </h2>
</div><p>对当前拆分器的剩余元素依次执行给的操作。</p>
<p>源码如下：</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2"><code class="language-java" data-lang="java"><span style="color:#000">@SuppressWarnings</span><span style="color:#000">(</span><span style="color:#c41a16">&#34;unchecked&#34;</span><span style="color:#000">)</span>
<span style="color:#a90d91">public</span> <span style="color:#a90d91">void</span> <span style="color:#000">forEachRemaining</span><span style="color:#000">(</span><span style="color:#000">Consumer</span><span style="color:#000">&lt;?</span> <span style="color:#a90d91">super</span> <span style="color:#000">E</span><span style="color:#000">&gt;</span> <span style="color:#000">action</span><span style="color:#000">)</span> <span style="color:#000">{</span>
    <span style="color:#a90d91">int</span> <span style="color:#000">i</span><span style="color:#000">,</span> <span style="color:#000">hi</span><span style="color:#000">;</span> <span style="color:#177500">// hoist accesses and checks from loop
</span><span style="color:#177500"></span>    <span style="color:#000">Vector</span><span style="color:#000">&lt;</span><span style="color:#000">E</span><span style="color:#000">&gt;</span> <span style="color:#000">lst</span><span style="color:#000">;</span> <span style="color:#000">Object</span><span style="color:#000">[]</span> <span style="color:#000">a</span><span style="color:#000">;</span>
    <span style="color:#a90d91">if</span> <span style="color:#000">(</span><span style="color:#000">action</span> <span style="color:#000">==</span> <span style="color:#a90d91">null</span><span style="color:#000">)</span>
        <span style="color:#a90d91">throw</span> <span style="color:#a90d91">new</span> <span style="color:#000">NullPointerException</span><span style="color:#000">();</span>
    <span style="color:#177500">// list不可为空
</span><span style="color:#177500"></span>    <span style="color:#a90d91">if</span> <span style="color:#000">((</span><span style="color:#000">lst</span> <span style="color:#000">=</span> <span style="color:#000">list</span><span style="color:#000">)</span> <span style="color:#000">!=</span> <span style="color:#a90d91">null</span><span style="color:#000">)</span> <span style="color:#000">{</span>
        <span style="color:#177500">// 如果围栏小于0，则重新获取围栏
</span><span style="color:#177500"></span>        <span style="color:#a90d91">if</span> <span style="color:#000">((</span><span style="color:#000">hi</span> <span style="color:#000">=</span> <span style="color:#000">fence</span><span style="color:#000">)</span> <span style="color:#000">&lt;</span> <span style="color:#000">0</span><span style="color:#000">)</span> <span style="color:#000">{</span>
            <span style="color:#a90d91">synchronized</span><span style="color:#000">(</span><span style="color:#000">lst</span><span style="color:#000">)</span> <span style="color:#000">{</span>
                <span style="color:#000">expectedModCount</span> <span style="color:#000">=</span> <span style="color:#000">lst</span><span style="color:#000">.</span><span style="color:#836c28">modCount</span><span style="color:#000">;</span>
                <span style="color:#000">a</span> <span style="color:#000">=</span> <span style="color:#000">array</span> <span style="color:#000">=</span> <span style="color:#000">lst</span><span style="color:#000">.</span><span style="color:#836c28">elementData</span><span style="color:#000">;</span>
                <span style="color:#000">hi</span> <span style="color:#000">=</span> <span style="color:#000">fence</span> <span style="color:#000">=</span> <span style="color:#000">lst</span><span style="color:#000">.</span><span style="color:#836c28">elementCount</span><span style="color:#000">;</span>
            <span style="color:#000">}</span>
        <span style="color:#000">}</span>
        <span style="color:#a90d91">else</span>
            <span style="color:#000">a</span> <span style="color:#000">=</span> <span style="color:#000">array</span><span style="color:#000">;</span>
        <span style="color:#177500">// 如果数组不为空 且 当前索引大于等于0 且 围栏位置小于等于数组长度，则遍历数组
</span><span style="color:#177500"></span>        <span style="color:#177500">// 此处有个隐秘操作：index = hi，这一步将当前索引位置推至围栏位置，这样就不用每遍历到一个元素就对index进行加1了
</span><span style="color:#177500"></span>        <span style="color:#a90d91">if</span> <span style="color:#000">(</span><span style="color:#000">a</span> <span style="color:#000">!=</span> <span style="color:#a90d91">null</span> <span style="color:#000">&amp;&amp;</span> <span style="color:#000">(</span><span style="color:#000">i</span> <span style="color:#000">=</span> <span style="color:#000">index</span><span style="color:#000">)</span> <span style="color:#000">&gt;=</span> <span style="color:#000">0</span> <span style="color:#000">&amp;&amp;</span> <span style="color:#000">(</span><span style="color:#000">index</span> <span style="color:#000">=</span> <span style="color:#000">hi</span><span style="color:#000">)</span> <span style="color:#000">&lt;=</span> <span style="color:#000">a</span><span style="color:#000">.</span><span style="color:#836c28">length</span><span style="color:#000">)</span> <span style="color:#000">{</span>
            <span style="color:#177500">// 遍历数组，从当前索引位置到围栏位置
</span><span style="color:#177500"></span>            <span style="color:#a90d91">while</span> <span style="color:#000">(</span><span style="color:#000">i</span> <span style="color:#000">&lt;</span> <span style="color:#000">hi</span><span style="color:#000">)</span>
                <span style="color:#177500">// 依次执行给定操作
</span><span style="color:#177500"></span>                <span style="color:#000">action</span><span style="color:#000">.</span><span style="color:#836c28">accept</span><span style="color:#000">((</span><span style="color:#000">E</span><span style="color:#000">)</span> <span style="color:#000">a</span><span style="color:#000">[</span><span style="color:#000">i</span><span style="color:#000">++]);</span>
            <span style="color:#a90d91">if</span> <span style="color:#000">(</span><span style="color:#000">lst</span><span style="color:#000">.</span><span style="color:#836c28">modCount</span> <span style="color:#000">==</span> <span style="color:#000">expectedModCount</span><span style="color:#000">)</span>
                <span style="color:#a90d91">return</span><span style="color:#000">;</span>
        <span style="color:#000">}</span>
    <span style="color:#000">}</span>
    <span style="color:#a90d91">throw</span> <span style="color:#a90d91">new</span> <span style="color:#000">ConcurrentModificationException</span><span style="color:#000">();</span>
<span style="color:#000">}</span>
</code></pre></div><div class="gdoc-page__anchorwrap">
    <h2 id="6811-public-long-estimatesize">
        68.11 public long estimateSize()
        <a data-clipboard-text="https://hongmao.run/jdk8-src-note/java/util/Vector/#6811-public-long-estimatesize" class="gdoc-page__anchor gdoc-page__anchor--right clip" aria-label="Anchor 68.11 public long estimateSize()" href="#6811-public-long-estimatesize">
            <svg class="icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
        </a>
    </h2>
</div><p>获取剩余元素的预估个数。</p>
<p>源码如下：</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2"><code class="language-java" data-lang="java"><span style="color:#a90d91">public</span> <span style="color:#a90d91">long</span> <span style="color:#000">estimateSize</span><span style="color:#000">()</span> <span style="color:#000">{</span>
    <span style="color:#177500">// 围栏位置减去当前索引位置
</span><span style="color:#177500"></span>    <span style="color:#a90d91">return</span> <span style="color:#000">(</span><span style="color:#a90d91">long</span><span style="color:#000">)</span> <span style="color:#000">(</span><span style="color:#000">getFence</span><span style="color:#000">()</span> <span style="color:#000">-</span> <span style="color:#000">index</span><span style="color:#000">);</span>
<span style="color:#000">}</span>
</code></pre></div><div class="gdoc-page__anchorwrap">
    <h2 id="6812-public-int-characteristics">
        68.12 public int characteristics()
        <a data-clipboard-text="https://hongmao.run/jdk8-src-note/java/util/Vector/#6812-public-int-characteristics" class="gdoc-page__anchor gdoc-page__anchor--right clip" aria-label="Anchor 68.12 public int characteristics()" href="#6812-public-int-characteristics">
            <svg class="icon gdoc_link"><use xlink:href="#gdoc_link"></use></svg>
        </a>
    </h2>
</div><p>获取当前拆分器报告的特征值。</p>
<p>源码如下：</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:2;-o-tab-size:2;tab-size:2"><code class="language-java" data-lang="java"><span style="color:#a90d91">public</span> <span style="color:#a90d91">int</span> <span style="color:#000">characteristics</span><span style="color:#000">()</span> <span style="color:#000">{</span>
    <span style="color:#a90d91">return</span> <span style="color:#000">Spliterator</span><span style="color:#000">.</span><span style="color:#836c28">ORDERED</span> <span style="color:#000">|</span> <span style="color:#000">Spliterator</span><span style="color:#000">.</span><span style="color:#836c28">SIZED</span> <span style="color:#000">|</span> <span style="color:#000">Spliterator</span><span style="color:#000">.</span><span style="color:#836c28">SUBSIZED</span><span style="color:#000">;</span>
<span style="color:#000">}</span>
</code></pre></div>

    </article>

                








    
    

    
        
        

        
        
            
            
            

            

            

            
        

        
        
            
    
    

    
        
        

        
        
            
            
            

            

            

            
        

        
        
            
    
    

    
        
        

        
        
            
            
            

            

            

            
        

        
        
    
        
        

        
        
            
            
            

            

            

            
        

        
        
    
        
        

        
        
            
            
            

            

            

            
        

        
        
    
        
        

        
        
            
            
            

            

            

            
        

        
        
    
        
        

        
        
            
            
            

            

            

            
        

        
        
    
        
        

        
        
            
            
            

            

            

            
        

        
        
    
        
        

        
        
            
            
            

            

            

            
        

        
        
    
        
        

        
        
            
            
            

            

            

            
        

        
        
    
        
        

        
        
            
            
            

            

            

            
        

        
        
    
        
        

        
        
            
            
            

            

            

            
        

        
        
    
        
        

        
        
            
            
            

            

            

            
        

        
        
    
        
        

        
        
            
            
            

            

            

            
        

        
        
    
        
        

        
        
            
            
            

            

            

            
        

        
        
    
        
        

        
        
            
            
            

            

            
                
                
            

            
        

        
        
    

        
    

        
    





<div class="gdoc-page__footer flex flex-wrap justify-between">
    
    
        <span class="gdoc-page__nav">
            
                <a class="gdoc-page__nav--prev flex align-center" href="/jdk8-src-note/java/util/RandomAccess/" title="RandomAccess"> RandomAccess</a>
            
        </span>
        <span class="gdoc-page__nav">
            
        </span>
    
</div>

            </div>
        </main>

        <footer class="gdoc-footer">
    <div class="container flex flex-wrap">
        <span class="gdoc-footer__item">
            Built with <a href="https://gohugo.io/" class="gdoc-footer__link">Hugo</a> and
            <svg class="icon gdoc_heart"><use xlink:href="#gdoc_heart"></use></svg>
        </span>
        
        
    </div>
</footer>

    </div>

    




<script defer src="/jdk8-src-note/js/zh-cn.search.min.66b6c7df3c6f2d0291b704e6db2fe9e9a92262e2fc4e3539b6304773a4fed5a6.js"></script>



<script defer src="/jdk8-src-note/js/clipboard-27784b7376.min.js"></script>
<script defer src="/jdk8-src-note/js/clipboard-loader-f0b5fbd5f6.min.js"></script>


</body>
</html>
